

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>DAT : module functional-administration &mdash; documentation VITAM - Manuel de développement 0.20.0</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Recherche" href="../../search.html"/>
    <link rel="top" title="documentation VITAM - Manuel de développement 0.20.0" href="../../index.html"/>
        <link rel="up" title="Functional administration" href="_toc.html"/>
        <link rel="next" title="Administration-Management-Common" href="admin-functional-common.html"/>
        <link rel="prev" title="Introduction" href="introduction.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> VITAM - Manuel de développement
          

          
            
            <img src="../../_static/LogoVitamGrand2.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.20.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../_toc.html">Détails par composant</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../access/_toc.html">Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="../common/_toc.html">Common</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="_toc.html">Functional administration</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">DAT : module functional-administration</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin-functional-common.html">Administration-Management-Common</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin-functional-client.html">Administration-Management-client</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin-functional-client.html#utilisation">Utilisation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ihm-demo/_toc.html">IHM demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingest/_toc.html">Ingest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logbook/_toc.html">Logbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metadata/_toc.html">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing/_toc.html">Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/_toc.html">Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technical-administration/_toc.html">Technical administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../worker/_toc.html">Worker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workspace/_toc.html">Workspace</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../parallisation_tests.html">Parallélisation des tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../parallisation_tests.html#separation-des-tests-tdd-et-tests-d-integration">Séparation des tests TDD et tests d&#8217;intégration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../parallisation_tests.html#parallelisation-de-tests-unitaires">Parallélisation de tests unitaires</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../parallisation_tests.html#configuration-de-build-avec-les-options-de-tests">Configuration de build avec les options de tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugin-icu-elasticsearch.html">Plugin ICU Elasticsearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gestion-database.html">Gestion des bases de données</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">VITAM - Manuel de développement</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../_toc.html">Détails par composant</a> &raquo;</li>
      
          <li><a href="_toc.html">Functional administration</a> &raquo;</li>
      
    <li>DAT : module functional-administration</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/include/functional-administration/admin-functional-dat.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dat-module-functional-administration">
<h1>DAT : module functional-administration<a class="headerlink" href="#dat-module-functional-administration" title="Lien permanent vers ce titre">¶</a></h1>
<p>Ce document présente l&#8217;ensemble du manuel développement concernant le développment du module
functional-administration qui identifie par la user story #71, qui contient :</p>
<ul class="simple">
<li>modules &amp; packages</li>
<li>classes métiers</li>
</ul>
<hr class="docutils" />
<ol class="arabic simple">
<li>Modules et packages</li>
</ol>
<p>functional-administration</p>
<blockquote>
<div><blockquote>
<div><p><a href="#id1"><span class="problematic" id="id2">|</span></a>&#8212; functional-administration-common : contenant des classes pour des traitements communs concernant le format référentiels, l&#8217;opération auprès de la base de données
<a href="#id3"><span class="problematic" id="id4">|</span></a>&#8212; functional-administration-format : fournir des traitements de base pour les formats référentiels de VITAM</p>
<blockquote>
<div><a href="#id5"><span class="problematic" id="id6">|</span></a>&#8212; functional-administration-format-api  : définitions des APIs
<a href="#id7"><span class="problematic" id="id8">|</span></a>&#8212; functional-administration-format-core : implémentations des APIs
<a href="#id9"><span class="problematic" id="id10">|</span></a>&#8212; functional-administration-format-import</div></blockquote>
<p><a href="#id11"><span class="problematic" id="id12">|</span></a>&#8212; functional-administration-rule : fournir des traitements de base pour la gestion de règles administratives</p>
<blockquote>
<div><a href="#id13"><span class="problematic" id="id14">|</span></a>&#8212; functional-administration-rule-api  : Définition des APIs
<a href="#id15"><span class="problematic" id="id16">|</span></a>&#8212; functional-administration-rule-core : Impélmentation des APIs</div></blockquote>
<dl class="docutils">
<dt><a href="#id17"><span class="problematic" id="id18">|</span></a>&#8212; functional-administration-accession-register</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">fournir des traitements de base pour la gestion des registres de fonds</span><dd><a href="#id19"><span class="problematic" id="id20">|</span></a>&#8212; functional-administration-accession-register-core : Impélmentation des traitements des registres de fonds</dd>
</dl>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><a href="#id21"><span class="problematic" id="id22">|</span></a>&#8212; functional-administration-rest   : le serveur REST de functional-administration qui donnes des traitement sur les traitements de format référentiel et gestion de règles administratives.
<a href="#id23"><span class="problematic" id="id24">|</span></a>&#8212; functional-administration-client  : client functional-administration qui sera utilisé par les autres modules pour les appels de traitement sur le format référentiel &amp; gestion de règles.
<a href="#id25"><span class="problematic" id="id26">|</span></a>&#8212; functional-administration-contract : fournis les traitements de base pour les contrat d&#8217;accès et les contrat d&#8217;entrées
<a href="#id27"><span class="problematic" id="id28">|</span></a>&#8212; functional-administration-profile  : fournis les traitements de base pour les profile.</p>
</div></blockquote>
<p><a href="#id29"><span class="problematic" id="id30">|</span></a>&#8212; functional-administration-context  : fournis les traitements de base pour les contextes</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Classes métiers</li>
</ol>
<p>Dans cette section, nous présentons quelques classes principales dans des modules/packages
abordés ci-dessus.</p>
<p>2.1. functional-administration-common :</p>
<p>fr.gouv.vitam.functional.administration.common</p>
<ul class="simple">
<li>FileFormat.java :</li>
</ul>
<p>une extension de VitamDocument définissant le référentiel des formats.</p>
<ul class="simple">
<li>ReferentialFile.java :</li>
</ul>
<p>interface définissant des opérations liées au référentiel des format : importation du fichier PRONOM, vérificaton du fichier PRONOM soumis, recherche d&#8217;un format existant et suppression du référentiel des formats.</p>
<ul class="simple">
<li>IngestContract.java :</li>
</ul>
<p>Le modèle de données des contracts d&#8217;entrée, ce modèle étend VitamDocument.</p>
<ul class="simple">
<li>AccessContract.java :</li>
</ul>
<p>Le modèle de données des contracts d&#8217;accès, ce modèle étend VitamDocument.</p>
<ul class="simple">
<li>Profile.java :</li>
</ul>
<p>Le modèle de données des profiles, ce modèle étend VitamDocument.</p>
<ul class="simple">
<li>Context.java :</li>
</ul>
<p>Le modèle de données des contextes, ce modèle étend VitamDocument.</p>
<p>fr.gouv.vitam.functional.administration.common.embed
ProfileFormat.class: Une enum embeded dans le profile qui sert à définir le format du fichier profile (xsd, rng)
ProfileStatus.class: Une enum embeded dans le profile qui sert à définir le status (ACTIVE, INACTIVE)</p>
<p>fr.gouv.vitam.functional.administration.common.exception : définir des exceptions concernant de opération sur le
référentiel des formats</p>
<p>fr.gouv.vitam.functional.administration.common.server
les classe de traitement auprès de la base de données mongodb pour les opérations de référentiel de format.</p>
<ul class="simple">
<li>FunctionalAdminCollections.java :</li>
</ul>
<p>définir la collection dans mongodb pour des données de formats référentiels</p>
<ul class="simple">
<li>MongoDbAccessReferential.java :</li>
</ul>
<p>interface définissant des opérations sur le format de fichier auprès de la base mongodb: insert d&#8217;une base de PRONOM, delete de la collection, recherche d&#8217;un format par son Id dans la base,recherche des format par conditions</p>
<ul class="simple">
<li>MongoDbAccessAdminImpl.java :</li>
</ul>
<p>une implémentation de l&#8217;interface MongoDbAccessReferential en extension le traitementMongoDbAccess commun pour mongodb</p>
<p>2.2. functional-administration-format</p>
<blockquote>
<div><ul class="simple">
<li>functional-administration-format-api</li>
<li>functional-administration-format-core</li>
</ul>
<ul class="simple">
<li>PronomParser.java : le script de traitement permettant de de récupérer l&#8217;ensemble de format en format json depuis d&#8217;un fichier PRONOM stantard en format XML contient des différents formats référentiels</li>
<li>ReferentialFormatFileImpl.java : implémentation de base des opération sur le format référentiel de fichier à partir d&#8217;un fichier PRONOM jusqu&#8217;à la base MongoDB.</li>
</ul>
<ul class="simple">
<li>functional-administration-format-import</li>
</ul>
</div></blockquote>
<p>2.3. functional-administration-rest</p>
<ul class="simple">
<li>AdminManagementResource.java : définir des ressources différentes pour le serveur REST functional-administration</li>
<li>AdminManagementApplication.java : créer &amp; lancer le serveur d&#8217;application avec une configuration</li>
<li>ContractResource.java : Définir l&#8217;endpoints de l&#8217;api rest des contrats (entrée et accès)</li>
<li>ProfileResource.java : Définir l&#8217;endpoint de l&#8217;api rest du profile</li>
<li>ContextResource.java : Définir l&#8217;endpoint de l&#8217;api rest du contexte</li>
</ul>
<p>2.4. functional-administration-client</p>
<ul class="simple">
<li>AdminManagementClientRest.java : créer le client de et des fonctionnalités en se connectant au serveur REST</li>
<li>AdminManagementClientMock.java : créer le client et des fonctionnalités en se connectant au mock de serveur</li>
</ul>
<p>2.5. functional-administration-rules</p>
<blockquote>
<div><blockquote>
<div><ul class="simple">
<li>functional-administration-rules-api</li>
<li>functional-administration-rules-core</li>
</ul>
<ul class="simple">
<li>RulesManagerParser.java :permett de de parser le fichier de référentiel de règle de gestion d&#8217;extension .CSV et récupérer le contenu en ArrayNode</li>
<li>RulesManagerFileImpl.java : implémentation de base des opération sur les paramètres de référentiel de regle de gestion à partir de l&#8217;array Node générer après le parse de CSV File jusqu&#8217;à la base MongoDB.</li>
</ul>
</div></blockquote>
<p>Le contrôle au niveau de RulesManagerFileImpl de fichier CSV a été mis à jour .</p>
<p>Définition d&#8217;un référentiel valide en se basant sur les critères ci_dessous :</p>
<dl class="docutils">
<dt>Chaque RuleId doit être UNIQUE dans le référentiel</dt>
<dd><p class="first">RuleType doit être dans l&#8217;énumération suivante, non sensible à la casse : (AppraisalRule, AccessRule, StorageRule, DisseminationRule, ClassificationRule, ReuseRule)
RuleDuration :</p>
<blockquote class="last">
<div><ul class="simple">
<li>Depuis le fichier CSV, peut être un entier positif ou nul ou &#8220;unlimited&#8221; (insensible à la casse). La valeur réelle de l&#8217;enregistrement dans la collection est laissée à la discrétion des équipes de développements (ex &#8220;-1&#8221; si on veut garder une valeur numérique)</li>
<li>Permettre les manipulations sur des nombres (plus grand que.. plus petit que... Et calcul de date). Actuellement le champ est de type string, ce qui semble poser de nombreuses contraintes</li>
</ul>
<p>RuleMeasurement:</p>
<blockquote>
<div><p>RuleMeasurement doit être dans l&#8217;énumération suivante, non sensible à la casse : (year, month, day)
RuleMeasurement peut aussi avoir comme valeur, non sensible à la casse &#8220;second&#8221;. Cette demande est dans l&#8217;optique de la story #740 et n&#8217;a de sens qu&#8217;à des fins de tests.
L&#8217;association de RuleDuration et RuleMeasurement doit être inférieure ou égale à 999 ans. (Mettre &#8220;15000 jours est donc autorisé)</p>
<p>L&#8217;unité de mesure (RuleMeasurement) doit être écrite en français dans l&#8217;interface, comme c&#8217;est déjà le cas actuellement : année(s), mois, jour(s), seconde(s)</p>
<p>Dans le cas des règles unlimited</p>
<ul class="simple">
<li>La valeur que doit renvoyer l&#8217;API lorsque la règle a une durée &#8216;unlimited&#8217; dépend du choix de design effectué pour l&#8217;enregistrement de la valeur &#8216;unlimited&#8217;</li>
<li>Dans l&#8217;IHM standard, la date de fin doit être au choix marquée comme :</li>
</ul>
<ul class="simple">
<li>&#8220;Illimitée (date de début inconnue)&#8221; : dans le cas où la date de fin n&#8217;est pas connue car la startDate n&#8217;est pas connue</li>
<li>&#8220;Illimitée (règle à durée illimitée)&#8221; : dans le cas où la date de fin ne peut pas être calculée car la durée de la règle est &#8216;unlimited&#8217;</li>
</ul>
</div></blockquote>
</div></blockquote>
</dd>
</dl>
</div></blockquote>
<p>2.6. functional-administration-accession-register</p>
<blockquote>
<div><ul class="simple">
<li>functional-administration-accession-register-api</li>
<li>functional-administration-accession-register-core</li>
</ul>
<ul class="simple">
<li>ReferentialAccessionRegisterImpl.java :implémentation de base des opération sur la collection registre de fond .</li>
</ul>
<p>permet de créer une collection registre de fond et de faire la recherche par Service Producteur et l&#8217;affichage de détaile.</p>
</div></blockquote>
<p>2.7. functional-administration-contract</p>
<p>fr.gouv.vitam.functional.administration.contract.api</p>
<ul class="simple">
<li>ContractService.java :   Interface définissant les différentes opérations sur les contrats (contrat d&#8217;accès et contrat d&#8217;entrée)</li>
</ul>
<p>fr.gouv.vitam.functional.administration.contract.core</p>
<ul class="simple">
<li>AccessContractImpl.java : Classe d&#8217;implémentation pour la gestion des contrats d&#8217;accès</li>
<li>ContractStatus.java : Enum pour les différents status des contrat d&#8217;accès et des contrat d&#8217;entrées</li>
<li>ContractValidator.java : Interface fonctionnelle de validations des contrats</li>
<li>GenericContractValidator.java : Interface fonctionnelle de validations des contrats</li>
<li>IngestContractImpl.java : Classe d&#8217;implémentation pour la gestion des contrats d&#8217;entrées</li>
</ul>
<p>2.8. functional-administration-profile</p>
<p>fr.gouv.vitam.functional.administration.profile.api</p>
<ul class="simple">
<li>ProfileService.java :   Interface définissant les différentes opérations sur les profiles.</li>
</ul>
<p>fr.gouv.vitam.functional.administration.profile.api.impl</p>
<ul class="simple">
<li>ProfileServiceImpl.java :   Implémentation du service ProfileService.</li>
</ul>
<p>fr.gouv.vitam.functional.administration.profile.core</p>
<ul class="simple">
<li>ProfileManager.java : Gère toutes les opérations du logbook et toutes les opérations de validation concernant les profiles. Lors de la validation, il vérifie (si déjà existence dans la base de données, champs obligatoires, fichiers au format xsd ou rng valides, ..).</li>
<li>ProfileValidator.java : Interface fonctionnelle de validations des contrats</li>
</ul>
<p>2.8. functional-administration-profile</p>
<p>fr.gouv.vitam.functional.administration.context.api</p>
<p>-ContextService.java : Interface définissant les différentes opérations sur les contextes</p>
<p>fr.gouv.vitam.functional.administration.context.core</p>
<p>-ContextServiceImpl.java : Implémentation du Service ContextService
-ContextValidator.java : Interface fonctionnelle de validations des contextes</p>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="admin-functional-common.html" class="btn btn-neutral float-right" title="Administration-Management-Common" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral" title="Introduction" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.20.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>