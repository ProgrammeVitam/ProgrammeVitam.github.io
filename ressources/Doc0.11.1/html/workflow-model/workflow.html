

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Workflow d’ingest/d’entrée &mdash; documentation VITAM - Modèle de workflow 0.11.1</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Recherche" href="search.html"/>
    <link rel="top" title="documentation VITAM - Modèle de workflow 0.11.1" href="index.html"/>
        <link rel="prev" title="VITAM - Modèle de workflow" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> VITAM - Modèle de workflow
          

          
            
            <img src="_static/LogoVitamGrand2.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.11.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Workflow d&#8217;ingest/d&#8217;entrée</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#processus-d-entree-vision-metier">Processus d&#8217;entrée (vision métier)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#controles-prealables-a-l-entree-stp-sanity-check-sip">Contrôles préalables à l&#8217;entrée (STP_SANITY_CHECK_SIP)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reception-dans-vitam-stp-upload-sip-etape-de-reception-du-sip-dans-vitam">Réception dans vitam (STP_UPLOAD_SIP) : Etape de réception du SIP dans Vitam</a></li>
<li class="toctree-l3"><a class="reference internal" href="#controle-du-sip-stp-ingest-control-sip">Contrôle du SIP (STP_INGEST_CONTROL_SIP)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#controle-et-traitements-des-objets-stp-og-check-and-transforme">Contrôle et traitements des objets (STP_OG_CHECK_AND_TRANSFORME)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#controle-et-traitements-des-unites-archivistiques-stp-og-check-and-transforme">Contrôle et traitements des unités archivistiques (STP_OG_CHECK_AND_TRANSFORME)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#preparation-de-la-prise-en-charge-stp-storage-availability-check">Préparation de la prise en charge (STP_STORAGE_AVAILABILITY_CHECK)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rangement-des-objets-stp-og-storing">Rangement des objets (STP_OG_STORING)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rangement-des-unites-archivistiques-stp-unit-storing">Rangement des unites archivistiques (STP_UNIT_STORING)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#registre-des-fonds-stp-accession-registration">Registre des fonds (STP_ACCESSION_REGISTRATION)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#finalisation-de-l-entree-stp-ingest-finalisation">Finalisation de l&#8217;entrée (STP_INGEST_FINALISATION)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#structure-du-workflow-beta">Structure du Workflow (Bêta)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#structure-du-fichier-properties-du-worflow">Structure du fichier Properties du Worflow</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">VITAM - Modèle de workflow</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Workflow d&#8217;ingest/d&#8217;entrée</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/workflow.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="workflow-d-ingest-d-entree">
<h1>Workflow d&#8217;ingest/d&#8217;entrée<a class="headerlink" href="#workflow-d-ingest-d-entree" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Lien permanent vers ce titre">¶</a></h2>
<p>Ce document décrit le processus (workflow) d&#8217;entrée mis en place dans la solution logicielle Vitam, et notamment l&#8217;implémentation mise en place pour celui-ci dans la version bêta de cette solution.</p>
</div>
<div class="section" id="processus-d-entree-vision-metier">
<h2>Processus d&#8217;entrée (vision métier)<a class="headerlink" href="#processus-d-entree-vision-metier" title="Lien permanent vers ce titre">¶</a></h2>
<p>Un workflow est un processus composé d’étapes (macro-workflow), elles-mêmes composées d’une liste d’actions à exécuter de manière séquentielle, une seule fois ou répétées sur une liste d’éléments (micro-workflow).</p>
<p>Chaque étape, chaque action peuvent avoir les statuts suivants :</p>
<ul class="simple">
<li>OK : le traitement associé s&#8217;est passé correctement. Le workflow continue.</li>
<li>Warning : le traitement associé a généré un avertissement (e.g. le format de l&#8217;objet est mal déclaré dans le bordereau de versement). Le workflow continue.</li>
<li>KO : le traitement associé a généré une erreur métier. Le workflow s&#8217;arrête si le modèle d&#8217;execution est bloquant (cf. ci-dessous).</li>
<li>FATAL : le traitement associé a généré une erreur technique. Le workflow s&#8217;arrête.</li>
</ul>
<p>Chaque action peut avoir les modèles d&#8217;éxécutions suivants (toutes les étapes sont par défaut bloquantes) :</p>
<ul>
<li><p class="first">Bloquant</p>
<blockquote>
<div><ul class="simple">
<li>Si une action est identifiée en erreur, l&#8217;étape en cours est alors arrêtée et le workflow passe à la derniere étape de finalisation de l&#8217;entrée. Un accusé de reception est généré et le statut du processus d’entrée passe à « erreur ».</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Non bloquant</p>
<blockquote>
<div><ul class="simple">
<li>Si une action est identifiée en erreur, le reste des actions est exécuté et le statut de l&#8217;étape correspondant passe à « erreur ». L&#8217;étape en cours est alors arrêtée et le workflow passe à la derniere étape de finalisation de l&#8217;entrée. Un accusé de reception est généré et le statut du processus d’entrée passe à « erreur ».</li>
</ul>
</div></blockquote>
</li>
</ul>
<p>Le processus d&#8217;entrée débute lors du lancement du chargement d&#8217;un Submission Information Package dans la solution Vitam. De plus, toutes les étapes et actions sont journalisées dans le journal des opérations.
Les étapes et actions associées ci-dessous décrivent le processus d&#8217;entrée (clé et description de la clé associée dans le journal des opérations) tel qu&#8217;implémenté dans la version bêta de la solution logicielle :</p>
<div class="section" id="controles-prealables-a-l-entree-stp-sanity-check-sip">
<h3>Contrôles préalables à l&#8217;entrée (STP_SANITY_CHECK_SIP)<a class="headerlink" href="#controles-prealables-a-l-entree-stp-sanity-check-sip" title="Lien permanent vers ce titre">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>Contrôle sanitaire (SANITY_CHECK_SIP)<ul>
<li><strong>Règle</strong> : vérification de l&#8217;absence de virus dans le SIP.</li>
<li><strong>Type</strong> : bloquant.</li>
<li><strong>Statuts</strong> :<ul>
<li>OK : aucun virus n&#8217;est détecté dans le SIP (SANITY_CHECK_SIP.OK=Succès du contrôle sanitaire : aucun virus détecté)</li>
<li>KO : un ou plusieurs virus ont été detectés dans le SIP (SANITY_CHECK_SIP.KO=Échec du contrôle sanitaire du SIP : fichier détecté comme infecté)</li>
<li>FATAL : la vérification de la présence de virus dans le SIP n&#8217;a pas pu être faite suite à une erreur système (SANITY_CHECK_SIP.FATAL=Erreur fatale lors du contrôle sanitaire du SIP)</li>
</ul>
</li>
</ul>
</li>
<li>Contrôle du format du conteneur du SIP (CHECK_CONTAINER)<ul>
<li><strong>Règle</strong> : Vitam vérifie le format du SIP via un outil d&#8217;identification de format</li>
<li><strong>Formats acceptés</strong> : .zip, .tar, .tar.gz, .tar.bz2</li>
<li><strong>Type</strong> : bloquant.</li>
<li><strong>Statuts</strong> :<ul>
<li>OK : le conteneur du SIP est au bon format (CHECK_CONTAINER.OK=Succès du contrôle de format du conteneur du SIP)</li>
<li>KO : le conteneur du SIP n&#8217;est pas au bon format (CHECK_CONTAINER.KO=Échec du contrôle de format du conteneur du SIP)</li>
<li>FATAL : la vérification du format du conteneur du SIP n&#8217;a pas pu être faite suite à une erreur système liée à l&#8217;outil d&#8217;identification des formats (CHECK_CONTAINER.FATAL=Erreur fatale lors du processus du contrôle de format du conteneur du SIP)</li>
</ul>
</li>
</ul>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="reception-dans-vitam-stp-upload-sip-etape-de-reception-du-sip-dans-vitam">
<h3>Réception dans vitam (STP_UPLOAD_SIP) : Etape de réception du SIP dans Vitam<a class="headerlink" href="#reception-dans-vitam-stp-upload-sip-etape-de-reception-du-sip-dans-vitam" title="Lien permanent vers ce titre">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><strong>Type</strong> : bloquant.</li>
<li><strong>Statuts</strong> :<ul>
<li>OK : le SIP a été reçu dans Vitam(STP_UPLOAD_SIP.OK=Succès du processus de téléchargement du SIP)</li>
<li>KO : le SIP n&#8217;a pas été reçu dans Vitam (STP_UPLOAD_SIP.KO=Échec du processus de téléchargement du SIP)</li>
<li>FATAL : la réception du SIP dans Vitam n&#8217;a pas été possible suite à une erreur système, e.g. serveur indisponible (STP_UPLOAD_SIP.FATAL=Erreur Fatale lors du processus de téléchargement du SIP)</li>
</ul>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="controle-du-sip-stp-ingest-control-sip">
<h3>Contrôle du SIP (STP_INGEST_CONTROL_SIP)<a class="headerlink" href="#controle-du-sip-stp-ingest-control-sip" title="Lien permanent vers ce titre">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>Vérification globale du SIP (CHECK_SEDA) : Vérification de la cohérence physique du SIP<ul>
<li><strong>Type de manifeste accepté</strong> : le manifeste est obligatoire dans le SIP, doit être nommé manifest.xml et doit être conforme au schéma xsd par défaut fourni avec le standard SEDA v. 2.0.</li>
<li><strong>Type</strong> : bloquant.</li>
<li><strong>Statuts</strong> :<ul>
<li>OK : le SIP est présent, nommé manifest.xml et conforme au schéma xsd par défaut fourni avec le standard SEDA v.2.0. (CHECK_SEDA.OK=Succès de la vérification globale du SIP)</li>
<li>KO : le manifeste est introuvable dans le SIP ou n&#8217;a pas d&#8217;extension .xml (CHECK_SEDA.NO_FILE.KO=Échec de la vérification globale du SIP : le manifeste est introuvable dans le SIP)</li>
<li>KO : le manifeste n&#8217;est pas au format XML (CHECK_SEDA.NOT_XML_FILE.KO=Échec de la vérification globale du SIP : le manifeste de versement au mauvais format)</li>
<li>KO : le manifeste ne respecte pas le schéma par défaut fourni avec le standard SEDA v.2.0 (CHECK_SEDA.NOT_XSD_VALID.KO=Échec de la vérification globale du SIP : manifeste non conforme au schéma SEDA 2.0)</li>
<li>FATAL : le manifeste n&#8217;a pas pu être contrôlé suite à une erreur système (CHECK_SEDA.FATAL=Erreur fatale lors de la vérification globale du SIP)</li>
</ul>
</li>
</ul>
</li>
<li>Vérification des usages des groupes d&#8217;objets (CHECK_MANIFEST_DATAOBJECT_VERSION)</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Règle</strong> : tous les objets décrits dans le manifeste du SIP doivent déclarer un usage conforme à la liste des usages acceptés dans la solution logicielle</li>
<li><strong>Types d&#8217;usages acceptés</strong>: original papier (PhysicalMaster), original numérique (BinaryMaster), diffusion (Dissemination), vignette (Thumbnail), contenu brut (TextContent)</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Type</strong> : bloquant.</li>
<li><strong>Statuts</strong> :<ul>
<li>OK : les objets contenus dans le SIP déclarent tous dans le manifeste un usage cohérent avec ceux acceptés (CHECK_MANIFEST_DATAOBJECT_VERSION.OK=Succès de la vérification des usages des groupes d&#8217;objets)</li>
<li>KO : un ou plusieurs objets contenus dans le SIP déclarent dans le manifeste un usage incohérent avec ceux acceptés (CHECK_MANIFEST_DATAOBJECT_VERSION.KO=Échec de la vérification des usages des groupes d&#8217;objets)</li>
<li>FATAL : les usages déclarés dans le manifeste pour les objets contenus dans le SIP n&#8217;ont pas pu être contrôlés suite à une erreur système (CHECK_MANIFEST_DATAOBJECT_VERSION.FATAL=Erreur fatale lors de la vérification des usages des groupes d&#8217;objets)</li>
</ul>
</li>
</ul>
</div></blockquote>
</div></blockquote>
<ul class="simple">
<li>Vérification du nombre d&#8217;objets (CHECK_MANIFEST_OBJECTNUMBER)<ul>
<li><strong>Règle</strong> : le nombre d&#8217;objets reçus dans la solution Vitam doit être strictement égal au nombre d&#8217;objets déclaré dans le manifeste du SIP</li>
<li><strong>Type</strong> : bloquant.</li>
<li><strong>Statuts</strong> :<ul>
<li>OK : le nombre d&#8217;objets reçus dans la solution logicielle est strictement égal au nombre d&#8217;objets déclaré dans le manifeste du SIP (CHECK_MANIFEST_OBJECTNUMBER.OK=Succès de la vérification du nombre d&#8217;objets)</li>
<li>KO : le nombre d&#8217;objets reçus dans la solution logicielle est inférieur ou supérieur au nombre d&#8217;objets déclaré dans le manifeste du SIP (CHECK_MANIFEST_OBJECTNUMBER.KO=Échec de la vérification du nombre d&#8217;objets)</li>
</ul>
</li>
</ul>
</li>
<li>Vérification de la cohérence du bordereau (CHECK_MANIFEST)<ul>
<li><strong>Règle</strong> : cette action permet la création des journaux de cycle de vie des unités archivistiques (ArchiveUnit) et des groupes d&#8217;objets (ObjectGroup), la vérification de la présence de cycles dans les arboresences des ArchiveUnits, la création de l&#8217;arbre d&#8217;ordre d&#8217;indexation et l&#8217;extraction des métadonnées contenues dans la balise ManagementMetadata du manifeste pour le calcul des règles de gestion.</li>
<li><strong>Type</strong> : bloquant.</li>
<li><strong>Statuts</strong> :<ul>
<li>OK : les journaux de cycles de vie des ArchiveUnits et des ObjectGroups ont été créés avec succès, aucune récursivité n&#8217;a été detectée dans l&#8217;arborescence des ArchiveUnits (CHECK_MANIFEST.OK=Contrôle du bordereau réalisé avec succès)</li>
<li>KO : Une récursivité a été détectée dans l&#8217;arborescence des ArchiveUnits (CHECK_MANIFEST.KO=Échec de contrôle du bordereau)</li>
<li>FATAL : la vérification de la cohérence du bordereau n&#8217;a pas pu être réalisée suite à une erreur système, e.g. les journaux de cycle de vie n&#8217;ont pas pu être créés (CHECK_MANIFEST.FATAL=Erreur fatale lors de contrôle du bordereau)</li>
</ul>
</li>
</ul>
</li>
<li>Vérification de la cohérence entre objets, groupes d&#8217;objets et unités archivistiques (CHECK_CONSISTENCY)<ul>
<li><strong>Règle</strong> : Chaque objet ou groupe d&#8217;objets doit être référencé par un ArchiveUnit, les objets sans groupe d&#8217;objets mais référencés par un ArchiveUnit sont rattachés chacun à un groupe d&#8217;objets.</li>
<li><strong>Type</strong> : bloquant.</li>
<li><strong>Statuts</strong> :<ul>
<li>OK : Aucun objet ou groupe d&#8217;objet n&#8217;est orphelin (i.e. non référencé par une ArchiveUnit) et tous les objets sont rattachés à un groupe d&#8217;objets (CHECK_CONSISTENCY.OK=Succès de la vérification de la cohérence entre objets, groupes d&#8217;objets et unités archivistiques)</li>
<li>KO : Au moins un objet ou groupe d&#8217;objet est orphelin (i.e. non référencé par une ArchiveUnit) (CHECK_CONSISTENCY.KO=Échec de la vérification de la cohérence entre objets, groupes d&#8217;objets et unités archivistiques)</li>
<li>FATAL : la vérification de la cohérence entre objets, groupes d&#8217;objets et unités archivistiques n&#8217;a pas pu être réalisée suite à une erreur système (CHECK_CONSISTENCY.FATAL=Erreur fatale lors de la vérification de la cohérence entre objets, groupes d&#8217;objets et unités archivistiques)</li>
</ul>
</li>
</ul>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="controle-et-traitements-des-objets-stp-og-check-and-transforme">
<h3>Contrôle et traitements des objets (STP_OG_CHECK_AND_TRANSFORME)<a class="headerlink" href="#controle-et-traitements-des-objets-stp-og-check-and-transforme" title="Lien permanent vers ce titre">¶</a></h3>
<blockquote>
<div><ul>
<li><p class="first">Vérification de l&#8217;intégrité des objets (CHECK_DIGEST)</p>
<ul class="simple">
<li><strong>Règle</strong> : vérification de la cohérence entre l&#8217;empreinte de l&#8217;objet calculée par la solution logicielle Vitam et celle déclarée dans le manifeste. Si l&#8217;empreinte déclarée dans le manifeste n&#8217;a pas été calculée avec l&#8217;algorithme SHA-512, alors le système recalcule une empreinte avec cette algorithme. C&#8217;est celle-ci qui sera enregistrée dans le système.</li>
<li><strong>Algorithmes autorisés en entrée</strong> : MD5, SHA-1, SHA-256, SHA-512</li>
<li><strong>Type</strong> : bloquant.</li>
<li><strong>Statuts</strong> :<ul>
<li>OK : tous les objets reçus sont identiques aux objets attendus. Tous les objets disposent désormais d&#8217;une empreinte calculée avec l&#8217;algorithme SHA-512 (CHECK_DIGEST.OK=Succès de la vérification de lintégrité des objets)</li>
<li>KO : au moins un objet reçu n&#8217;est pas identique aux objets attendus (CHECK_DIGEST.KO=Échec de la vérification de lintégrité des objets)</li>
<li>FATAL : la vérification de l&#8217;intégrité des objets n&#8217;a pas pu être réalisée suite à une erreur système, e.g. algorithme inconnu (CHECK_DIGEST.FATAL=Erreur fatale lors de la vérification des objets)</li>
<li>WARNING : tous les objets reçus sont identiques aux objets attendus, mais au moins un objet a une empreinte déclarée dans le manifeste non calculée par l&#8217;algorithme SHA-512 (CHECK_DIGEST.WARNING=Avertissement lors de la vérification de lempreinte)</li>
</ul>
</li>
</ul>
</li>
<li><p class="first">Identification des formats (OG_OBJECTS_FORMAT_CHECK)</p>
<ul>
<li><p class="first"><strong>Règle</strong> :  Vitam identifie les formats de chaque objet présent dans le SIP, afin de garantir une information homogène et objective. Cette action met en œuvre un outil d&#8217;identification prenant l&#8217;objet en entrée et fournissant des informations de format en sortie. Ces informations sont comparées les formats identifiés dans le référentiel des formats interne au système et avec celles déclarées dans le manifeste. En cas d&#8217;incohérence entre la déclaration de l&#8217;application versante et le format identifié par le système, le SIP sera tout de même accepté, générant un warning. Vitam se servira alors des informations qu&#8217;il a lui même identifiées et non celles de l&#8217;application versante.</p>
</li>
<li><p class="first"><strong>Type</strong> : bloquant.</p>
</li>
<li><p class="first"><strong>Statuts</strong> :</p>
<ul>
<li><p class="first">OK : l&#8217;identification s&#8217;est bien passée, les formats identifiés sont référencés dans le référentiel interne et les informations sont cohérentes avec celles déclarées dans le manifeste (OG_OBJECTS_FORMAT_CHECK.OK=Succès de la vérification des formats)</p>
</li>
<li><p class="first">KO : le format identifié n&#8217;est pas référencé dans le référentiel interne, ou aucun format n&#8217;a été trouvé pour un objet (OG_OBJECTS_FORMAT_CHECK.KO=Échec de la vérification des formats)</p>
</li>
<li><p class="first">FATAL : l&#8217;identification des formats n&#8217;a pas été réalisée suite à une erreur système (OG_OBJECTS_FORMAT_CHECK.FATAL=Erreur fatale lors de la vérification des formats)</p>
<blockquote>
<div><ul class="simple">
<li>WARNING : l&#8217;identification s&#8217;est bien passée, les formats identifiés sont référencés dans le référentiel interne mais les informations ne sont pas cohérentes avec celles déclarées dans le manifeste (OG_OBJECTS_FORMAT_CHECK.WARNING=Avertissement lors de la vérification des formats)</li>
</ul>
</div></blockquote>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="controle-et-traitements-des-unites-archivistiques-stp-og-check-and-transforme">
<h3>Contrôle et traitements des unités archivistiques (STP_OG_CHECK_AND_TRANSFORME)<a class="headerlink" href="#controle-et-traitements-des-unites-archivistiques-stp-og-check-and-transforme" title="Lien permanent vers ce titre">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>Application des règles de gestion et calcul des dates d&#8217;échéances (UNITS_RULES_COMPUTE)<ul>
<li><strong>Règle</strong> :  calcul des dates d&#8217;échéance des ArchiveUnits à la racine des DescriptiveMetadata du manifeste si elles existent dans le manifeste (Si elles n&#8217;existent pas, elles sont récupérées depuis la balise ManagementMetadata du manifeste). Calcul des dates d&#8217;échéance des ArchiveUnits filles si elles existent dans le manifeste. Le référentiel utilisé pour ce calcul est le référentiel des règles de gestion.</li>
<li><strong>Type</strong> : bloquant.</li>
<li><strong>Statuts</strong> :<ul>
<li>OK : les règles de gestion sont référencées dans le référentiel interne et ont été appliquées avec succès (UNITS_RULES_COMPUTE.OK=Succès du calcul des dates d&#8217;échéance)</li>
<li>KO : au moins une règle de gestion déclarée dans le manifeste n&#8217;est pas référencée dans le référentiel interne (UNITS_RULES_COMPUTE.KO=Échec du calcul des dates d&#8217;échéance)</li>
</ul>
</li>
</ul>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="preparation-de-la-prise-en-charge-stp-storage-availability-check">
<h3>Préparation de la prise en charge (STP_STORAGE_AVAILABILITY_CHECK)<a class="headerlink" href="#preparation-de-la-prise-en-charge-stp-storage-availability-check" title="Lien permanent vers ce titre">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>Vérification de la disponibilité de l&#8217;offre de stockage (STORAGE_AVAILABILITY_CHECK)<ul>
<li><strong>Type</strong> : bloquant.</li>
<li><strong>Statuts</strong> :<ul>
<li>OK : l&#8217;offre de stockage est accessible et dispose d&#8217;assez d&#8217;espace pour stocker le contenu du SIP (STORAGE_AVAILABILITY_CHECK.OK=Succès de la vérification de la disponibilité de l&#8217;offre de stockage)</li>
<li>KO : l&#8217;offre de stockage n&#8217;est pas disponible ou ne dispose pas d&#8217;assez d&#8217;espace pour stocker le contenu du SIP (STORAGE_AVAILABILITY_CHECK.KO=Échec de la vérification de la disponibilité de l&#8217;offre de stockage)</li>
<li>FATAL : la vérification de la disponibilité de l&#8217;offre de stockage n&#8217;a pas pu être réalisée suite à une erreur système (STORAGE_AVAILABILITY_CHECK.FATAL=Erreur fatale lors de la vérification de la disponibilité de l&#8217;offre de stockage)</li>
</ul>
</li>
</ul>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="rangement-des-objets-stp-og-storing">
<h3>Rangement des objets (STP_OG_STORING)<a class="headerlink" href="#rangement-des-objets-stp-og-storing" title="Lien permanent vers ce titre">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>Enregistrement des objets sur l&#8217;offre de stockage (OG_STORAGE)<ul>
<li><strong>Type</strong> : Bloquant.</li>
<li><strong>Statuts</strong> :<ul>
<li>OK : tous les objets contenus dans le SIP ont été stockés dans l&#8217;offre de stockage (OG_STORAGE.OK=Succès du rangement des objets et groupes d&#8217;objets)</li>
<li>KO : au moins un des objets contenus dans le SIP n&#8217;a pas pu être stocké dans l&#8217;offre de stockage (OG_STORAGE.KO=Échec du rangement des objets et groupes d&#8217;objets)</li>
<li>FATAL : l&#8217;enregistrement des objets sur l&#8217;offre de stockage n&#8217;a pas pu être réalisé suite à une erreur système (OG_STORAGE.FATAL=Erreur fatale lors du rangement des objets et groupes d&#8217;objets)</li>
</ul>
</li>
</ul>
</li>
<li>Indexation des métadonnées des groupes d&#8217;objets (OG_METADATA_INDEXATION)<ul>
<li><strong>Règle</strong> : les métadonnées liées aux groupes d&#8217;objets sont indexées, e.g. la taille des objets, l&#8217;empreinte des objets, les métadonnées liées aux formats (Type MIME, PUID, etc.)</li>
<li><strong>Type</strong> : bloquant.</li>
<li><strong>Statuts</strong> :<ul>
<li>OK : les métadonnées des groupes d&#8217;objets ont été indexées avec succès (OG_METADATA_INDEXATION.OK=Succès de l&#8217;indexation des métadonnées des objets et groupes d&#8217;objets)</li>
<li>KO : les métadonnées des groupes d&#8217;objets n&#8217;ont pas pu être indexées (OG_METADATA_INDEXATION.KO=Échec de l&#8217;indexation des métadonnées des objets et groupes d&#8217;objets)</li>
<li>FATAL : l&#8217;indexation des métadonnées des groupes d&#8217;objets n&#8217;a pas pu être réalisée suite à une erreur système (OG_METADATA_INDEXATION.FATAL=Erreur fatale lors de l&#8217;indexation des métadonnées des objets et groupes d&#8217;objets)</li>
</ul>
</li>
</ul>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="rangement-des-unites-archivistiques-stp-unit-storing">
<h3>Rangement des unites archivistiques (STP_UNIT_STORING)<a class="headerlink" href="#rangement-des-unites-archivistiques-stp-unit-storing" title="Lien permanent vers ce titre">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>Indexation des métadonnées des unités archivistiques (UNIT_METADATA_INDEXATION)<ul>
<li><strong>Type</strong> : bloquant.</li>
<li><strong>Statuts</strong> :<ul>
<li>OK : les métadonnées des unités archivistiques ont été indexées avec succès (UNIT_METADATA_INDEXATION.OK=Succès de l&#8217;indexation des métadonnées des unités archivistiques)</li>
<li>KO : les métadonnées des unités archivistiques n&#8217;ont pas pu être indexées (UNIT_METADATA_INDEXATION.KO=Échec de l&#8217;indexation des métadonnées des unités archivistiques)</li>
<li>FATAL : l&#8217;indexation des métadonnées des unités archivistiques n&#8217;a pas pu être réalisée suite à une erreur système (UNIT_METADATA_INDEXATION.FATAL=Erreur fatale lors de l&#8217;indexation des métadonnées des unités archivistiques)</li>
</ul>
</li>
</ul>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="registre-des-fonds-stp-accession-registration">
<h3>Registre des fonds (STP_ACCESSION_REGISTRATION)<a class="headerlink" href="#registre-des-fonds-stp-accession-registration" title="Lien permanent vers ce titre">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>Alimentation du registre des fonds (ACCESSION_REGISTRATION)<ul>
<li><strong>Règle</strong> : le registre des fonds est alimenté par service producteur.</li>
<li><strong>Type</strong> : bloquant.</li>
<li><strong>Statuts</strong> :<ul>
<li>OK : le registre des fonds est correctement alimenté (ACCESSION_REGISTRATION.OK=Succès de l&#8217;alimentation du registre des fonds)</li>
<li>KO : le registre des fonds n&#8217;a pas pu être alimenté (ACCESSION_REGISTRATION.KO=Échec de l&#8217;alimentation du registre des fonds)</li>
<li>FATAL : l&#8217;alimentation du registre des fonds n&#8217;a pas pu être réalisée suite à une erreur système (ACCESSION_REGISTRATION.FATAL=Erreur fatale lors de l&#8217;alimentation du registre des fonds)</li>
</ul>
</li>
</ul>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="finalisation-de-l-entree-stp-ingest-finalisation">
<h3>Finalisation de l&#8217;entrée (STP_INGEST_FINALISATION)<a class="headerlink" href="#finalisation-de-l-entree-stp-ingest-finalisation" title="Lien permanent vers ce titre">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>Notification de la fin de l&#8217;opération d&#8217;entrée (ATR_NOTIFICATION)<ul>
<li><strong>Règle</strong> : une fois toutes les étapes passées avec succès ou lorsqu&#8217;une étape est en échec, cette étape est lancée. Elle gènere un message de réponse (ArchiveTransferReply ou ATR), le stocke dans l&#8217;offre de stockage et l&#8217;envoie au service versant.</li>
<li><strong>Type</strong> : bloquant.</li>
<li><strong>Statuts</strong> :<ul>
<li>OK : Le message de réponse a été correctement généré, stocké dans l&#8217;offre de stockage et envoyé au service versant (ATR_NOTIFICATION.OK=Succès de la notification à l&#8217;opérateur de versement)</li>
<li>KO : Le message de réponse n&#8217;a pas été correctement généré, stocké dans l&#8217;offre de stockage ou reçu par le service versant (ATR_NOTIFICATION.KO=Échec de la notification à l&#8217;opérateur de versement)</li>
<li>FATAL : la notification de la fin de l&#8217;opération n&#8217;a pas pu être réalisée suite à une erreur système (ATR_NOTIFICATION.FATAL=Erreur fatale lors de la notification à l&#8217;opérateur de versement)</li>
</ul>
</li>
</ul>
</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="structure-du-workflow-beta">
<h2>Structure du Workflow (Bêta)<a class="headerlink" href="#structure-du-workflow-beta" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le workflow actuel mis en place dans la solution Vitam est défini dans l&#8217;unique fichier &#8220;DefaultIngestWorkflow.json&#8221;.
Il décrit le processus d&#8217;entrée (hors Ingest externe) pour entrer un SIP, indexer les métadonnées et stocker les objets contenues dans le SIP.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;DefaultIngestWorkflow&quot;</span><span class="p">,</span>
  <span class="nt">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;Default Ingest Workflow V6&quot;</span><span class="p">,</span>
  <span class="nt">&quot;steps&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;workerGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;DefaultWorker&quot;</span><span class="p">,</span>
      <span class="nt">&quot;stepName&quot;</span><span class="p">:</span> <span class="s2">&quot;STP_INGEST_CONTROL_SIP&quot;</span><span class="p">,</span>
      <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span><span class="p">,</span>
      <span class="nt">&quot;distribution&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;REF&quot;</span><span class="p">,</span>
        <span class="nt">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;SIP/manifest.xml&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;actionKey&quot;</span><span class="p">:</span> <span class="s2">&quot;CHECK_SEDA&quot;</span><span class="p">,</span>
            <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;actionKey&quot;</span><span class="p">:</span> <span class="s2">&quot;CHECK_MANIFEST_DATAOBJECT_VERSION&quot;</span><span class="p">,</span>
            <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;actionKey&quot;</span><span class="p">:</span> <span class="s2">&quot;CHECK_MANIFEST_OBJECTNUMBER&quot;</span><span class="p">,</span>
            <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;NOBLOCKING&quot;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;actionKey&quot;</span><span class="p">:</span> <span class="s2">&quot;CHECK_MANIFEST&quot;</span><span class="p">,</span>
            <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span><span class="p">,</span>
            <span class="nt">&quot;out&quot;</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;unitsLevel.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:UnitsLevel/ingestLevelStack.json&quot;</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mapsBDOtoOG.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:Maps/BDO_TO_OBJECT_GROUP_ID_MAP.json&quot;</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mapsBDO.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:Maps/BINARY_DATA_OBJECT_ID_TO_GUID_MAP.json&quot;</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mapsObjectGroup.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:Maps/OBJECT_GROUP_ID_TO_GUID_MAP.json&quot;</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mapsObjectGroup.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:Maps/OG_TO_ARCHIVE_ID_MAP.json&quot;</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mapsBDOtoVersionBDO.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:Maps/BDO_TO_VERSION_BDO_MAP.json&quot;</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mapsUnits.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:Maps/ARCHIVE_ID_TO_GUID_MAP.json&quot;</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;globalSEDAParameters.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:ATR/globalSEDAParameters.json&quot;</span>
              <span class="p">}</span>
            <span class="p">]</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;actionKey&quot;</span><span class="p">:</span> <span class="s2">&quot;CHECK_CONSISTENCY&quot;</span><span class="p">,</span>
            <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;NOBLOCKING&quot;</span><span class="p">,</span>
            <span class="nt">&quot;in&quot;</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mapsBDOtoOG.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:Maps/OG_TO_ARCHIVE_ID_MAP.json&quot;</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mapsBDOtoOG.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:Maps/OBJECT_GROUP_ID_TO_GUID_MAP.json&quot;</span>
              <span class="p">}</span>
            <span class="p">]</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;workerGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;DefaultWorker&quot;</span><span class="p">,</span>
      <span class="nt">&quot;stepName&quot;</span><span class="p">:</span> <span class="s2">&quot;STP_OG_CHECK_AND_TRANSFORME&quot;</span><span class="p">,</span>
      <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span><span class="p">,</span>
      <span class="nt">&quot;distribution&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;LIST&quot;</span><span class="p">,</span>
        <span class="nt">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;ObjectGroup&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
          <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;actionKey&quot;</span><span class="p">:</span> <span class="s2">&quot;CHECK_DIGEST&quot;</span><span class="p">,</span>
            <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span><span class="p">,</span>
            <span class="nt">&quot;in&quot;</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;algo&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;VALUE:SHA-512&quot;</span>
              <span class="p">}</span>
            <span class="p">]</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;actionKey&quot;</span><span class="p">:</span> <span class="s2">&quot;OG_OBJECTS_FORMAT_CHECK&quot;</span><span class="p">,</span>
            <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;workerGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;DefaultWorker&quot;</span><span class="p">,</span>
      <span class="nt">&quot;stepName&quot;</span><span class="p">:</span> <span class="s2">&quot;STP_UNIT_CHECK_AND_PROCESS&quot;</span><span class="p">,</span>
      <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span><span class="p">,</span>
      <span class="nt">&quot;distribution&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;LIST&quot;</span><span class="p">,</span>
        <span class="nt">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;Units&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;actionKey&quot;</span><span class="p">:</span> <span class="s2">&quot;UNITS_RULES_COMPUTE&quot;</span><span class="p">,</span>
            <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;workerGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;DefaultWorker&quot;</span><span class="p">,</span>
      <span class="nt">&quot;stepName&quot;</span><span class="p">:</span> <span class="s2">&quot;STP_STORAGE_AVAILABILITY_CHECK&quot;</span><span class="p">,</span>
      <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span><span class="p">,</span>
      <span class="nt">&quot;distribution&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;REF&quot;</span><span class="p">,</span>
        <span class="nt">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;SIP/manifest.xml&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;actionKey&quot;</span><span class="p">:</span> <span class="s2">&quot;STORAGE_AVAILABILITY_CHECK&quot;</span><span class="p">,</span>
            <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;workerGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;DefaultWorker&quot;</span><span class="p">,</span>
      <span class="nt">&quot;stepName&quot;</span><span class="p">:</span> <span class="s2">&quot;STP_OG_STORING&quot;</span><span class="p">,</span>
      <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span><span class="p">,</span>
      <span class="nt">&quot;distribution&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;LIST&quot;</span><span class="p">,</span>
        <span class="nt">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;ObjectGroup&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;actionKey&quot;</span><span class="p">:</span> <span class="s2">&quot;OG_STORAGE&quot;</span><span class="p">,</span>
            <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;actionKey&quot;</span><span class="p">:</span> <span class="s2">&quot;OG_METADATA_INDEXATION&quot;</span><span class="p">,</span>
            <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;workerGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;DefaultWorker&quot;</span><span class="p">,</span>
      <span class="nt">&quot;stepName&quot;</span><span class="p">:</span> <span class="s2">&quot;STP_UNIT_STORING&quot;</span><span class="p">,</span>
      <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span><span class="p">,</span>
      <span class="nt">&quot;distribution&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;LIST&quot;</span><span class="p">,</span>
        <span class="nt">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;Units&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;actionKey&quot;</span><span class="p">:</span> <span class="s2">&quot;UNIT_METADATA_INDEXATION&quot;</span><span class="p">,</span>
            <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;workerGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;DefaultWorker&quot;</span><span class="p">,</span>
      <span class="nt">&quot;stepName&quot;</span><span class="p">:</span> <span class="s2">&quot;STP_ACCESSION_REGISTRATION&quot;</span><span class="p">,</span>
      <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span><span class="p">,</span>
      <span class="nt">&quot;distribution&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;REF&quot;</span><span class="p">,</span>
        <span class="nt">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;SIP/manifest.xml&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;actionKey&quot;</span><span class="p">:</span> <span class="s2">&quot;ACCESSION_REGISTRATION&quot;</span><span class="p">,</span>
            <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span><span class="p">,</span>
            <span class="nt">&quot;in&quot;</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mapsUnits.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:Maps/ARCHIVE_ID_TO_GUID_MAP.json&quot;</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mapsBDO.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:Maps/OBJECT_GROUP_ID_TO_GUID_MAP.json&quot;</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mapsBDO.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:Maps/BDO_TO_BDO_INFO_MAP.json&quot;</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;globalSEDAParameters.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:ATR/globalSEDAParameters.json&quot;</span>
              <span class="p">}</span>
            <span class="p">]</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;workerGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;DefaultWorker&quot;</span><span class="p">,</span>
      <span class="nt">&quot;stepName&quot;</span><span class="p">:</span> <span class="s2">&quot;STP_INGEST_FINALISATION&quot;</span><span class="p">,</span>
      <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;FINALLY&quot;</span><span class="p">,</span>
      <span class="nt">&quot;distribution&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;REF&quot;</span><span class="p">,</span>
        <span class="nt">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;SIP/manifest.xml&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;actionKey&quot;</span><span class="p">:</span> <span class="s2">&quot;ATR_NOTIFICATION&quot;</span><span class="p">,</span>
            <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span><span class="p">,</span>
            <span class="nt">&quot;in&quot;</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mapsUnits.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:Maps/ARCHIVE_ID_TO_GUID_MAP.json&quot;</span><span class="p">,</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mapsBDO.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:Maps/BINARY_DATA_OBJECT_ID_TO_GUID_MAP.json&quot;</span><span class="p">,</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mapsBDOtoOG.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:Maps/BDO_TO_OBJECT_GROUP_ID_MAP.json&quot;</span><span class="p">,</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mapsBDOtoVersionBDO.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:Maps/BDO_TO_VERSION_BDO_MAP.json&quot;</span><span class="p">,</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;globalSEDAParameters.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:ATR/globalSEDAParameters.json&quot;</span><span class="p">,</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span>
              <span class="p">}</span>
            <span class="p">],</span>
            <span class="nt">&quot;out&quot;</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;atr.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:ATR/responseReply.xml&quot;</span>
              <span class="p">}</span>
            <span class="p">]</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>D&#8217;une façon synthétique, le workflow est décrit de cette façon :</p>
<div class="figure align-center" id="id1">
<a class="reference internal image-reference" href="_images/Workflow_ingest.jpg"><img alt="_images/Workflow_ingest.jpg" src="_images/Workflow_ingest.jpg" style="height: 22cm;" /></a>
<p class="caption"><span class="caption-text">Diagramme d&#8217;état / transitions du workflow d&#8217;ingest</span></p>
</div>
<ul class="simple">
<li><strong>Step 1</strong> - STP_INGEST_CONTROL_SIP : Check SIP  / distribution sur REF GUID/SIP/manifest.xml<ul>
<li>CHECK_SEDA (CheckSedaActionHandler.java) :<ul>
<li>Test de l&#8217;existence du manifest.xml,</li>
<li>Validation XSD du manifeste,</li>
<li>Validation de la structure du manifeste par rapport au schema par défaut fourni avec le standard SEDA v. 2.0.</li>
</ul>
</li>
<li>CHECK_MANIFEST_DATAOBJECT_VERSION (CheckVersionActionHandler.java) :<ul>
<li>Vérification des usages des objets.</li>
</ul>
</li>
<li>CHECK_MANIFEST_OBJECTNUMBER (CheckObjectsNumberActionHandler.java) :<ul>
<li>Comptage des objets (BinaryDataObject) dans le manifest.xml en s&#8217;assurant de l&#8217;absence de doublon, que le nombre d&#8217;objets reçus est strictement égal au nombre d&#8217;objets attendus</li>
<li>Création de la liste des objets dans le workspace GUID/SIP/content/,</li>
<li>Comparaison du nombre et des URI des objets contenus dans le SIP avec ceux définis dans le manifeste.</li>
</ul>
</li>
<li>CHECK_MANIFEST (ExtractSedaActionHandler.java) :<ul>
<li>Extraction des ArchiveUnits, des BinaryDataObject,</li>
<li>Création des journaux de cycle de vie des ArchiveUnits et des ObjectGroup,</li>
<li>Vérification de la présence de cycles dans les arboresences des Units,</li>
<li>Création de l&#8217;arbre d&#8217;ordre d&#8217;indexation,</li>
<li>Extraction des métadonnées contenues dans le bloc ManagementMetadata du manifeste pour le calcul des règles de gestion.</li>
</ul>
</li>
<li>CHECK_CONSISTENCY (CheckObjectUnitConsistencyActionHandler.java) :<ul>
<li>Extraction des BinaryDataObject du manifest.xml et création de la MAP (table de concordance) des Id BinaryDataObject / Génération GUID (de ces mêmes BinaryDataObject),</li>
<li>Extraction des ArchiveUnit du manifest.xml et création de la MAP des id ArchiveUnit / Génération GUID (de ces mêmes ArchiveUnit),</li>
<li>Contrôle des références dans les ArchiveUnit des Id BinaryDataObject,</li>
<li>Vérification de la cohérence objet/unit,</li>
<li>Stockage dans le Workspace des BinaryDataObject et des ArchiveUnit.</li>
</ul>
</li>
</ul>
</li>
<li><strong>Step 2</strong> - STP_OG_CHECK_AND_TRANSFORME : Contrôle et traitements des objets / distribution sur LIST GUID/BinaryDataObject<ul>
<li>CHECK_DIGEST (CheckConformityActionHandler.java) :<ul>
<li>Contrôle de l&#8217;objet binaire correspondant : la taille et l&#8217;empreinte du BinaryDataObject.</li>
</ul>
</li>
<li>Calcul d&#8217;une empreinte avec l&#8217;algorithme SHA-512 si l&#8217;empreinte du manifeste n&#8217;a pas été calculée avec cet algorithme</li>
<li>OG_OBJECTS_FORMAT_CHECK (FormatIdentificationActionHandler.java):<ul>
<li>Identification du format des BinaryDataObject,</li>
</ul>
</li>
<li>Vérification de l&#8217;existence du format identifié dans le référentiel des formats<ul>
<li>Consolidation de l&#8217;information du format dans l&#8217;ObjectGroup correspondant si nécessaire.</li>
</ul>
</li>
</ul>
</li>
<li><strong>Step 3</strong> - STP_UNIT_CHECK_AND_PROCESS : Contrôle et traitements des units / distribution sur LIST GUID<ul>
<li>UNITS_RULES_COMPUTE (UnitsRulesComputeHandler.java) :<ul>
<li>vérification de l&#8217;existence de la règle dans le référentiel des règles de gestion</li>
</ul>
</li>
<li>calcul des échéances associées à chaque ArchiveUnit.</li>
</ul>
</li>
<li><strong>Step 4</strong> - STP_STORAGE_AVAILABILITY_CHECK : Préparation de la prise en charge / distribution REF GUID/SIP/manifest.xml<ul>
<li>STORAGE_AVAILABILITY_CHECK (CheckStorageAvailabilityActionHandler.java) :<ul>
<li>Calcul de la taille totale des objets à stocker,</li>
<li>Contrôle de la taille totale des objets à stocker par rapport à la capacité des offres de stockage pour une stratégie et un tenant donnés.</li>
</ul>
</li>
</ul>
</li>
<li><strong>Step 5</strong> - STP_OG_STORING : Rangement des objets<ul>
<li>OG_STORAGE (StoreObjectGroupActionHandler.java) :<ul>
<li>Écriture des objets sur l’offre de stockage des BinaryDataObject des ObjectGroup.</li>
</ul>
</li>
<li>OG_METADATA_INDEXATION (IndexObjectGroupActionHandler.java) :<ul>
<li>Enregistrement en base des métadonnées des ObjectGroup.</li>
</ul>
</li>
</ul>
</li>
<li><strong>Step 6</strong> - STP_UNIT_STORING : Rangement des unités archivistique / distribution sur LIST GUID/Units<ul>
<li>UNIT_METADATA_INDEXATION (IndexUnitActionHandler.java) :<ul>
<li>Transformation sous la forme Json des ArchiveUnits et intégration du GUID Unit et du GUID ObjectGroup,</li>
<li>Enregistrement en base des métadonnées des ArchiveUnits.</li>
</ul>
</li>
</ul>
</li>
<li><strong>Step 7</strong> - STP_ACCESSION_REGISTRATION : Alimentation du registre des fonds<ul>
<li>ACCESSION_REGISTRATION (AccessionRegisterActionHandler.java) :<ul>
<li>Création/Mise à jour et enregistrement des collections AccessionRegisterDetail et AccessionRegisterSummary concernant les archives prises en compte, par service producteur.</li>
</ul>
</li>
</ul>
</li>
<li><strong>Step 8 et finale</strong> - STP_INGEST_FINALISATION : Finalisation de l&#8217;entrée. Cette étape est obligatoire et sera toujours exécutée, en dernière position.<ul>
<li>ATR_NOTIFICATION (TransferNotificationActionHandler.java) :<ul>
<li>Génération de l&#8217;ArchiveTransferReply.xml (peu importe le statut du processus d&#8217;entrée, l&#8217;ArchiveTransferReply est obligatoirement généré),</li>
<li>Stockage de l&#8217;ArchiveTransferReply dans les offres de stockage.</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="structure-du-fichier-properties-du-worflow">
<h2>Structure du fichier Properties du Worflow<a class="headerlink" href="#structure-du-fichier-properties-du-worflow" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le fichier Properties permet de définir la structure du Workflow pour les étapes et actions réalisées dans le module d&#8217;Ingest Interne, en excluant les étapes et actions réalisées dans le module d&#8217;Ingest externe.</p>
<p>La structure du fichier est la suivante :</p>
<div class="figure align-center" id="id2">
<img alt="_images/workflow.jpg" src="_images/workflow.jpg" />
<p class="caption"><span class="caption-text">Structure du fichier de définition du workflow</span></p>
</div>
<p>Un Workflow est défini en JSON avec la structure suivante :</p>
<ul>
<li><p class="first">un bloc en-tête contenant :</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">ID</span></code> : identifiant unique du workflow,</li>
<li><code class="docutils literal"><span class="pre">Comment</span></code> : description du workflow ou toutes autres informations utiles concernant le workflow</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">une liste d&#8217;étapes dont la structure est la suivante :</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">workerGroupId</span></code> : identifiant de famille de Workers,</li>
<li><code class="docutils literal"><span class="pre">stepName</span></code> : nom de l&#8217;étape, servant de clé pour identifier l&#8217;étape,</li>
<li><code class="docutils literal"><span class="pre">Behavior</span></code> : modèle d&#8217;exécution pouvant avoir les types suivants :<ul>
<li>BLOCKING : le traitement est bloqué en cas d&#8217;erreur, il est nécessaire de recommencer le workflow,</li>
<li>NOBLOCKING : le traitement peut continuer malgrée les erreurs ou avertissements,</li>
<li>FINALLY : le traitement correspondant est toujours exécuté</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">Distribution</span></code> : modèle de distribution, décrit comme suit :<ul>
<li><code class="docutils literal"><span class="pre">Kind</span></code> : un type pouvant être REF (i.e. élément unique) ou LIST (i.e. liste d&#8217;éléments)</li>
<li><code class="docutils literal"><span class="pre">Element</span></code> : l&#8217;élément de distribution indiquant l&#8217;élément unique sous forme d&#8217;URI (REF) ou la liste d&#8217;éléments en pointant vers un dossier (LIST).</li>
</ul>
</li>
<li>une liste d&#8217;Actions :<ul>
<li><code class="docutils literal"><span class="pre">ActionKey</span></code> : nom de l&#8217;action</li>
<li><code class="docutils literal"><span class="pre">Behavior</span></code> : modèle d&#8217;exécution pouvant avoir les types suivants :
- BLOCKING : l&#8217;action est bloquante en cas d&#8217;erreur. Les actions suivantes (de la meme étape) ne seront pas éxécutées.
- NOBLOCKING : l&#8217;action peut continuer malgrée les erreurs ou avertissements.</li>
<li><code class="docutils literal"><span class="pre">In</span></code> : liste de paramètres d&#8217;entrées :
- <code class="docutils literal"><span class="pre">Name</span></code> : nom utilisé pour référencer cet élément entre différents handlers d&#8217;une même étape,<ul>
<li><code class="docutils literal"><span class="pre">URI</span></code> : cible comportant un schema (WORKSPACE, MEMORY, VALUE) et un path où chaque handler peut accéder à ces valeurs via le handlerIO :
- WORKSPACE : path indique le chemin relatif sur le workspace (implicitement un File),
- MEMORY : path indique le nom de la clef de valeur (implicitement un objet mémoire déjà alloué par un Handler précédent),
- VALUE : path indique la valeur statique en entrée (implicitement une valeur String).</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">Out</span></code> : liste de paramètres de sorties :
- <code class="docutils literal"><span class="pre">Name</span></code> : nom utilisé pour référencer cet élément entre différents handlers d&#8217;une même étape,<ul>
<li><code class="docutils literal"><span class="pre">URI</span></code> : cible comportant un schema (WORKSPACE, MEMORY) et un path où chaque handler peut stocker les valeurs finales via le handlerIO :
- WORKSPACE : path indique le chemin relatif sur le workspace (implicitement un File local),
- MEMORY : path indique le nom de la clef de valeur (implicitement un objet mémoire).</li>
</ul>
</li>
</ul>
</li>
</ul>
</div></blockquote>
</li>
</ul>
<p>Le code ci-dessous, à titre informatif, donne un exemple partiel de workflow, avec les notions étapes et actions.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;DefaultIngestWorkflow&quot;</span><span class="p">,</span>
  <span class="nt">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;Default Ingest Workflow V6&quot;</span><span class="p">,</span>
  <span class="nt">&quot;steps&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;workerGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;DefaultWorker&quot;</span><span class="p">,</span>
      <span class="nt">&quot;stepName&quot;</span><span class="p">:</span> <span class="s2">&quot;STP_INGEST_CONTROL_SIP&quot;</span><span class="p">,</span>
      <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span><span class="p">,</span>
      <span class="nt">&quot;distribution&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;REF&quot;</span><span class="p">,</span>
        <span class="nt">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;SIP/manifest.xml&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;actionKey&quot;</span><span class="p">:</span> <span class="s2">&quot;CHECK_SEDA&quot;</span><span class="p">,</span>
            <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;actionKey&quot;</span><span class="p">:</span> <span class="s2">&quot;CHECK_MANIFEST&quot;</span><span class="p">,</span>
            <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;BLOCKING&quot;</span><span class="p">,</span>
            <span class="nt">&quot;out&quot;</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mapsBDOtoOG.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:Maps/OG_TO_ARCHIVE_ID_MAP.json&quot;</span>
              <span class="p">}</span>
            <span class="p">]</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;actionKey&quot;</span><span class="p">:</span> <span class="s2">&quot;CHECK_CONSISTENCY&quot;</span><span class="p">,</span>
            <span class="nt">&quot;behavior&quot;</span><span class="p">:</span> <span class="s2">&quot;NOBLOCKING&quot;</span><span class="p">,</span>
            <span class="nt">&quot;in&quot;</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mapsBDOtoOG.file&quot;</span><span class="p">,</span>
                <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;WORKSPACE:Maps/OG_TO_ARCHIVE_ID_MAP.json&quot;</span>
              <span class="p">}</span>
            <span class="p">]</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="index.html" class="btn btn-neutral" title="VITAM - Modèle de workflow" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Ce document est distribué sous les termes de la licence Creative Commons Attribution - Partage dans les Mêmes Conditions 3.0 France (CC BY-SA 3.0 FR).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.11.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>