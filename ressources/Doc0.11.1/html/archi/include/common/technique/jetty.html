

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>7.2.2.3. Configuration jetty &mdash; documentation VITAM - Architecture 0.11.1</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Recherche" href="../../../search.html"/>
    <link rel="top" title="documentation VITAM - Architecture 0.11.1" href="../../../index.html"/>
        <link rel="up" title="7.2.2. Architecture Technique" href="index.html"/>
        <link rel="next" title="7.2.2.5. Schéma de certificats et d’authentification" href="certs-auth.html"/>
        <link rel="prev" title="7.2.2.2. Introduction" href="GUID.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> VITAM - Architecture
          

          
            
            <img src="../../../_static/LogoVitamGrand2.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.11.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html#rappels">2. Rappels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fonctionnelle-archivistes/_toc.html">3. Architecture fonctionnelle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fonctionnelle-exploitation/_toc.html">4. Architecture d&#8217;exploitation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../technique/_toc.html">5. Architecture technique</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../securite/_toc.html">6. Securite</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../_toc.html">7. Architecture détaillée</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../access/_toc.html">7.1. Access</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../_toc.html">7.2. Common</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../fonctionnelle/index.html">7.2.1. Architecture Fonctionnelle</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">7.2.2. Architecture Technique</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="introduction.html">7.2.2.1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="GUID.html">7.2.2.2. Introduction</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">7.2.2.3. Configuration jetty</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gestion-des-handlers">7.2.2.4. Gestion des Handlers :</a></li>
<li class="toctree-l4"><a class="reference internal" href="certs-auth.html">7.2.2.5. Schéma de certificats et d&#8217;authentification</a></li>
<li class="toctree-l4"><a class="reference internal" href="certs-auth.html#presentation">7.2.2.6. Présentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="format-identifier.html">7.2.2.7. Common format identification</a></li>
<li class="toctree-l4"><a class="reference internal" href="messages.html">7.2.2.8. Messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="messages.html#messages-logbook">7.2.2.9. Messages Logbook</a></li>
<li class="toctree-l4"><a class="reference internal" href="requestID.html">7.2.2.10. Request ID</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../securite/index.html">7.2.3. Securite</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../functional-administration/_toc.html">7.3. Functional administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ihm-demo/_toc.html">7.4. IHM demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ingest/_toc.html">7.5. Ingest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../logbook/_toc.html">7.6. Logbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../metadata/_toc.html">7.7. Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../processing/_toc.html">7.8. Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../storage/_toc.html">7.9. Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../technical-administration/_toc.html">7.10. Technical administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../workspace/_toc.html">7.11. Workspace</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">VITAM - Architecture</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../_toc.html">7. Architecture détaillée</a> &raquo;</li>
      
          <li><a href="../_toc.html">7.2. Common</a> &raquo;</li>
      
          <li><a href="index.html">7.2.2. Architecture Technique</a> &raquo;</li>
      
    <li>7.2.2.3. Configuration jetty</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/include/common/technique/jetty.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configuration-jetty">
<h1>7.2.2.3. Configuration jetty<a class="headerlink" href="#configuration-jetty" title="Lien permanent vers ce titre">¶</a></h1>
<p>Le besoin est de pouvoir fournir la capacité de configurer de manière programmatique Jetty. On peut penser aux besoins suivants :</p>
<ol class="arabic">
<li><p class="first">Choisir le port de connection</p>
</li>
<li><p class="first">Choisir le connecteur HTTP/HTTPS que l’on désire utiliser</p>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>Paramètres communs aux connecteurs HTTP et HTTPS</dt>
<dd><ul class="first last simple">
<li>Taille des pools de thread (min,max nombre de threads)</li>
<li>Taille du backlog (nombre de connections en attente d’un thread disponible)</li>
<li>Différents timeout</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Paramétres spécifiques à la couche TLS</dt>
<dd><ul class="first last simple">
<li>Paramétres liés aux keystore (emplacement, mot de passe keystore, mot de passe des clés privées)</li>
<li>Paramétres liés aux trustore (idem keystore)</li>
<li>Paramétres liés à TLS (protocoles autorisés, ciphers autorisés, options TLS)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="gestion-des-handlers">
<h1>7.2.2.4. Gestion des Handlers :<a class="headerlink" href="#gestion-des-handlers" title="Lien permanent vers ce titre">¶</a></h1>
<p>Pour la gestion de ces différents paramètres, on utilise le système de configuration en “Inversion of Control” de Jetty.
Un exemple de configuration est disponible à l’adresse suivante : <a class="reference external" href="https://gist.github.com/gustavosoares/1438086">https://gist.github.com/gustavosoares/1438086</a></p>
<dl class="docutils">
<dt>Cette solution présente les avantages suivants :</dt>
<dd>une gestion relativement souple de la configuration (la prise en compte du binding d’un paramètre ne nécessite pas de coder le binding)
un exploitant qui connaît déjà Jetty sera en terrain connu de configuration</dd>
</dl>
<p>Parmi les choix à faire, il faut décider si on limite la configuration par fichier xml à la configuration “serveur d’application” ou si on pousse à la configuration des servlet .</p>
<p>L&#8217;important est d&#8217;utiliser la classe XMLConfiguration (package maven jetty-xml) dont la javadoc est disponible à l&#8217;adresse : <a class="reference external" href="http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/xml/XmlConfiguration.html">http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/xml/XmlConfiguration.html</a>
Pour la mise en oeuvre de ce composant, voici le pseudo code :</p>
<p>avec fichier qui est défini de la manière suivante :</p>
<blockquote>
<div><ul class="simple">
<li>Si Le fichier passé en 1er argument du module (ex: access.conf) contient une variable nommé &#8220;jettyConfig&#8221; alors le serveur cherche dans son répertoire un configuration un fichier du nom de la valeur de jettyConfig .</li>
<li>Si la variable jettyConfig n&#8217;existe ou s&#8217;il n&#8217;existe pas de fichier correspond à la valeur de la variable &#8216;jettyConfig&#8217; , le serveur cherche un fichier &#8220;jetty-vitam.xml&#8221; dans le répertoire de configuration</li>
<li>Si les 2 premiers cas échoue, le serveur s&#8217;arrête en erreur</li>
</ul>
</div></blockquote>
<p>A noter : pour les tests Unitaires, comme il n&#8217;y a pas de besoins de tuning particulier (pour l&#8217;instant) et qu&#8217;il y a un besoin d&#8217;avoir le port variable, on conserve la méthode actuelle pour démarrer les serveur (la méthode actuelle est de faire un (new Server (port) de la classe org.eclipse.jetty.server.Server).</p>
<dl class="docutils">
<dt>Les modules concernées sont :</dt>
<dd><ul class="first simple">
<li>access-rest</li>
<li>ihm-demo-web-application</li>
<li>ingest-external-rest</li>
<li>ingest-internal-rest</li>
<li>metadata-rest</li>
</ul>
<p class="last">TODO :
* functional-administration-rest
* logbook-rest
* processing-management
* storage-engine-server
* storage-offer-default
* workspace-rest</p>
</dd>
</dl>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="certs-auth.html" class="btn btn-neutral float-right" title="7.2.2.5. Schéma de certificats et d’authentification" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="GUID.html" class="btn btn-neutral" title="7.2.2.2. Introduction" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Ce document est distribué sous les termes de la licence Creative Commons Attribution - Partage dans les Mêmes Conditions 3.0 France (CC BY-SA 3.0 FR).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'0.11.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>