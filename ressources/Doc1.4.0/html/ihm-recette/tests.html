

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="fr" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="fr" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Tests &mdash; Documentation VITAM - IHM Recette 1.4.0</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="next" title="4. Sécurisation des journaux" href="securisation.html" />
    <link rel="prev" title="2. Administration des collections" href="collections.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> VITAM - IHM Recette
          

          
            
            <img src="_static/logo_vitam.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.4.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="recette.html">1. Recette</a></li>
<li class="toctree-l1"><a class="reference internal" href="collections.html">2. Administration des collections</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#tests-de-performance">3.1. Tests de performance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">3.1.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#champs-disponibles">3.1.2. Champs disponibles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#resultats">3.1.3. Résultats</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tests-fonctionnels">3.2. Tests fonctionnels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">3.2.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#page-tests-fonctionnels">3.2.2. Page Tests Fonctionnels</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detail-des-tests">3.2.3. Détail des tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#testeur-de-requetes-dsl">3.3. Testeur de requêtes DSL</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">3.3.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">3.3.2. Champs disponibles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#realiser-une-requete">3.3.3. Réaliser une requête</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#visualisation-du-graphe">3.4. Visualisation du graphe</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="securisation.html">4. Sécurisation des journaux</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">VITAM - IHM Recette</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>3. Tests</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/tests.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tests">
<h1>3. Tests<a class="headerlink" href="#tests" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="tests-de-performance">
<h2>3.1. Tests de performance<a class="headerlink" href="#tests-de-performance" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="introduction">
<h3>3.1.1. Introduction<a class="headerlink" href="#introduction" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les tests de performance consistent à réaliser plusieurs fois l’entrée d’un SIP et à mesurer son temps d’exécution. Ces entrées peuvent être réalisées par une ou plusieurs tâches parallèles.</p>
<p>L’interface est accessible par le menu : Tests &gt; Test de performance.</p>
<p>Les tests ne sont pas segmentés par tenant. Ces derniers sont directement configurés dans les tests. Il n’est donc pas nécéssaire de sélectionner un tenant pour accéder au contenu de cette section.</p>
</div>
<div class="section" id="champs-disponibles">
<h3>3.1.2. Champs disponibles<a class="headerlink" href="#champs-disponibles" title="Lien permanent vers ce titre">¶</a></h3>
<p>L’IHM est constituée de trois champs :</p>
<ul class="simple">
<li>Liste des SIP : liste des SIP disponibles pour réaliser le test. Ces SIP sont ceux déposés dans le dépôt vitam-itest. Il n’est possible de sélectionner qu’un SIP à la fois.</li>
<li>Nombre de Thread : permet de définir le nombre de tâches parallèles qui exécuteront les entrées.</li>
<li>Nombre d’Ingest : permet de définir le nombre total d’entrées à réaliser.</li>
</ul>
<p>Un bouton «&nbsp;lancer les tests&nbsp;» permet d’exécuter le test de performance.</p>
<img alt="_images/performance_champs_disponibles.png" src="_images/performance_champs_disponibles.png" />
</div>
<div class="section" id="resultats">
<h3>3.1.3. Résultats<a class="headerlink" href="#resultats" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les résultats sont disponibles dans la section en bas de la page.</p>
<p>Chaque ligne représente un test de performance. Le nom du test est formaté de la façon suivante : report_AAAAMMJJ_HHmmSS.csv. Le bouton de téléchargement permet de récupérer le fichier .csv contenant les données du test.</p>
<img alt="_images/performance_resultats.png" src="_images/performance_resultats.png" />
<p>Chaque ligne du fichier .csv représente une entrée. Les colonnes sont :</p>
<ul class="simple">
<li>OperationID</li>
<li>PROCESS_SIP_UNITARY</li>
<li>STP_SANITY_CHECK_SIP</li>
<li>SANITY_CHECK_SIP</li>
<li>CHECK_CONTAINER</li>
<li>STP_UPLOAD_SIP</li>
<li>STP_INGEST_CONTROL_SIP</li>
<li>PREPARE_STORAGE_INFO</li>
<li>CHECK_SEDA</li>
<li>CHECK_HEADER</li>
<li>CHECK_HEADER.CHECK_AGENT</li>
<li>CHECK_HEADER.CHECK_CONTRACT_INGEST</li>
<li>CHECK_DATAOBJECTPACKAGE</li>
<li>CHECK_DATAOBJECTPACKAGE.CHECK_MANIFEST_DATAOBJECT_VERSION</li>
<li>CHECK_DATAOBJECTPACKAGE.CHECK_MANIFEST_OBJECTNUMBER</li>
<li>CHECK_DATAOBJECTPACKAGE.CHECK_MANIFEST</li>
<li>CHECK_DATAOBJECTPACKAGE.CHECK_CONSISTENCY</li>
<li>STP_OG_CHECK_AND_TRANSFORME</li>
<li>CHECK_DIGEST</li>
<li>OG_OBJECTS_FORMAT_CHECK</li>
<li>STP_UNIT_CHECK_AND_PROCESS</li>
<li>CHECK_UNIT_SCHEMA</li>
<li>CHECK_ARCHIVE_UNIT_PROFILE</li>
<li>CHECK_CLASSIFICATION_LEVEL</li>
<li>UNITS_RULES_COMPUTE</li>
<li>STP_STORAGE_AVAILABILITY_CHECK        STORAGE_AVAILABILITY_CHECK</li>
<li>STORAGE_AVAILABILITY_CHECK</li>
<li>STORAGE_AVAILABILITY_CHECK.STORAGE_AVAILABILITY_CHECK</li>
<li>STP_OBJ_STORING</li>
<li>OBJ_STORAGE</li>
<li>OG_METADATA_INDEXATION</li>
<li>STP_UNIT_METADATA</li>
<li>UNIT_METADATA_INDEXATION</li>
<li>STP_OG_STORING</li>
<li>COMMIT_LIFE_CYCLE_OBJECT_GROUP</li>
<li>OG_METADATA_STORAGE</li>
<li>STP_UNIT_STORING</li>
<li>COMMIT_LIFE_CYCLE_UNIT</li>
<li>UNIT_METADATA_STORAGE</li>
<li>STP_UPDATE_OBJECT_GROUP</li>
<li>OBJECT_LIST_EMPTY</li>
<li>STP_ACCESSION_REGISTRATION</li>
<li>ACCESSION_REGISTRATION</li>
<li>STP_INGEST_FINALISATION</li>
<li>ATR_NOTIFICATION</li>
<li>ROLL_BACK</li>
</ul>
<p>La colonne «&nbsp;Opération ID&nbsp;» contient le GUID de l’opération d’entrée. Les autres colonnes indiquent le temps en millisecondes qui a été nécessaire pour passer l’étape.</p>
</div>
</div>
<div class="section" id="tests-fonctionnels">
<h2>3.2. Tests fonctionnels<a class="headerlink" href="#tests-fonctionnels" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="id1">
<h3>3.2.1. Introduction<a class="headerlink" href="#id1" title="Lien permanent vers ce titre">¶</a></h3>
<p>La partie «&nbsp;Tests Fonctionnels&nbsp;» contient les écrans de lancement et de consultation des résultats des TNR.</p>
<p><strong>NB</strong> : La configuration des TNR ne s’effectue pas depuis ces écrans. La procédure de configuration est décrite dans la documentation «&nbsp;Configuration des tests de non régression&nbsp;».</p>
<p>Elle est accessible depuis l’IHM de recette, par le menu Tests &gt; Test Fonctionnels</p>
<p>Les tests ne sont pas segmentés par tenant. Ces derniers sont directement configurés dans les tests. Il n’est donc pas nécessaire de sélectionner un tenant pour accéder au contenu de cette section.</p>
</div>
<div class="section" id="page-tests-fonctionnels">
<h3>3.2.2. Page Tests Fonctionnels<a class="headerlink" href="#page-tests-fonctionnels" title="Lien permanent vers ce titre">¶</a></h3>
<p>La page est divisée en deux parties :</p>
<blockquote>
<div><ul class="simple">
<li>Boutons de gestion</li>
<li>Résultats des derniers tests</li>
</ul>
</div></blockquote>
<img alt="_images/RECETTE_test_fonctionnels_ecran_principal.png" src="_images/RECETTE_test_fonctionnels_ecran_principal.png" />
<p>Boutons de gestion</p>
<p>Bouton «&nbsp;Lancer les tests&nbsp;» : permet de rejouer les tests configurés. Ceci donnera lieu à la création d’un nouveau rapport.
Bouton «&nbsp;Mise à jour référentiel&nbsp;» : permet de récupérer les derniers fichiers de configuration des tests depuis «&nbsp;Git&nbsp;» (gestionnaire de sources). Ainsi, si un utilisateur a ajouté des tests et que ceux-ci ont été intégrés à Git, le fait de cliquer sur ce bouton permet de les prendre en compte au prochain clic sur le bouton «&nbsp;Lancer les Tests&nbsp;».</p>
<blockquote>
<div>Résultat des derniers tests</div></blockquote>
<p>Les résultats de tests sont affichés dans un tableau à deux colonnes :</p>
<blockquote>
<div>Rapport
Détail</div></blockquote>
<p>Chaque ligne représente le rapport issu d’une campagne de tests. La colonne «&nbsp;Rapport&nbsp;» indique le nom du rapport. Celui-ci est constitué de la façon suivante : report_AAAAMMJJ_HHmmss.json. Ainsi le rapport correspondant à la dernière campagne de tests se trouve au-dessus de la liste.</p>
<p>La colonne détail affiche simplement la mention «&nbsp;Accès au détail&nbsp;».</p>
<p>Au clic sur une ligne, la page du détail du rapport concerné s’affiche sur l’écran.</p>
</div>
<div class="section" id="detail-des-tests">
<h3>3.2.3. Détail des tests<a class="headerlink" href="#detail-des-tests" title="Lien permanent vers ce titre">¶</a></h3>
<p>L’écran de détail d’une campagne de tests est divisé en deux parties :</p>
<blockquote>
<div><ul class="simple">
<li>Partie Résumé</li>
<li>Partie Détails</li>
</ul>
</div></blockquote>
<img alt="_images/RECETTE_detail_tests.png" src="_images/RECETTE_detail_tests.png" />
<p><strong>Partie Résumé</strong></p>
<p>La partie Résumé comporte les trois indications suivantes :</p>
<blockquote>
<div><ul class="simple">
<li>Nombre de Tests : nombre de tests inclus dans la campagne</li>
<li>Succès : nombre de tests en succès</li>
<li>Échecs : nombre de tests en échec</li>
</ul>
</div></blockquote>
<p><strong>Partie Détails</strong></p>
<p>Chaque ligne du tableau représente le résultat d’un test. La ligne est sur fond vert lorsque le test est en succès, sur fond rouge lorsqu’il est en échec.</p>
<p>Ci-après l’exemple d’une ligne correspondant à un test en succès. Par défaut, les tests en échec s’affichent en premier.</p>
<img alt="_images/RECETTE_detail_test_OK.png" src="_images/RECETTE_detail_test_OK.png" />
<p>Le tableau est constitué de quatre colonnes :</p>
<blockquote>
<div><ul class="simple">
<li>Fonctionnalité : correspond à la fonctionnalité testée. Par défaut, un fichier de configuration correspond à une fonctionnalité. On a par exemple un fichier de configuration pour réaliser tous les tests sur l’INGEST. Dans ce cas, le nom de la fonctionnalité sera indiqué dans tous les cas de test correspondant dans le tableau de restitution.</li>
<li>Identifiant : identifiant de l’opération correspondant au test. Il peut être utilisé pour trouver plus de détails sur le test dans le journal des opérations.</li>
<li>Description : il s’agit d’une description du cas de test effectué. Elle est indiquée dans le fichier de configuration pour chacun des tests.</li>
<li>Erreurs : erreur technique liée à l’échec du test. Cette colonne est vide pour les tests en succès.</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="testeur-de-requetes-dsl">
<h2>3.3. Testeur de requêtes DSL<a class="headerlink" href="#testeur-de-requetes-dsl" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="id2">
<h3>3.3.1. Introduction<a class="headerlink" href="#id2" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le testeur de requêtes DSL met à disposition des administrateurs une interface graphique permettant de simplifier l’exécution de requêtes sur les API de la solution logicielle Vitam.</p>
<p>Celle-ci contient un formulaire composé de plusieurs champs.</p>
<p>L’interface est accessible par le menu : Tests &gt; Test requêtes DSL</p>
</div>
<div class="section" id="id3">
<h3>3.3.2. Champs disponibles<a class="headerlink" href="#id3" title="Lien permanent vers ce titre">¶</a></h3>
<p><strong>Tenant</strong> : champ obligatoire. Indique le tenant sur lequel la requête va être exécutée. Ce champ est renseigné automatiquement avec le numéro du tenant sélectionné par l’administrateur.</p>
<p><strong>Contrat</strong> : champ obligatoire. Liste permettant de sélectionner un contrat d’accès qui sera associé à la requête.</p>
<p><strong>Collection</strong> : champ obligatoire. Liste permettant de sélectionner la collection sur laquelle la requête va être exécutée.</p>
<p><strong>Action</strong> : champ obligatoire. Liste permettant de sélectionner le type d’action à effectuer. Il est possible de sélectionner l’action «&nbsp;Rechercher&nbsp;» pour l’ensemble des collections.</p>
<p>Pour les collections suivantes, il est également possible de choisir l’action «&nbsp;Mettre à jour&nbsp;» :</p>
<ul class="simple">
<li>Unit</li>
<li>Profil</li>
<li>Contrat d’accès</li>
<li>Contrat d’entrée</li>
<li>Contexte</li>
</ul>
<p><strong>Opération</strong>: Pour la collection Opération, il est également possible de choisir les actions suivantes:</p>
<ul class="simple">
<li>Action Suivante</li>
<li>Action Pause</li>
<li>Action Reprendre</li>
<li>Action Stop</li>
</ul>
<p><strong>Identifiant</strong> : champs optionnel. Permet de renseigner le GUID de l’objet ciblé dans la collection.</p>
<p><strong>Requête DSL</strong> : champ obligatoire. Permet de saisir la requête DSL au format Json.</p>
</div>
<div class="section" id="realiser-une-requete">
<h3>3.3.3. Réaliser une requête<a class="headerlink" href="#realiser-une-requete" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour réaliser une requête, l’administrateur remplit les champs du formulaire afin que leur contenu soit cohérent avec la requête qu’il souhaite exécuter.</p>
<img alt="_images/DSL_envoyer_requete.png" src="_images/DSL_envoyer_requete.png" />
<p>Pour vérifier la validité du formatage du Json, l’administrateur clique sur bouton «&nbsp;Valider Json&nbsp;». Si le Json est valide, le texte est mis en forme et la mention «&nbsp;Json Valide&nbsp;» est affichée à gauche du bouton. Dans le cas contraire, la mention «&nbsp;Json non valide&nbsp;» est indiquée.</p>
<img alt="_images/DSL_Json_Invalide.png" src="_images/DSL_Json_Invalide.png" />
<p>Pour exécuter la requête, l’administrateur clique sur le bouton «&nbsp;Envoyer requête&nbsp;». Une zone de résultat est alors affichée à droite de l’écran et contient le retour envoyé par la solution logicielle Vitam.</p>
<img alt="_images/DSL_requete_OK.png" src="_images/DSL_requete_OK.png" />
<p>Si la requête contient une erreur autre que le non-respect du formatage de la requête Json, le retour envoyé par la solution logicielle Vitam contiendra un code d’erreur et sera affiché de la façon suivante :</p>
<img alt="_images/DSL_requete_KO.png" src="_images/DSL_requete_KO.png" />
<p>Si la requête envoyée par l’administrateur ne respecte pas le formatage de la requête Json, l’endroit où se trouve l’erreur sera indiqué dans le retour de la façon suivante :</p>
<img alt="_images/DSl_requete_Json_KO.png" src="_images/DSl_requete_Json_KO.png" />
<p>L’utilisateur peut vider le contenu de l’espace dédié à la réponse du DSL en cliquant sur le bouton «&nbsp;Effacer&nbsp;».</p>
</div>
</div>
<div class="section" id="visualisation-du-graphe">
<h2>3.4. Visualisation du graphe<a class="headerlink" href="#visualisation-du-graphe" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li>L’interface est accessible par le Menu: Tests &gt; Visualisation du graphe.</li>
</ul>
<p>Cette partie permet d’avoir une répresentation visuelle d’un graphe contenu dans un SIP.
La première étape consiste donc à récupérer les information suivantes :</p>
<ul class="simple">
<li>L’identifiant de l’opération</li>
<li>L’intitulé du contrat utilisé</li>
</ul>
<p>Note : la page correspondant à l’écran utilisé est expérimentale.</p>
<p>Il faut ensuite rajouter les informations dans les champs prévus à cet effet : «&nbsp;Contrat&nbsp;» et «&nbsp;Identifiant d’opération&nbsp;»</p>
<p>Puis il suffit de cliquer sur le bouton &nbsp;» Envoyer la requête&nbsp;» pour visualiser plusieurs choses :</p>
<ul class="simple">
<li>Sur la partie gauche, la représentation visuelle du graphe contenu dans le SIP</li>
<li>sur la partie droite, lorsqu’on clique sur la représentation de chaque unité archivistique, le détail des données reliées à l’unité archivistique s’affiche</li>
</ul>
<img alt="_images/visualisation_graphe.png" src="_images/visualisation_graphe.png" />
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="securisation.html" class="btn btn-neutral float-right" title="4. Sécurisation des journaux" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="collections.html" class="btn btn-neutral" title="2. Administration des collections" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.4.0',
            LANGUAGE:'fr',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>