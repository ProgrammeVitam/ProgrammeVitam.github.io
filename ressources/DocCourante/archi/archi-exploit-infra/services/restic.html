

<!DOCTYPE html>
<html class="writer-html4" lang="fr" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>5.11.21. restic &mdash; Documentation VITAM - Architecture 5.0</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'5.0',
              LANGUAGE:'fr',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/translations.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Recherche" href="../../search.html" />
    <link rel="next" title="5.11.22. Security-internal" href="security-internal.html" />
    <link rel="prev" title="5.11.18. Prometheus server" href="prometheus.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> VITAM - Architecture
          

          
            
            <img src="../../_static/logo_vitam.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                5.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html#rappels">2. Rappels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/_toc.html">3. Vue d’ensemble</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archi-applicative/_toc.html">4. Architecture applicative</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../_toc.html">5. Architecture technique / exploitation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../principes/_toc.html">5.1. Principes d’architecture technique</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01-services-techniques.html">5.2. Services techniques fournis par la solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02-dependencies.html">5.3. Composants logiciels utilisés</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03-technical-architecture.html">5.4. Architecture technique détaillée</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04-data-storage.html">5.5. Stockage des données</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05-logs-architecture.html">5.6. Concentration et exploitation des logs applicatifs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06-metrics-architecture.html">5.7. Métriques applicatives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../07-deployment-tooling.html">5.8. Outillage de déploiement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08-consul.html">5.9. Service registry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10-it-services.html">5.10. Dépendances aux services d’infrastructures</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../15-services.html">5.11. Composants déployés</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="access-external.html">5.11.1. Access-external</a></li>
<li class="toctree-l3"><a class="reference internal" href="access-internal.html">5.11.2. Access-internal</a></li>
<li class="toctree-l3"><a class="reference internal" href="batch-report.html">5.11.3. Batch-report</a></li>
<li class="toctree-l3"><a class="reference internal" href="consul.html">5.11.4. Consul</a></li>
<li class="toctree-l3"><a class="reference internal" href="curator.html">5.11.5. Curator</a></li>
<li class="toctree-l3"><a class="reference internal" href="elasticsearch-data.html">5.11.6. Elasticsearch-data</a></li>
<li class="toctree-l3"><a class="reference internal" href="elasticsearch-log.html">5.11.7. Elasticsearch-log</a></li>
<li class="toctree-l3"><a class="reference internal" href="functional-administration.html">5.11.8. Functional-administration</a></li>
<li class="toctree-l3"><a class="reference internal" href="grafana.html">5.11.9. Grafana</a></li>
<li class="toctree-l3"><a class="reference internal" href="ingest-external.html">5.11.10. Ingest-external</a></li>
<li class="toctree-l3"><a class="reference internal" href="ingest-internal.html">5.11.11. Ingest-internal</a></li>
<li class="toctree-l3"><a class="reference internal" href="kibana.html">5.11.12. Kibana</a></li>
<li class="toctree-l3"><a class="reference internal" href="logbook.html">5.11.13. Logbook</a></li>
<li class="toctree-l3"><a class="reference internal" href="logstash.html">5.11.14. Logstash</a></li>
<li class="toctree-l3"><a class="reference internal" href="metadata.html">5.11.15. Metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="mongodb.html">5.11.16. Mongodb</a></li>
<li class="toctree-l3"><a class="reference internal" href="processing.html">5.11.17. Processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="prometheus.html">5.11.18. Prometheus server</a></li>
<li class="toctree-l3"><a class="reference internal" href="prometheus.html#prometheus-alertmanager">5.11.19. Prometheus alertmanager</a></li>
<li class="toctree-l3"><a class="reference internal" href="prometheus.html#prometheus-node-exporter">5.11.20. Prometheus node_exporter</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">5.11.21. restic</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#architecture-de-deploiement">5.11.21.1. Architecture de déploiement</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="security-internal.html">5.11.22. Security-internal</a></li>
<li class="toctree-l3"><a class="reference internal" href="siegfried.html">5.11.23. Siegfried</a></li>
<li class="toctree-l3"><a class="reference internal" href="storage.html">5.11.24. Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="storage-offer.html">5.11.25. Storage-offer</a></li>
<li class="toctree-l3"><a class="reference internal" href="worker.html">5.11.26. Worker</a></li>
<li class="toctree-l3"><a class="reference internal" href="workspace.html">5.11.27. Workspace</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../20-deployment-guidelines.html">5.12. Guidelines de déploiement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../25-resources.html">5.13. Eléments de dimensionnement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../90-flux-all.html">5.14. Matrice des flux</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../securite/_toc.html">6. Sécurité</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../include/_toc.html">7. Architecture détaillée</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">VITAM - Architecture</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../_toc.html">5. Architecture technique / exploitation</a> &raquo;</li>
        
          <li><a href="../15-services.html">5.11. Composants déployés</a> &raquo;</li>
        
      <li>5.11.21. restic</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/archi-exploit-infra/services/restic.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="restic">
<h1>5.11.21. restic<a class="headerlink" href="#restic" title="Lien permanent vers ce titre">¶</a></h1>
<p>Outil de sauvegarde opensource. Utilisé pour le backup des bases mongo-offer.</p>
<p>Supporte les différents providers suivants: <cite>filesystem</cite>, <cite>filesystem-hash</cite>, <cite>openstack-swift-v3</cite> et <cite>amazon-s3-v1</cite>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">La sauvegarde des bases pour les offres froides est détaillée dans le <a class="reference internal" href="../../introduction.html#term-dex"><span class="xref std std-term">DEX</span></a>.</p>
</div>
<dl class="docutils">
<dt>Type :</dt>
<dd>COTS EXTRA (beta)</dd>
<dt>Données stockées :</dt>
<dd><ul class="first last simple">
<li>Sauvegarde des bases mongodb.</li>
</ul>
</dd>
</dl>
<div class="section" id="architecture-de-deploiement">
<h2>5.11.21.1. Architecture de déploiement<a class="headerlink" href="#architecture-de-deploiement" title="Lien permanent vers ce titre">¶</a></h2>
<p>restic sera déployé sur l’ensemble des machines renseignées dans le groupe <code class="docutils literal notranslate"><span class="pre">[hosts_storage_offer_default]</span></code> de votre fichier d’inventaire qui possèdent le paramètre <code class="docutils literal notranslate"><span class="pre">restic_enabled=true</span></code>. Attention à ne mettre ce paramètre que pour l’une des machines pour chacun des <code class="docutils literal notranslate"><span class="pre">offer_conf</span></code>.</p>
<p>Afin de permettre aux machines du groupe <code class="docutils literal notranslate"><span class="pre">[hosts_storage_offer_default]</span></code> de faire les backups, elles doivent pouvoir accéder aux bases de données afin de pouvoir effectuer la commande <cite>mongodump</cite>. Ainsi, les flux réseaux doivent permettre d’atteindre les bases configurées (<code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">restic.backup.host</span> <span class="pre">}}</span></code>).</p>
<p>Pour des raisons de sécurité, restic est déployé sur ces machines afin d’éviter de diffuser les paramètres d’accès aux offres de stockage (notamment dans le cas des offres objet).</p>
<p>De plus, en cas de défaillance critique du système Vitam, tant que les offres de stockage sont intactes, il sera plus facile de ressortir les snapshots des bases de données associées aux données de l’offre sous-jacente.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="security-internal.html" class="btn btn-neutral float-right" title="5.11.22. Security-internal" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="prometheus.html" class="btn btn-neutral float-left" title="5.11.18. Prometheus server" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>