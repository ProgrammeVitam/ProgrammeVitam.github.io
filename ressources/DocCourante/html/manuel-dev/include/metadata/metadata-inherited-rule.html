

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="fr" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="fr" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Métadata &mdash; Documentation VITAM - Manuel de développement 1.4.0</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Recherche" href="../../search.html" />
    <link rel="next" title="Désynchronisation des bases de données" href="metadata-sync.html" />
    <link rel="prev" title="Métadata-tenant" href="metadata-tenant.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> VITAM - Manuel de développement
          

          
            
            <img src="../../_static/logo_vitam.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.4.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../dev-environnement.html">Configuration de l’environnement de développement</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../_toc.html">Détails par composant</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../access/_toc.html">Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="../common/_toc.html">Common</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functional-administration/_toc.html">Functional administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ihm-demo/_toc.html">IHM demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ihm-recette/_toc.html">IHM demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingest/_toc.html">Ingest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal-security/_toc.html">Security-Internal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logbook/_toc.html">Logbook</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="_toc.html">Metadata</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="metadata-introduction.html">Métadata - Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="metadata-dat.html">DAT : module metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="metadata-user-client.html">Métadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="metadata-user-client.html#utilisation">Utilisation</a></li>
<li class="toctree-l3"><a class="reference internal" href="metadata-api-rest-raml.html">Métadata : API REST Raml</a></li>
<li class="toctree-l3"><a class="reference internal" href="metadata-user-client.html">Métadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="metadata-user-client.html#utilisation">Utilisation</a></li>
<li class="toctree-l3"><a class="reference internal" href="metadata-tenant.html">Métadata-tenant</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Métadata</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#utilisation">Utilisation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="metadata-sync.html">Désynchronisation des bases de données</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../processing/_toc.html">Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/_toc.html">Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technical-administration/_toc.html">Technical administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../worker/_toc.html">Worker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workspace/_toc.html">Workspace</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../parallisation_tests.html">Parallélisation des tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugin-icu-elasticsearch.html">Plugin ICU Elasticsearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gestion-database.html">Gestion des bases de données</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../client-ressource-rest.html">Ressources et clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devstack_vm.html">Création d’une machine de dev contenant swift</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">VITAM - Manuel de développement</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../_toc.html">Détails par composant</a> &raquo;</li>
        
          <li><a href="_toc.html">Metadata</a> &raquo;</li>
        
      <li>Métadata</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/include/metadata/metadata-inherited-rule.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="metadata">
<h1>Métadata<a class="headerlink" href="#metadata" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="utilisation">
<h2>Utilisation<a class="headerlink" href="#utilisation" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="parametres">
<h3>Paramètres<a class="headerlink" href="#parametres" title="Lien permanent vers ce titre">¶</a></h3>
</div>
<div class="section" id="calcul-des-regles-de-gestion-pour-une-unite-archivistique">
<h3>Calcul des règles de gestion pour une unité archivistique<a class="headerlink" href="#calcul-des-regles-de-gestion-pour-une-unite-archivistique" title="Lien permanent vers ce titre">¶</a></h3>
<ol class="arabic simple">
<li>Requête DSL</li>
</ol>
<p>Pour calculer les règles héritées de l’archive Unit. Il faut ajouter «&nbsp;$rules : 1&nbsp;» dans le filtre de la requête
DSL.</p>
<ol class="arabic simple" start="2">
<li>Calculer des règles de gestion pour une unité archivistique</li>
</ol>
<p>Le serveur vérifie la requête, si son filtre contient «&nbsp;$rules : 1&nbsp;». On démarre la procédure de calcul des règles héritées</p>
<blockquote>
<div><p>2.1 Rechercher les règles de gestion des parents et lui même</p>
<blockquote>
<div>createSearchParentSelect(List&lt;String&gt; unitList)</div></blockquote>
<p>2.1 Construire le graphe DAG avec tous les unité archivistique</p>
<p>ArrayNode unitParents = selectMetadataObject(newSelectQuery.getFinalSelect(), null, null);</p>
<p>Map&lt;String, UnitSimplified&gt; unitMap = UnitSimplified.getUnitIdMap(unitParents);
UnitRuleCompute unitNode = new UnitRuleCompute(unitMap.get(unitId));
unitNode.buildAncestors(unitMap, allUnitNode, rootList);</p>
<p>2.3 Calculer des règles de gestion et mettre dans le résultat final</p>
<p>unitNode.computeRule();
JsonNode rule = JsonHandler.toJsonNode(unitNode.getHeritedRules().getInheritedRule());
((ObjectNode)arrayNodeResponse.get(0)).set(UnitInheritedRule.INHERITED_RULE, rule);</p>
</div></blockquote>
</div>
<div class="section" id="l-algorithme-pour-calculer-les-regles-de-gestion">
<h3>L’algorithme pour Calculer les règles de gestion<a class="headerlink" href="#l-algorithme-pour-calculer-les-regles-de-gestion" title="Lien permanent vers ce titre">¶</a></h3>
<ol class="arabic simple">
<li>Initialiser les règles de gestion pour les units racines</li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Si (unit n&#39;a pas le parent direct, s&#39;est-à-dire, il est racine)
    Initialiser un objet UnitInheritedRule avec management et Id du unit
Autrement
    Créer un objet UnitInheritedRule vide
Fin Si
</pre></div>
</div>
<ol class="arabic" start="2">
<li><p class="first">Ajouter les règles de gestion qui est hérité par les units parents.</p>
<p>Cependant, il y a deux cas particuliers – la prévention d’héritage et l’exclusion d’héritage.</p>
</li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Pour (chaque parentId dans la liste de parent direct)
    Créer un objet UnitRuleCompute avec UnitSimplified qui contient management et Id du unit et la liste de son parent
    Calculer le règle (Cette étape est récursive. Il va calculer les règles jusqu&#39;à la racine)
    Créer un objet UnitInheritedRule qui contient les règles hérités
    Concaténer les règles par défaut et les règles hérités
Fin Pour
</pre></div>
</div>
<p>2.1 La prévention d’héritage</p>
<p>L’intégration d’une balise &lt;PreventInheritance&gt; dans le SEDA
Si le champ est « true », toutes les règles héritées des parents sont ignorées sur le nœud courant</p>
<p>2.2 L’exclusion d’héritage</p>
<p>L’intégration d’une balise &lt;RefNonRuleId&gt; dans le SEDA indiquant la règle à désactiver à partir de ce niveau.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="metadata-sync.html" class="btn btn-neutral float-right" title="Désynchronisation des bases de données" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="metadata-tenant.html" class="btn btn-neutral" title="Métadata-tenant" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.4.0',
            LANGUAGE:'fr',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/translations.js"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>