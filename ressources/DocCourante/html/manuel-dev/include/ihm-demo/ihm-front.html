<!DOCTYPE html>
<html class="writer-html4" lang="fr" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5.2. IHM Front &mdash; Documentation VITAM - Manuel de développement 6.1</title><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../_static/translations.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Recherche" href="../../search.html" />
    <link rel="next" title="5.3. Modules IHM Front" href="ihm-modules.html" />
    <link rel="prev" title="5.1. Introduction" href="ihm-logbook-introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            VITAM - Manuel de développement
              <img src="../../_static/logo_vitam.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                6.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html#rappels">Rappels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-environnement.html">Configuration de l’environnement de développement</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../_toc.html">Détails par composant</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../access/_toc.html">1. Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="../collect/_toc.html">2. Collect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../common/_toc.html">3. Common</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functional-administration/_toc.html">4. Functional administration</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="_toc.html">5. IHM demo</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ihm-logbook-introduction.html">5.1. Introduction</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">5.2. IHM Front</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cette-documentation-decrit-la-partie-front-angular-de-l-ihm-et-en-particulier-sa-configuration-et-ses-modules">5.2.1. Cette documentation décrit la partie front/Angular de l’ihm et en particulier sa configuration et ses modules.</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ihm-modules.html">5.3. Modules IHM Front</a></li>
<li class="toctree-l3"><a class="reference internal" href="ihm-tests.html">5.4. IHM Front - Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="ihm-logbook-dat.html">5.5. DAT : module IHM logbook operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="ihm-rest-raml.html">5.6. ihm-demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="ihm-tenant-id.html">5.7. IHM Front - Requêtes HTTP et Tenant ID</a></li>
<li class="toctree-l3"><a class="reference internal" href="ihm-authorization.html">5.8. Gestion des droits sur IHM demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="ihm-filter-requestID.html">5.9. IHM Filter for X-Request-ID</a></li>
<li class="toctree-l3"><a class="reference internal" href="ihm-demo-serveur.html">5.10. IHM Demo serveur</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ihm-recette/_toc.html">6. IHM demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingest/_toc.html">7. Ingest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal-security/_toc.html">8. Security-Internal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logbook/_toc.html">9. Logbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metadata/_toc.html">10. Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing/_toc.html">11. Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scheduler/_toc.html">12. Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/_toc.html">13. Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technical-administration/_toc.html">14. Technical administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../worker/_toc.html">15. Worker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workspace/_toc.html">16. Workspace</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../parallisation_tests.html">Parallélisation des tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugin-icu-elasticsearch.html">Plugin ICU Elasticsearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gestion-database.html">Gestion des bases de données</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../client-ressource-rest.html">Ressources et clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devstack_vm.html">Création d’une machine de dev contenant <em>Swift</em></a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">VITAM - Manuel de développement</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../_toc.html">Détails par composant</a></li>
          <li class="breadcrumb-item"><a href="_toc.html">5. IHM demo</a></li>
      <li class="breadcrumb-item active">5.2. IHM Front</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/include/ihm-demo/ihm-front.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="ihm-front">
<h1>5.2. IHM Front<a class="headerlink" href="#ihm-front" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="cette-documentation-decrit-la-partie-front-angular-de-l-ihm-et-en-particulier-sa-configuration-et-ses-modules">
<h2>5.2.1. Cette documentation décrit la partie front/Angular de l’ihm et en particulier sa configuration et ses modules.<a class="headerlink" href="#cette-documentation-decrit-la-partie-front-angular-de-l-ihm-et-en-particulier-sa-configuration-et-ses-modules" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="utils-et-general-composition-du-projet-angular">
<h3>5.2.1.1. Utils et général / Composition du projet Angular<a class="headerlink" href="#utils-et-general-composition-du-projet-angular" title="Lien permanent vers ce titre">¶</a></h3>
<p>TODO</p>
<div class="section" id="composition-du-projet">
<h4>5.2.1.1.1. Composition du projet<a class="headerlink" href="#composition-du-projet" title="Lien permanent vers ce titre">¶</a></h4>
<p>NPM + Bower : npm est utilisé pour gérer les dépendances liées au build de l’application (par exemple la minification), tandis que bower est utilisé pour gérer les dépendances de l’appication (par exemple angular, moment.js, …)
Pour construire le projet, l’outil gulp a été mis en place. Celui permet d’automatiser les tâches permettant d’arriver à la construction d’un livrable contenant les fichiers html, javascript et css minifiés.
La commande “gulp package” permet de construire le projet.</p>
<p>Tests unitaires: Voir ihm-tests.rst</p>
</div>
<div class="section" id="gulp-et-deploiement-a-chaud">
<h4>5.2.1.1.2. Gulp et déploiement à chaud<a class="headerlink" href="#gulp-et-deploiement-a-chaud" title="Lien permanent vers ce titre">¶</a></h4>
<p>Le déploiement à chaud est possible via la commande “gulp serve”.
Si un fichier est modifié pendant que le serve est lancé, les modifications seront automatiquement mises à jour.
Le backend ciblé peut être spécifié en ajoutant un fichier local.json (Voir local.json.sample) et en modifiant la propriété target.</p>
</div>
<div class="section" id="karma-et-tests-unitaires">
<h4>5.2.1.1.3. Karma et Tests unitaires<a class="headerlink" href="#karma-et-tests-unitaires" title="Lien permanent vers ce titre">¶</a></h4>
<p>Les tests unitaires se lances via les commandes:</p>
<blockquote>
<div><ul class="simple">
<li>“gulp tests” : Lance un serveur (basé sur le module karma serveur) + les tests karma (Unitaires) et Protractor (e2e)</li>
<li>“gulp testKarma” : Lance les tests unitaires seules (Nécéssite un serveur lancé)</li>
<li>“gulp testProtractor” : Lance les tests end to end seuls (Nécéssite un serveur lancé)</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="qualite-du-code-javascript">
<h4>5.2.1.1.4. Qualité du code Javascript<a class="headerlink" href="#qualite-du-code-javascript" title="Lien permanent vers ce titre">¶</a></h4>
<p>La qualité du code javascript est validée grâce au module lint. Pour celà, il suffit de lancer la commande “gulp lint”.</p>
</div>
<div class="section" id="modele-mvc">
<h4>5.2.1.1.5. Modèle MVC<a class="headerlink" href="#modele-mvc" title="Lien permanent vers ce titre">¶</a></h4>
<p>Le front va petit à petit être migré vers une architecture reprenant le modèle MVC:</p>
<blockquote>
<div><ul class="simple">
<li>Une couche Modèle, récupérant les données depuis l’API vitam (Server d’app + dossier resources Angular)</li>
<li>Une couche Service, traitant les promesses des resources ou proposant des méthodes utilitaires</li>
<li>Une couche Vues, proposant l’affichage d’une page avec son controller associé</li>
</ul>
</div></blockquote>
<p>Au final l’arbo type des fichiers devrait être la suivante:</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">/app</span></kbd></td>
<td><p class="first">=&gt; Fichiers de conf globaux du projet (bower/npm/jshint/index.html/…)</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">/core</span></kbd></td>
<td>=&gt; Fichiers de configuration globaux (core.module.js, main.controller.js, app.config.js, app.module.js, …)
/static =&gt; Fichiers de traductions front (Key=value pour les champs statiques de l’IHM)
/services =&gt; Services utilitaires partagés de l’application (Faire des modules pour chaque services si externalisables)
/directives =&gt; Directives utilitaires partagés de l’application (Faire des modules pour chaque directives si externalisables)
/filters =&gt; Filtres utilitaires partagés de l’application ?</td></tr>
<tr><td class="option-group">
<kbd><span class="option">/resources</span></kbd></td>
<td>accession-register.resource.js =&gt; Une méthode par endpoint du server d’app (Search / GetAll / GetDetails / …)
archive-unit.resource.js =&gt; Une méthode par endpoint du server d’app (Search / GetArchive / GetDetails / …)
…</td></tr>
<tr><td class="option-group">
<kbd><span class="option">/services</span></kbd></td>
<td>accession-register.service.js =&gt; Une ou plusieurs méthodes par méthode de la resource fund-register
archive-unit.service.js =&gt;  Une ou plusieurs méthodes par méthode de la resource archive-unit
…</td></tr>
</tbody>
</table>
<p>/pages (Nom à valider)</p>
<blockquote>
<div>/accession-register-detail =&gt; Controller + Template de la page Détails de Registre de Fonds
/archive-unit =&gt; Controller + Template de la page archive-unit
…</div></blockquote>
<table class="last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">/styles</span></kbd></td>
<td>/css
/img
/fonts =&gt; A migrer dans le /css ?</td></tr>
</tbody>
</table>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="internationalisation">
<h4>5.2.1.1.6. Internationalisation<a class="headerlink" href="#internationalisation" title="Lien permanent vers ce titre">¶</a></h4>
<p>Cette partie est gérée par le module angular-translate</p>
<p>Pour ajouter une traduction, ajouter une clé valeur dans le fichier static/languages_&lt;lang&gt;.json
L’entrée être formatée de la manière suivante «&nbsp;&lt;pageGroup&gt;.&lt;pageDetail&gt;.&lt;bloc&gt;.&lt;key&gt;&nbsp;»=&nbsp;»&lt;value&gt;&nbsp;»
où :</p>
<ul class="simple">
<li>&lt;pageGroup&gt; est le groupe de page ou du module dans l’application (Exemple archiveSearch ou administration)</li>
<li>&lt;pageDetail&gt; est le nom de page dans le groupe (Exemple managementRules ou archiveUnitDetails)</li>
<li>&lt;bloc&gt; est le nom du bloc dans la page (Exemple searchForm ou technicalMetadata)</li>
<li>&lt;key&gt; est le nom de la clé (Exemple “id” ou “evDetData”)</li>
</ul>
<blockquote>
<div>Si possible essayez de regrouper les clés définies par groupe/detail/bloc/ordre alphabetique pour s’y retrouver.</div></blockquote>
<p>Pour utiliser une traduction, utilisez dans une instruction angular de votre HTML le filtre translate:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{{&#39;archiveSearch.searchForm.id&#39; | translate}}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Si votre key est dynamique et présente dans une variable, il est possible d’inserer du js en plus de la chaine:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{{&#39;archive.archiveUnitDetails.technicalMetadata.&#39; + metadata[$index] | translate}}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Enfin il est également possible de faire le traitement de traduction en js en appliquant le filtre:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">$filter doit avoir été injecté</p>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">translatedLabel</span> <span class="o">=</span> <span class="nx">$filter</span><span class="p">(</span><span class="s1">&#39;translate&#39;</span><span class="p">)(</span><span class="s1">&#39;archiveSearch.searchForm.id&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">À faire</p>
<p class="last">Rendre dynamique la langue choisi pour les traductions (actuellement static FR)</p>
</div>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">À faire</p>
<p class="last">Utiliser la langue de fallback fr (ou autre ?)</p>
</div>
<div class="admonition-todo admonition" id="index-2">
<p class="first admonition-title">À faire</p>
<p class="last">Une grosse partie des constantes (js) et des String statiques (html) devraient être mises dans ces fichiers</p>
</div>
<div class="admonition-todo admonition" id="index-3">
<p class="first admonition-title">À faire</p>
<p class="last">Récupérer la liste des valeurs du référentiel VITAM (Build / Appel API)</p>
</div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ihm-logbook-introduction.html" class="btn btn-neutral float-left" title="5.1. Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ihm-modules.html" class="btn btn-neutral float-right" title="5.3. Modules IHM Front" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>