

<!DOCTYPE html>
<html class="writer-html4" lang="fr" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>3.4. Administration-Management-client &mdash; Documentation VITAM - Manuel de développement 4.0.1</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'4.0.1',
              LANGUAGE:'fr',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/translations.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Recherche" href="../../search.html" />
    <link rel="next" title="4. IHM demo" href="../ihm-demo/_toc.html" />
    <link rel="prev" title="3.3. Administration-Management-Common" href="admin-functional-common.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> VITAM - Manuel de développement
          

          
            
            <img src="../../_static/logo_vitam.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                4.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html#rappels">Rappels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-environnement.html">Configuration de l’environnement de développement</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../_toc.html">Détails par composant</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../access/_toc.html">1. Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="../common/_toc.html">2. Common</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="_toc.html">3. Functional administration</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="introduction.html">3.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin-functional-dat.html">3.2. DAT : module functional-administration</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin-functional-common.html">3.3. Administration-Management-Common</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">3.4. Administration-Management-client</a></li>
<li class="toctree-l3"><a class="reference internal" href="#utilisation">3.5. Utilisation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#parametres">3.5.1. Paramètres</a></li>
<li class="toctree-l4"><a class="reference internal" href="#la-factory">3.5.2. La factory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#le-client">3.5.3. Le client</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ihm-demo/_toc.html">4. IHM demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ihm-recette/_toc.html">5. IHM demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingest/_toc.html">6. Ingest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal-security/_toc.html">7. Security-Internal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logbook/_toc.html">8. Logbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metadata/_toc.html">9. Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing/_toc.html">10. Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/_toc.html">11. Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technical-administration/_toc.html">12. Technical administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../worker/_toc.html">13. Worker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workspace/_toc.html">14. Workspace</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../parallisation_tests.html">Parallélisation des tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugin-icu-elasticsearch.html">Plugin ICU Elasticsearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gestion-database.html">Gestion des bases de données</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../client-ressource-rest.html">Ressources et clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devstack_vm.html">Création d’une machine de dev contenant <em>Swift</em></a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">VITAM - Manuel de développement</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../_toc.html">Détails par composant</a> &raquo;</li>
        
          <li><a href="_toc.html">3. Functional administration</a> &raquo;</li>
        
      <li>3.4. Administration-Management-client</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/include/functional-administration/admin-functional-client.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="administration-management-client">
<h1>3.4. Administration-Management-client<a class="headerlink" href="#administration-management-client" title="Lien permanent vers ce titre">¶</a></h1>
</div>
<div class="section" id="utilisation">
<h1>3.5. Utilisation<a class="headerlink" href="#utilisation" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="parametres">
<h2>3.5.1. Paramètres<a class="headerlink" href="#parametres" title="Lien permanent vers ce titre">¶</a></h2>
<p>Administration-Management-client-format
Les paramètres sont les InputStreams du fichier Pronom pour l’import ou la validation.
Pour la recherche des formats, les paramètres sont les requête DSL construites par les builders de common-database</p>
<p>Administration-Management-client-rules
Les paramètres sont les InputStreams du fichier CSV pour l’import ou la validation.
Pour la recherche des règles, les paramètres sont les requête DSL construites par les builders de common-database</p>
<p>Administration-Management-client-accession-register
Les paramètres sont les InputStreams du fichier pour l’import ou la validation.
Pour la recherche des registres, les paramètres sont les requête DSL construites par les builders de common-database</p>
</div>
<div class="section" id="la-factory">
<h2>3.5.2. La factory<a class="headerlink" href="#la-factory" title="Lien permanent vers ce titre">¶</a></h2>
<p>Afin de récupérer le client, une factory a été mise en place.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// Récupération du client</span>
<span class="n">AdminManagementClient</span> <span class="n">client</span> <span class="o">=</span> <span class="n">AdminManagementClientFactory</span><span class="p">.</span><span class="na">getInstance</span><span class="p">().</span><span class="na">getAdminManagementClient</span><span class="p">();</span>
</pre></div>
</div>
<div class="section" id="le-mock">
<h3>3.5.2.1. Le Mock<a class="headerlink" href="#le-mock" title="Lien permanent vers ce titre">¶</a></h3>
<p>Par défaut, le client est en mode Mock. Il est possible de récupérer directement le mock :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// Changer la configuration du Factory</span>
<span class="n">AdminManagementClientFactory</span><span class="p">.</span><span class="na">setConfiguration</span><span class="p">(</span><span class="n">AdminManagementClientFactory</span><span class="p">.</span><span class="na">AdminManagementClientType</span><span class="p">.</span><span class="na">MOCK_CLIENT</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
<span class="c1">// Récupération explicite du client mock</span>
<span class="n">AdminManagementClient</span> <span class="n">client</span> <span class="o">=</span> <span class="n">AdminManagementClientFactory</span><span class="p">.</span><span class="na">getInstance</span><span class="p">().</span><span class="na">getLogbookClient</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="le-client">
<h2>3.5.3. Le client<a class="headerlink" href="#le-client" title="Lien permanent vers ce titre">¶</a></h2>
<p>Pour instancier son client en mode Production :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// Ajouter un fichier functional-administration-client.conf dans /vitam/conf</span>
<span class="c1">// Récupération explicite du client</span>
<span class="n">AdminManagementClient</span> <span class="n">client</span> <span class="o">=</span> <span class="n">AdminManagementClientFactory</span><span class="p">.</span><span class="na">getInstance</span><span class="p">().</span><span class="na">getAdminManagementClient</span><span class="p">();</span>
</pre></div>
</div>
<p>Le client propose actuellement les méthodes :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Status</span> <span class="nf">status</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">checkFormat</span><span class="p">(</span><span class="n">InputStream</span> <span class="n">stream</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">importFormat</span><span class="p">(</span><span class="n">InputStream</span> <span class="n">stream</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">deleteFormat</span><span class="p">();</span>
<span class="n">JsonNode</span> <span class="nf">getFormatByID</span><span class="p">(</span><span class="n">String</span> <span class="n">id</span><span class="p">);</span>
<span class="n">JsonNode</span> <span class="nf">getFormats</span><span class="p">(</span><span class="n">JsonNode</span> <span class="n">query</span><span class="p">);</span>
<span class="n">checkRulesFile</span><span class="p">(</span><span class="n">InputStream</span> <span class="n">stream</span><span class="p">);</span>
<span class="n">importRulesFile</span><span class="p">(</span><span class="n">InputStream</span> <span class="n">stream</span><span class="p">);</span>
<span class="n">deleteRulesFile</span><span class="p">();</span>
<span class="n">JsonNode</span> <span class="nf">getRuleByID</span><span class="p">(</span><span class="n">String</span> <span class="n">id</span><span class="p">);</span>
<span class="n">JsonNode</span> <span class="nf">getRule</span><span class="p">(</span><span class="n">JsonNode</span> <span class="n">query</span><span class="p">);</span>
<span class="n">createorUpdateAccessionRegister</span><span class="p">(</span><span class="n">AccessionRegisterDetail</span> <span class="n">register</span><span class="p">);</span>
<span class="n">JsonNode</span> <span class="nf">getAccessionRegister</span><span class="p">(</span><span class="n">JsonNode</span> <span class="n">query</span><span class="p">);</span>
<span class="n">JsonNode</span> <span class="nf">getAccessionRegisterDetail</span><span class="p">(</span><span class="n">JsonNode</span> <span class="n">query</span><span class="p">);</span>

<span class="n">Status</span> <span class="nf">importContexts</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">ContextModel</span><span class="o">&gt;</span> <span class="n">ContextModelList</span><span class="p">)</span>
<span class="n">RequestResponse</span><span class="o">&lt;</span><span class="n">ContextModel</span><span class="o">&gt;</span> <span class="nf">updateContext</span><span class="p">(</span><span class="n">String</span> <span class="n">id</span><span class="p">,</span> <span class="n">JsonNode</span> <span class="n">queryDsl</span><span class="p">)</span>
<span class="n">RequestResponse</span><span class="o">&lt;</span><span class="n">ContextModel</span><span class="o">&gt;</span> <span class="nf">findContexts</span><span class="p">(</span><span class="n">JsonNode</span> <span class="n">queryDsl</span><span class="p">)</span>
<span class="n">RequestResponse</span><span class="o">&lt;</span><span class="n">ContextModel</span><span class="o">&gt;</span> <span class="nf">findContextById</span><span class="p">(</span><span class="n">String</span> <span class="n">id</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../ihm-demo/_toc.html" class="btn btn-neutral float-right" title="4. IHM demo" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="admin-functional-common.html" class="btn btn-neutral float-left" title="3.3. Administration-Management-Common" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>