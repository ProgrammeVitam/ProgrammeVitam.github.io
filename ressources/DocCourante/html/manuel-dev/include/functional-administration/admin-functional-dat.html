

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="fr" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="fr" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>DAT : module functional-administration &mdash; Documentation VITAM - Manuel de développement 2.6.1</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'2.6.1',
              LANGUAGE:'fr',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/translations.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Recherche" href="../../search.html" />
    <link rel="next" title="Administration-Management-Common" href="admin-functional-common.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> VITAM - Manuel de développement
          

          
            
            <img src="../../_static/logo_vitam.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.6.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../dev-environnement.html">Configuration de l’environnement de développement</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../_toc.html">Détails par composant</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../access/_toc.html">Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="../common/_toc.html">Common</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="_toc.html">Functional administration</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">DAT : module functional-administration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#modules-et-packages">Modules et packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#classes-metiers">Classes métiers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="admin-functional-common.html">Administration-Management-Common</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin-functional-client.html">Administration-Management-client</a></li>
<li class="toctree-l3"><a class="reference internal" href="admin-functional-client.html#utilisation">Utilisation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ihm-demo/_toc.html">IHM demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ihm-recette/_toc.html">IHM demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingest/_toc.html">Ingest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal-security/_toc.html">Security-Internal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logbook/_toc.html">Logbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metadata/_toc.html">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing/_toc.html">Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/_toc.html">Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technical-administration/_toc.html">Technical administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../worker/_toc.html">Worker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workspace/_toc.html">Workspace</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../parallisation_tests.html">Parallélisation des tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugin-icu-elasticsearch.html">Plugin ICU Elasticsearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gestion-database.html">Gestion des bases de données</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../client-ressource-rest.html">Ressources et clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devstack_vm.html">Création d’une machine de dev contenant <em>Swift</em></a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">VITAM - Manuel de développement</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../_toc.html">Détails par composant</a> &raquo;</li>
        
          <li><a href="_toc.html">Functional administration</a> &raquo;</li>
        
      <li>DAT : module functional-administration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/include/functional-administration/admin-functional-dat.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dat-module-functional-administration">
<h1>DAT : module functional-administration<a class="headerlink" href="#dat-module-functional-administration" title="Lien permanent vers ce titre">¶</a></h1>
<p>Ce document présente l’ensemble du manuel développement concernant le développment du module
functional-administration qui identifie par la user story #71, qui contient :</p>
<ul class="simple">
<li>modules &amp; packages</li>
<li>classes métiers</li>
</ul>
<hr class="docutils" />
<div class="section" id="modules-et-packages">
<h2>Modules et packages<a class="headerlink" href="#modules-et-packages" title="Lien permanent vers ce titre">¶</a></h2>
<p>functional-administration</p>
<ul>
<li><p class="first">functional-administration-common : contenant des classes pour des traitements communs concernant le format référentiels, l’opération auprès de la base de données</p>
</li>
<li><p class="first">functional-administration-format : fournir des traitements de base pour les formats référentiels de VITAM</p>
<blockquote>
<div><ul class="simple">
<li>functional-administration-format-api  : définitions des APIs</li>
<li>functional-administration-format-core : implémentations des APIs</li>
<li>functional-administration-format-import</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">functional-administration-rule : fournir des traitements de base pour la gestion de règles administratives</p>
<blockquote>
<div><ul class="simple">
<li>functional-administration-rule-api  : Définition des APIs</li>
<li>functional-administration-rule-core : Impélmentation des APIs</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">functional-administration-accession-register : fournir des traitements de base pour la gestion des registres de fonds</p>
<blockquote>
<div><ul class="simple">
<li>functional-administration-accession-register-core : Impélmentation des traitements des registres de fonds</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">functional-administration-rest   : le serveur REST de functional-administration qui donnes des traitement sur les traitements de format référentiel et gestion de règles administratives.</p>
</li>
<li><p class="first">functional-administration-client  : client functional-administration qui sera utilisé par les autres modules pour les appels de traitement sur le format référentiel &amp; gestion de règles.</p>
</li>
<li><p class="first">functional-administration-contract    : fournis les traitements de base pour les contrat d’accès et les contrat d’entrées</p>
</li>
<li><p class="first">functional-administration-profile     : fournis les traitements de base pour les profile.</p>
</li>
<li><p class="first">functional-administration-context  : fournis les traitements de base pour les contextes</p>
</li>
</ul>
</div>
<div class="section" id="classes-metiers">
<h2>Classes métiers<a class="headerlink" href="#classes-metiers" title="Lien permanent vers ce titre">¶</a></h2>
<p>Dans cette section, nous présentons quelques classes principales dans des modules/packages
abordés ci-dessus.</p>
<div class="section" id="functional-administration-common">
<h3>functional-administration-common<a class="headerlink" href="#functional-administration-common" title="Lien permanent vers ce titre">¶</a></h3>
<p>fr.gouv.vitam.functional.administration.common</p>
<ul class="simple">
<li>FileFormat.java :</li>
</ul>
<p>une extension de VitamDocument définissant le référentiel des formats.</p>
<ul class="simple">
<li>ReferentialFile.java :</li>
</ul>
<p>interface définissant des opérations liées au référentiel des format : importation du fichier PRONOM, vérificaton du fichier PRONOM soumis, recherche d’un format existant et suppression du référentiel des formats.</p>
<ul class="simple">
<li>IngestContract.java :</li>
</ul>
<p>Le modèle de données des contracts d’entrée, ce modèle étend VitamDocument.</p>
<ul class="simple">
<li>AccessContract.java :</li>
</ul>
<p>Le modèle de données des contracts d’accès, ce modèle étend VitamDocument.</p>
<ul class="simple">
<li>Profile.java :</li>
</ul>
<p>Le modèle de données des profiles, ce modèle étend VitamDocument.</p>
<ul class="simple">
<li>Context.java :</li>
</ul>
<p>Le modèle de données des contextes, ce modèle étend VitamDocument.</p>
<p>fr.gouv.vitam.functional.administration.common.embed
ProfileFormat.class: Une enum embeded dans le profile qui sert à définir le format du fichier profile (xsd, rng)
ProfileStatus.class: Une enum embeded dans le profile qui sert à définir le status (ACTIVE, INACTIVE)</p>
<p>fr.gouv.vitam.functional.administration.common.exception : définir des exceptions concernant de opération sur le
référentiel des formats</p>
<p>fr.gouv.vitam.functional.administration.common.server
les classe de traitement auprès de la base de données mongodb pour les opérations de référentiel de format.</p>
<ul class="simple">
<li>FunctionalAdminCollections.java :</li>
</ul>
<p>définir la collection dans mongodb pour des données de formats référentiels</p>
<ul class="simple">
<li>MongoDbAccessReferential.java :</li>
</ul>
<p>interface définissant des opérations sur le format de fichier auprès de la base mongodb: insert d’une base de PRONOM, delete de la collection, recherche d’un format par son Id dans la base,recherche des format par conditions</p>
<ul class="simple">
<li>MongoDbAccessAdminImpl.java :</li>
</ul>
<p>une implémentation de l’interface MongoDbAccessReferential en extension le traitementMongoDbAccess commun pour mongodb</p>
</div>
<div class="section" id="functional-administration-format">
<h3>functional-administration-format<a class="headerlink" href="#functional-administration-format" title="Lien permanent vers ce titre">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>functional-administration-format-api</li>
<li>functional-administration-format-core</li>
</ul>
<ul class="simple">
<li>PronomParser.java : le script de traitement permettant de de récupérer l’ensemble de format en format json depuis d’un fichier PRONOM stantard en format XML contient des différents formats référentiels</li>
<li>ReferentialFormatFileImpl.java : implémentation de base des opération sur le format référentiel de fichier à partir d’un fichier PRONOM jusqu’à la base MongoDB.</li>
</ul>
<ul class="simple">
<li>functional-administration-format-import</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="functional-administration-rest">
<h3>functional-administration-rest<a class="headerlink" href="#functional-administration-rest" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li>AdminManagementResource.java : définir des ressources différentes pour le serveur REST functional-administration</li>
<li>AdminManagementApplication.java : créer &amp; lancer le serveur d’application avec une configuration</li>
<li>ContractResource.java : Définir l’endpoints de l’api rest des contrats (entrée et accès)</li>
<li>ProfileResource.java : Définir l’endpoint de l’api rest du profile</li>
<li>ContextResource.java : Définir l’endpoint de l’api rest du contexte</li>
</ul>
</div>
<div class="section" id="functional-administration-client">
<h3>functional-administration-client<a class="headerlink" href="#functional-administration-client" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li>AdminManagementClientRest.java : créer le client de et des fonctionnalités en se connectant au serveur REST</li>
<li>AdminManagementClientMock.java : créer le client et des fonctionnalités en se connectant au mock de serveur</li>
</ul>
</div>
<div class="section" id="functional-administration-rules">
<h3>functional-administration-rules<a class="headerlink" href="#functional-administration-rules" title="Lien permanent vers ce titre">¶</a></h3>
<blockquote>
<div><blockquote>
<div><ul class="simple">
<li>functional-administration-rules-api</li>
<li>functional-administration-rules-core</li>
</ul>
<ul class="simple">
<li>RulesManagerParser.java :permett de de parser le fichier de référentiel de règle de gestion d’extension .CSV et récupérer le contenu en ArrayNode</li>
<li>RulesManagerFileImpl.java : implémentation de base des opération sur les paramètres de référentiel de regle de gestion à partir de l’array Node générer après le parse de CSV File jusqu’à la base MongoDB.</li>
</ul>
</div></blockquote>
<p>Le contrôle au niveau de RulesManagerFileImpl de fichier CSV a été mis à jour .</p>
<p>Définition d’un référentiel valide en se basant sur les critères ci_dessous :</p>
<dl class="docutils">
<dt>Chaque RuleId doit être UNIQUE dans le référentiel</dt>
<dd><p class="first">RuleType doit être dans l’énumération suivante, non sensible à la casse : (AppraisalRule, AccessRule, StorageRule, DisseminationRule, ClassificationRule, ReuseRule)
RuleDuration :</p>
<blockquote class="last">
<div><ul class="simple">
<li>Depuis le fichier CSV, peut être un entier positif ou nul ou «&nbsp;unlimited&nbsp;» (insensible à la casse). La valeur réelle de l’enregistrement dans la collection est laissée à la discrétion des équipes de développements (ex «&nbsp;-1&nbsp;» si on veut garder une valeur numérique)</li>
<li>Permettre les manipulations sur des nombres (plus grand que.. plus petit que… Et calcul de date). Actuellement le champ est de type string, ce qui semble poser de nombreuses contraintes</li>
</ul>
<p>RuleMeasurement:</p>
<blockquote>
<div><p>RuleMeasurement doit être dans l’énumération suivante, non sensible à la casse : (year, month, day)
RuleMeasurement peut aussi avoir comme valeur, non sensible à la casse «&nbsp;second&nbsp;». Cette demande est dans l’optique de la story #740 et n’a de sens qu’à des fins de tests.
L’association de RuleDuration et RuleMeasurement doit être inférieure ou égale à 999 ans. (Mettre «&nbsp;15000 jours est donc autorisé)</p>
<p>L’unité de mesure (RuleMeasurement) doit être écrite en français dans l’interface, comme c’est déjà le cas actuellement : année(s), mois, jour(s), seconde(s)</p>
<p>Dans le cas des règles unlimited</p>
<ul class="simple">
<li>La valeur que doit renvoyer l’API lorsque la règle a une durée “unlimited” dépend du choix de design effectué pour l’enregistrement de la valeur “unlimited”</li>
<li>Dans l’IHM standard, la date de fin doit être au choix marquée comme :</li>
</ul>
<ul class="simple">
<li>«&nbsp;Illimitée (date de début inconnue)&nbsp;» : dans le cas où la date de fin n’est pas connue car la startDate n’est pas connue</li>
<li>«&nbsp;Illimitée (règle à durée illimitée)&nbsp;» : dans le cas où la date de fin ne peut pas être calculée car la durée de la règle est “unlimited”</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>Les durées des règles du fichier en cours d’import doivent être strictement supérieures ou égales aux durées minimales
demandées dans la configuration du tenant, pour cette catégorie de règle sur ce tenant
(la durée de la règle est la valeur de la durée RuleDuration + l’unité de mesure RuleMeasurement.)</li>
</ul>
</div></blockquote>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="functional-administration-accession-register">
<h3>functional-administration-accession-register<a class="headerlink" href="#functional-administration-accession-register" title="Lien permanent vers ce titre">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>functional-administration-accession-register-api</li>
<li>functional-administration-accession-register-core</li>
</ul>
<ul class="simple">
<li>ReferentialAccessionRegisterImpl.java :implémentation de base des opération sur la collection registre de fond .</li>
</ul>
<p>permet de créer une collection registre de fond et de faire la recherche par Service Producteur et l’affichage de détaile.</p>
</div></blockquote>
</div>
<div class="section" id="functional-administration-contract">
<h3>functional-administration-contract<a class="headerlink" href="#functional-administration-contract" title="Lien permanent vers ce titre">¶</a></h3>
<p>fr.gouv.vitam.functional.administration.contract.api</p>
<ul class="simple">
<li>ContractService.java :   Interface définissant les différentes opérations sur les contrats (contrat d’accès et contrat d’entrée)</li>
</ul>
<p>fr.gouv.vitam.functional.administration.contract.core</p>
<ul class="simple">
<li>AccessContractImpl.java : Classe d’implémentation pour la gestion des contrats d’accès</li>
<li>ContractStatus.java : Enum pour les différents status des contrat d’accès et des contrat d’entrées</li>
<li>ContractValidator.java : Interface fonctionnelle de validations des contrats</li>
<li>GenericContractValidator.java : Interface fonctionnelle de validations des contrats</li>
<li>IngestContractImpl.java : Classe d’implémentation pour la gestion des contrats d’entrées</li>
</ul>
</div>
<div class="section" id="functional-administration-profile">
<h3>functional-administration-profile<a class="headerlink" href="#functional-administration-profile" title="Lien permanent vers ce titre">¶</a></h3>
<p>fr.gouv.vitam.functional.administration.profile.api</p>
<ul class="simple">
<li>ProfileService.java :   Interface définissant les différentes opérations sur les profiles.</li>
</ul>
<p>fr.gouv.vitam.functional.administration.profile.api.impl</p>
<ul class="simple">
<li>ProfileServiceImpl.java :   Implémentation du service ProfileService.</li>
</ul>
<p>fr.gouv.vitam.functional.administration.profile.core</p>
<ul class="simple">
<li>ProfileManager.java : Gère toutes les opérations du logbook et toutes les opérations de validation concernant les profiles. Lors de la validation, il vérifie (si déjà existence dans la base de données, champs obligatoires, fichiers au format xsd ou rng valides, ..).</li>
<li>ProfileValidator.java : Interface fonctionnelle de validations des contrats</li>
</ul>
</div>
<div class="section" id="functional-administration-context">
<h3>functional-administration-context<a class="headerlink" href="#functional-administration-context" title="Lien permanent vers ce titre">¶</a></h3>
<p>fr.gouv.vitam.functional.administration.context.api</p>
<p>-ContextService.java : Interface définissant les différentes opérations sur les contextes</p>
<p>fr.gouv.vitam.functional.administration.context.core</p>
<p>-ContextServiceImpl.java : Implémentation du Service ContextService
-ContextValidator.java : Interface fonctionnelle de validations des contextes</p>
</div>
<div class="section" id="functional-administration-security-profile">
<h3>functional-administration-security-profile<a class="headerlink" href="#functional-administration-security-profile" title="Lien permanent vers ce titre">¶</a></h3>
<p>fr.gouv.vitam.functional.administration.profile.api.impl</p>
<ul class="simple">
<li>SecurityProfileService.java : Service gérant les différentes opérations sur les profiles de sécurité.</li>
</ul>
<p>fr.gouv.vitam.functional.administration.security.profile.core</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="admin-functional-common.html" class="btn btn-neutral float-right" title="Administration-Management-Common" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>