<!DOCTYPE html>
<html class="writer-html4" lang="fr" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.13.6. Paramètres &mdash; Documentation VITAM - Manuel de développement 6.1</title><link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../../_static/translations.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Recherche" href="../../../search.html" />
    <link rel="next" title="3.13.7. Uniform Resource Identifier (URI) (vitam)" href="Uri.html" />
    <link rel="prev" title="3.13.5. DAT : module Graph" href="graph-dat.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            VITAM - Manuel de développement
              <img src="../../../_static/logo_vitam.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                6.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html#rappels">Rappels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-environnement.html">Configuration de l’environnement de développement</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../_toc.html">Détails par composant</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../access/_toc.html">1. Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../collect/_toc.html">2. Collect</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../_toc.html">3. Common</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../introduction.html">3.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../GUID.html">3.2. Global Unique Identifier (GUID) pour Vitam</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Digest.html">3.3. Digest</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Logger.html">3.4. Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../JunitHelper.html">3.5. JunitHelper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client.html">3.6. Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../graph.html">3.7. DirectedCycle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../graph.html#graph">3.8. Graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../VitamCode.html">3.9. Code d’erreur Vitam</a></li>
<li class="toctree-l3"><a class="reference internal" href="../format-identifier.html">3.10. Common format identification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stockage.html">3.11. Common-storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vitam-metrics.html">3.12. Métriques dans VITAM</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="_toc.html">3.13. Common-private</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="certs-auth.html">3.13.1. Génération de certificats et de keystore</a></li>
<li class="toctree-l4"><a class="reference internal" href="esapi-utilisation.html">3.13.2. esapi utilisation</a></li>
<li class="toctree-l4"><a class="reference internal" href="format-identifier.html">3.13.3. Format Identifiers</a></li>
<li class="toctree-l4"><a class="reference internal" href="graph-introduction.html">3.13.4. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="graph-dat.html">3.13.5. DAT : module Graph</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">3.13.6. Paramètres</a></li>
<li class="toctree-l4"><a class="reference internal" href="Uri.html">3.13.7. Uniform Resource Identifier (URI) (vitam)</a></li>
<li class="toctree-l4"><a class="reference internal" href="shiro.html">3.13.8. Configuration de apache shiro</a></li>
<li class="toctree-l4"><a class="reference internal" href="shiro.html#presentation-authentification-via-certificats">3.13.9. Présentation authentification via certificats</a></li>
<li class="toctree-l4"><a class="reference internal" href="shiro.html#decryptage-de-shiro-ini">3.13.10. Décryptage de shiro.ini</a></li>
<li class="toctree-l4"><a class="reference internal" href="shiro.html#utilisation-des-certificats">3.13.11. Utilisation des certificats</a></li>
<li class="toctree-l4"><a class="reference internal" href="security-filter.html">3.13.12. Présentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="security-filter.html#classes-de-filtres">3.13.13. Classes de filtres</a></li>
<li class="toctree-l4"><a class="reference internal" href="security-filter.html#implementer-des-filters">3.13.14. Implémenter des filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="security-filter.html#appliquer-le-filtre-pour-vitam">3.13.15. Appliquer le filtre pour Vitam</a></li>
<li class="toctree-l4"><a class="reference internal" href="tenant-filter.html">3.13.16. Présentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="tenant-filter.html#classe-de-filtre">3.13.17. Classe de filtre</a></li>
<li class="toctree-l4"><a class="reference internal" href="tenant-filter.html#ajout-du-filtre">3.13.18. Ajout du filtre</a></li>
<li class="toctree-l4"><a class="reference internal" href="tenant-filter.html#modules-vitam-impactes">3.13.19. Modules Vitam impactés</a></li>
<li class="toctree-l4"><a class="reference internal" href="sanity-checker.html">3.13.20. Présentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="DefaultVitamApplicationConfiguration.html">3.13.21. Présentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="Execution-request-dsl.html">3.13.22. Implémentation de l’éxécution des requêtes mono-query DSL</a></li>
<li class="toctree-l4"><a class="reference internal" href="mongodb-securite.html">3.13.23. Implémentation de l’authentification</a></li>
<li class="toctree-l4"><a class="reference internal" href="secret-plateforme.html">3.13.24. Implémentation du secret de la plateforme</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../functional-administration/_toc.html">4. Functional administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ihm-demo/_toc.html">5. IHM demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ihm-recette/_toc.html">6. IHM demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ingest/_toc.html">7. Ingest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../internal-security/_toc.html">8. Security-Internal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../logbook/_toc.html">9. Logbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../metadata/_toc.html">10. Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../processing/_toc.html">11. Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../scheduler/_toc.html">12. Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../storage/_toc.html">13. Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../technical-administration/_toc.html">14. Technical administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../worker/_toc.html">15. Worker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../workspace/_toc.html">16. Workspace</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../parallisation_tests.html">Parallélisation des tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../plugin-icu-elasticsearch.html">Plugin ICU Elasticsearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gestion-database.html">Gestion des bases de données</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../client-ressource-rest.html">Ressources et clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devstack_vm.html">Création d’une machine de dev contenant <em>Swift</em></a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">VITAM - Manuel de développement</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../_toc.html">Détails par composant</a></li>
          <li class="breadcrumb-item"><a href="../_toc.html">3. Common</a></li>
          <li class="breadcrumb-item"><a href="_toc.html">3.13. Common-private</a></li>
      <li class="breadcrumb-item active">3.13.6. Paramètres</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/include/common/private/parametres.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="parametres">
<h1>3.13.6. Paramètres<a class="headerlink" href="#parametres" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="presentation">
<h2>3.13.6.1. Présentation<a class="headerlink" href="#presentation" title="Lien permanent vers ce titre">¶</a></h2>
<p>Dans tout le projet Vitam sont utilisés différents paramètres transmis aux différentes classes ou au différentes méthodes. Afin de ne pas bloquer toute évolution, il est recommandé d’utiliser une classe de paramètres (afin d’éviter de modifier le nombre de paramètres en signature de méthodes) ou d’utiliser une Map.</p>
</div>
<div class="section" id="principe">
<h2>3.13.6.2. Principe<a class="headerlink" href="#principe" title="Lien permanent vers ce titre">¶</a></h2>
<p>L’idée ici est de mettre en place une mécanique de paramètres commune à tous les modules Vitam. Pour se faire, une
interface VitamParameter a été créée.
Afin de créer une nouvelle classe de paramètre, il faut alors implémenter cette interface qui retourne une Map de paramètre et un Set de noms de paramètre obligatoires.
Cette interface est générique et prend comme typage une énum qui dispose du nom des paramètres.</p>
<p>Une classe utilitaire, ParameterHelper a été mise en place afin de vérifier les champs obligatoires. Elle s’appuie sur les deux méthodes définies dans l’interface VitamParameter.</p>
</div>
<div class="section" id="mise-en-place">
<h2>3.13.6.3. Mise en place<a class="headerlink" href="#mise-en-place" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="nom-des-parametres">
<h3>3.13.6.3.1. Nom des paramètres<a class="headerlink" href="#nom-des-parametres" title="Lien permanent vers ce titre">¶</a></h3>
<p>Nous souhaitons mettre en place une classe de paramètre pour le module storage, StorageParameter.
Il faut dans un premier temps une énum disposant des noms de paramètre.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">enum</span> <span class="n">StorageParameterName</span> <span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">    * Nom du premier paramètre</span>
<span class="cm">    **/</span>
    <span class="n">field1</span><span class="p">,</span>
    <span class="cm">/**</span>
<span class="cm">    * Nom du deuxième paramètre</span>
<span class="cm">    **/</span>
    <span class="n">field2</span><span class="p">,</span>
    <span class="cm">/**</span>
<span class="cm">    * Nom du troisième paramètre</span>
<span class="cm">    **/</span>
    <span class="n">field3</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="interface">
<h3>3.13.6.3.2. Interface<a class="headerlink" href="#interface" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ensuite, une interface va définir les différentes methodes nécéssaires à la classe de paramètre («&nbsp;définition du
contrat&nbsp;») tout en héritant de
l’interface VitamParameter (afin que la classe implémentant cette nouvelle interface implémente les deux méthodes
getMapParameters et getMandatoriesParameters.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm">* Exemple d&#39;interface de paramètres</span>
<span class="cm">**/</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">StorageParameters</span> <span class="kd">extends</span> <span class="n">VitamParameter</span><span class="o">&lt;</span><span class="n">StorageParameterName</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * Put parameterValue on mapParameters with parameterName key &lt;br /&gt;</span>
<span class="cm">     * &lt;br /&gt;</span>
<span class="cm">     * If parameterKey already exists, then override it (no check)</span>
<span class="cm">     *</span>
<span class="cm">     * @param parameterName the key of the parameter to put on the parameter map</span>
<span class="cm">     * @param parameterValue the value to put on the parameter map</span>
<span class="cm">     * @return actual instance of WorkerParameter (fluent like)</span>
<span class="cm">     * @throws IllegalArgumentException if the parameterName is null or if parameterValue is null or empty</span>
<span class="cm">     **/</span>
    <span class="n">StorageParameters</span> <span class="nf">putParameterValue</span><span class="p">(</span><span class="n">StorageParameterName</span> <span class="n">parameterName</span><span class="p">,</span> <span class="n">String</span> <span class="n">parameterValue</span><span class="p">);</span>
    <span class="cm">/**</span>
<span class="cm">     * Get the parameter according to the parameterName</span>
<span class="cm">     *</span>
<span class="cm">     * @param parameterName the wanted parameter</span>
<span class="cm">     * @return the value or null if not found</span>
<span class="cm">     * @throws IllegalArgumentException throws if parameterName is null</span>
<span class="cm">     **/</span>
    <span class="n">String</span> <span class="nf">getParameterValue</span><span class="p">(</span><span class="n">StorageParameterName</span> <span class="n">parameterName</span><span class="p">);</span>
    <span class="cm">/**</span>
<span class="cm">     * Set from map using String as Key</span>
<span class="cm">     *</span>
<span class="cm">     * @param map the map parameters to set</span>
<span class="cm">     * @return the current instance of WorkerParameters</span>
<span class="cm">     * @throws IllegalArgumentException if parameter key is unknown or if the map is null</span>
<span class="cm">     **/</span>
    <span class="n">StorageParameters</span> <span class="nf">setMap</span><span class="p">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">map</span><span class="p">);</span>
    <span class="cm">/**</span>
<span class="cm">    * Get the field1 value</span>
<span class="cm">    *</span>
<span class="cm">    * @return the field1&#39;s value</span>
<span class="cm">    **/</span>
    <span class="n">String</span> <span class="nf">getStorageParameterField1</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="possibilite-d-avoir-une-classe-abstraite">
<h3>3.13.6.3.3. Possibilité d’avoir une classe abstraite<a class="headerlink" href="#possibilite-d-avoir-une-classe-abstraite" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le but est d’implémenter cette interface. Cependant, il est possible de vouloir plusieurs classes de paramètres en
fonction des besoins. Il est alors possible de mettre en place une classe abstraite qui implémente les méthodes
communes aux différentes classes de paramètre (par exemple les getters / setters).</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">AbstractStorageParameters</span> <span class="kd">implements</span> <span class="n">StorageParameters</span> <span class="p">{</span>
    <span class="nd">@JsonIgnore</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">StorageParameterName</span><span class="p">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">mapParameters</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>
    <span class="nd">@JsonIgnore</span>
    <span class="kd">private</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">StorageParameterName</span><span class="o">&gt;</span> <span class="n">mandatoryParameters</span><span class="p">;</span>
    <span class="n">AbstractStorageParameters</span><span class="p">(</span><span class="kd">final</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">StorageParameterName</span><span class="o">&gt;</span> <span class="n">mandatory</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">mandatoryParameters</span> <span class="o">=</span> <span class="n">mandatory</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nd">@JsonCreator</span>
    <span class="kd">protected</span> <span class="nf">AbstractStorageParameters</span><span class="p">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">map</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">mandatoryParameters</span> <span class="o">=</span> <span class="n">StorageParametersFactory</span><span class="p">.</span><span class="na">getDefaultMandatory</span><span class="p">();</span>
        <span class="n">setMap</span><span class="p">(</span><span class="n">map</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nd">@JsonIgnore</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">StorageParameterName</span><span class="o">&gt;</span> <span class="nf">getMandatoriesParameters</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">Collections</span><span class="p">.</span><span class="na">unmodifiableSet</span><span class="p">(</span><span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">mandatoryParameters</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="nd">@JsonIgnore</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">StorageParameterName</span><span class="p">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="nf">getMapParameters</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">Collections</span><span class="p">.</span><span class="na">unmodifiableMap</span><span class="p">(</span><span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">mapParameters</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="nd">@JsonIgnore</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">WorkerParameters</span> <span class="nf">putParameterValue</span><span class="p">(</span><span class="n">StorageParameterName</span> <span class="n">parameterName</span><span class="p">,</span> <span class="n">String</span> <span class="n">parameterValue</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">ParameterHelper</span><span class="p">.</span><span class="na">checkNullOrEmptyParameter</span><span class="p">(</span><span class="n">parameterName</span><span class="p">,</span> <span class="n">parameterValue</span><span class="p">,</span> <span class="n">getMandatoriesParameters</span><span class="p">());</span>
        <span class="n">mapParameters</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">parameterName</span><span class="p">,</span> <span class="n">parameterValue</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nd">@JsonIgnore</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getParameterValue</span><span class="p">(</span><span class="n">StorageParameterName</span> <span class="n">parameterName</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">ParametersChecker</span><span class="p">.</span><span class="na">checkParameter</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">ERROR_MESSAGE</span><span class="p">,</span> <span class="s">&quot;parameterName&quot;</span><span class="p">),</span> <span class="n">parameterName</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">mapParameters</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">parameterName</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nd">@JsonIgnore</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">StorageParameters</span> <span class="nf">setMap</span><span class="p">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">map</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">ParametersChecker</span><span class="p">.</span><span class="na">checkParameter</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">ERROR_MESSAGE</span><span class="p">,</span> <span class="s">&quot;map&quot;</span><span class="p">),</span> <span class="n">map</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">String</span> <span class="n">key</span> <span class="p">:</span> <span class="n">map</span><span class="p">.</span><span class="na">keySet</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">mapParameters</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">WorkerParameterName</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="n">map</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nd">@JsonIgnore</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getField1</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">mapParameters</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">StorageParameterName</span><span class="p">.</span><span class="na">field1</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="possibilite-d-avoir-une-factory">
<h3>3.13.6.3.4. Possibilité d’avoir une factory<a class="headerlink" href="#possibilite-d-avoir-une-factory" title="Lien permanent vers ce titre">¶</a></h3>
<p>On voit dans le code d’exemple l’utilisation d’une factory qui permet d’obetnir la bonne implémentation de la classe de paramètres. En effet, au travers de la factory il est facilement possible de mettre en place les champs requis en fonction des besoins. Par exemple, certains paramètres peuvent être obligatoire pour toutes les implémentations alors que certains sont en plus requis pour certaines implémentations.
Voir ici s’il n’est pas possible de faire une factory commune.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">WorkerParametersFactory</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">StorageParameterName</span><span class="o">&gt;</span> <span class="n">genericMandatories</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;&gt;</span><span class="p">();</span>
    <span class="kd">static</span> <span class="p">{</span>
        <span class="n">genericMandatories</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">StorageParameterName</span><span class="p">.</span><span class="na">field1</span><span class="p">);</span>
        <span class="n">genericMandatories</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">StorageParameterName</span><span class="p">.</span><span class="na">field2</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">private</span> <span class="nf">StorageParametersFactory</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// do nothing</span>
    <span class="p">}</span>
    <span class="c1">// Méthodes de la factory</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="code-exemple">
<h3>3.13.6.3.5. Code exemple<a class="headerlink" href="#code-exemple" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ensuite, là où les paramètres sont nécéssaires, il suffit d’utiliser l’interface afin d’être le plus générique possible.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">methode</span><span class="p">(</span><span class="n">StorageParameters</span> <span class="n">parameters</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Check des paramètres</span>
    <span class="n">ParameterHelper</span><span class="p">.</span><span class="na">checkNullOrEmptyParameters</span><span class="p">(</span><span class="n">parameters</span><span class="p">);</span>
    <span class="c1">// Récupération des paramètres</span>
    <span class="n">String</span> <span class="n">value</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">.</span><span class="na">getField1</span><span class="p">();</span>
    <span class="n">String</span> <span class="n">value</span> <span class="mi">2</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">StorageParameterName</span><span class="p">.</span><span class="na">field2</span><span class="p">);</span>
    <span class="c1">// etc...</span>
<span class="p">}</span>
<span class="c1">// Exemple d&#39;ajout de champs requis</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">methode2</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Set</span><span class="o">&lt;</span><span class="n">StorageParameterName</span><span class="o">&gt;</span> <span class="n">mandatoryToAdd</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Set</span><span class="o">&lt;&gt;</span><span class="p">();</span>
    <span class="n">mandatoryToAdd</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">StorageParameterName</span><span class="p">.</span><span class="na">field3</span><span class="p">);</span>
    <span class="c1">// Initialisation des paramètres</span>
    <span class="n">StorageParameters</span> <span class="n">parameters</span> <span class="o">=</span> <span class="n">StorageParameterFactory</span><span class="p">.</span><span class="na">newStorageParameters</span><span class="p">(</span><span class="n">mandatoryToAdd</span><span class="p">);</span>
    <span class="c1">// etc..</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="exemple-d-utilisation-dans-le-code-vitam">
<h2>3.13.6.4. Exemple d’utilisation dans le code Vitam<a class="headerlink" href="#exemple-d-utilisation-dans-le-code-vitam" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il est possible de retrouver l’utilisation des paramètres génériques Vitam dans les modules suivants :</p>
<ul class="simple">
<li>Processing</li>
<li>Logbook</li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="graph-dat.html" class="btn btn-neutral float-left" title="3.13.5. DAT : module Graph" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Uri.html" class="btn btn-neutral float-right" title="3.13.7. Uniform Resource Identifier (URI) (vitam)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>