

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="fr" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="fr" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5.5. Stockage des données &mdash; Documentation VITAM - Architecture 2.6.1</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'2.6.1',
              LANGUAGE:'fr',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="5.6. Concentration et exploitation des logs applicatifs" href="05-logs-architecture.html" />
    <link rel="prev" title="5.4. Architecture technique détaillée" href="03-technical-architecture.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> VITAM - Architecture
          

          
            
            <img src="../_static/logo_vitam.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.6.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html#rappels">2. Rappels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/_toc.html">3. Vue d’ensemble</a></li>
<li class="toctree-l1"><a class="reference internal" href="../archi-applicative/_toc.html">4. Architecture applicative</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="_toc.html">5. Architecture technique / exploitation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="principes/_toc.html">5.1. Principes d’architecture technique</a></li>
<li class="toctree-l2"><a class="reference internal" href="01-services-techniques.html">5.2. Services techniques fournis par la solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="02-dependencies.html">5.3. Composants logiciels utilisés</a></li>
<li class="toctree-l2"><a class="reference internal" href="03-technical-architecture.html">5.4. Architecture technique détaillée</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.5. Stockage des données</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#offre-filesystem">5.5.1. Offre filesystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="#offre-swift">5.5.2. Offre Swift</a></li>
<li class="toctree-l3"><a class="reference internal" href="#offre-s3">5.5.3. Offre S3</a></li>
<li class="toctree-l3"><a class="reference internal" href="#offre-tape-library">5.5.4. Offre Tape-library</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="05-logs-architecture.html">5.6. Concentration et exploitation des logs applicatifs</a></li>
<li class="toctree-l2"><a class="reference internal" href="06-metrics-architecture.html">5.7. Métriques applicatives</a></li>
<li class="toctree-l2"><a class="reference internal" href="07-deployment-tooling.html">5.8. Outillage de déploiement</a></li>
<li class="toctree-l2"><a class="reference internal" href="08-consul.html">5.9. Service registry</a></li>
<li class="toctree-l2"><a class="reference internal" href="10-it-services.html">5.10. Dépendances aux services d’infrastructures</a></li>
<li class="toctree-l2"><a class="reference internal" href="15-services.html">5.11. Composants déployés</a></li>
<li class="toctree-l2"><a class="reference internal" href="20-deployment-guidelines.html">5.12. Guidelines de déploiement</a></li>
<li class="toctree-l2"><a class="reference internal" href="25-resources.html">5.13. Eléments de dimensionnement</a></li>
<li class="toctree-l2"><a class="reference internal" href="90-flux-all.html">5.14. Matrice des flux</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../securite/_toc.html">6. Sécurité</a></li>
<li class="toctree-l1"><a class="reference internal" href="../include/_toc.html">7. Architecture détaillée</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">VITAM - Architecture</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="_toc.html">5. Architecture technique / exploitation</a> &raquo;</li>
        
      <li>5.5. Stockage des données</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/archi-exploit-infra/04-data-storage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="stockage-des-donnees">
<span id="datastorage"></span><h1>5.5. Stockage des données<a class="headerlink" href="#stockage-des-donnees" title="Lien permanent vers ce titre">¶</a></h1>
<div class="admonition seealso">
<p class="first admonition-title">Voir aussi</p>
<p class="last">Cette section s’appuie fortement sur <a class="reference internal" href="../archi-applicative/11-data-architecture-multisite.html"><span class="doc">la description de l’architecture des données</span></a>, en particulier en ce qui concerne les données d’archive.</p>
</div>
<p>Les offres de stockage VITAM portent la référence des données concernant les archives hébergées par le système VITAM : leur contenu binaire (BDO), mais également les métadonnées associées au sens large (AU, GOT, journaux).</p>
<p>VITAM possède trois implémentations possibles d’offres de stockage «&nbsp;classiques&nbsp;» : l’implémentation basée sur un système de fichiers, l’implémentation Swift et l’implémentation S3.
En complément, une implémention <em>Tape-library</em> permet l’usage de robotique de cartouches magnétiques.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Dans cette version, une offre de stockage <em>Tape-library</em>, aussi désignée Offre froide, doit être utilisée conjointement avec une offre disque «&nbsp;classique&nbsp;». Une installation de Vitam ne peut donc pas fonctionner correctement en utilisant que des offres froides en terme de stockage. Les offres froides ne peuvent pas être définies comme offres référentes (elles doivent rester secondaires)</p>
</div>
<p>VITAM peut stocker les données dans plusieurs offres de stockage en parallèle afin de se parer contre la perte de données. Les deux types d’offres peuvent être utilisées seuls ou ensemble sur des offres de stockage différentes : ainsi, on peut configurer VITAM pour déposer les données dans 2 offres de stockage filesystem disjointes, ou dans une offre de stockage filesystem et une offre Swift, ou encore dans une offre de stockage filesystem et 2 offres Swift différentes (se basant sur 2 clusters Swift distincts) ; tout dépend des contraintes de non-perte de données, de scalabilité et de résilience à la panne qui sont abordés dans la description des types d’offres ci-dessous.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Un mécanisme de resynchronisation d’une offre de stockage avec une autre, migrant de fait les données entre offres, est disponible en mode complet (la procédure est décrite dans le <a class="reference internal" href="../introduction.html#term-dex"><span class="xref std std-term">DEX</span></a>). La resynchronisation partielle n’est pas supportée dans cette version du système VITAM, mais est prévue pour une future release.</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Dans le but d’assurer au maximum la pérennité des données conservées dans le système VITAM, il est très fortement conseillé de stocker les données dans au moins 2 technologies de stockage différentes (ex: 2 stockages objets de constructeurs et technologies différentes, un stockage objet et un stockage bloc, 2 stockages bloc de constructeurs et technologies différentes, …)</p>
</div>
<div class="section" id="offre-filesystem">
<h2>5.5.1. Offre filesystem<a class="headerlink" href="#offre-filesystem" title="Lien permanent vers ce titre">¶</a></h2>
<p>L’offre filesystem permet de stocker les données sur un système de fichiers accessible localement par le composant «&nbsp;storage-offer&nbsp;».</p>
<p>Points positifs :</p>
<ul class="simple">
<li>facile à mettre en place</li>
<li>facile à exploiter</li>
<li>facile à sauvegarder</li>
</ul>
<p>Points négatifs :</p>
<ul>
<li><p class="first">pour une offre de stockage, seule une seule instance du service storage-offer peut être active à un instant donné, ce qui implique que cette offre :</p>
<blockquote>
<div><ul class="simple">
<li>n’est pas scalable par multi-instanciation (i.e. horizontalement) ;</li>
<li>ne possède pas de solution de haute disponibilité portée par la solution logicielle.</li>
</ul>
</div></blockquote>
</li>
</ul>
<p>Par conséquent, elle est particulièrement adaptée pour les déploiements de test ou de petite taille (ordre de grandeur : &lt; 10 To), mais est à déconseiller pour les déploiements sur des volumétries importantes.</p>
<div class="admonition caution">
<p class="first admonition-title">Prudence</p>
<p class="last">L’offre filesystem nécessite un système de fichiers acceptant les attributs étendus (ex: XFS) ; en particulier, il n’est donc pas possible d’héberger les données sur un montage NFS (NFS ne supportant pas les attributs étendus).</p>
</div>
</div>
<div class="section" id="offre-swift">
<h2>5.5.2. Offre Swift<a class="headerlink" href="#offre-swift" title="Lien permanent vers ce titre">¶</a></h2>
<p>L’offre Swift permet de stocker les données sur un stockage objet implémentant l’API Swift.</p>
<p>Points positifs :</p>
<ul class="simple">
<li>scalable : storage-offer se comporte dans ce scénario comme une passerelle vers l’API Swift ; il est donc multi-instanciable au sein d’une offre de stockage.</li>
<li>consomme une API normalisée : elle est donc compatible avec un grand nombre d’implémentations différentes de Swift.</li>
</ul>
<p>Points négatifs :</p>
<ul class="simple">
<li>nécessite la mise en place et l’exploitation d’un stockage objet, ce qui est potentiellement plus complexe et moins courant que la mise à disposition d’un simple stockage bloc ou fichier.</li>
</ul>
<p>Par conséquent, elle est particulièrement adaptée pour les déploiements en production de forte volumétrie.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Dans cette version de la solution logicielle <a class="reference internal" href="../introduction.html#term-vitam"><span class="xref std std-term">VITAM</span></a>, l’implémentation Swift n’est en théorie pas obligée de permettre l’upload de fichiers de taille non connue par avance (mode «&nbsp;chunk encoding&nbsp;») ; cependant, aucun test pertinent n’a pu être effectué faute d’implémentation disponible. Merci de remonter à l’équipe support tout bug associé à ce comportement.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p class="last">Seules les API d’authentification keystone v1 et v3 sont aujourd’hui officiellement supportées par la solution logicielle VITAM.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Par tenant VITAM utilisé, 17 <em>containers</em> sont créés.</p>
</div>
</div>
<div class="section" id="offre-s3">
<h2>5.5.3. Offre S3<a class="headerlink" href="#offre-s3" title="Lien permanent vers ce titre">¶</a></h2>
<p>L’offre S3 permet de stocker les données sur un stockage objet implémentant l’API S3.</p>
<p>Les points positifs et négatifs sont les mêmes que pour l’offre Swift.</p>
<p>L’offre S3 utilise le client java S3 du SDK Amazon V1. De ce fait la compatibilité du stockage en API S3 choise sera limitée à sa compatibilité avec le client pour pouvoir utiliser l’offre S3.
Pour que VITAM soit compatible avec l’API S3 les noms de conteneurs sont transformés pour obtenir des noms de bucket valids :</p>
<ul class="simple">
<li>remplacement de tous les caractères non alphanumériques par des “.”</li>
<li>suppression des “.” au début et à la fin</li>
<li>passage de tous les caractères en minuscule</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Dans cette version de la solution logicielle <a class="reference internal" href="../introduction.html#term-vitam"><span class="xref std std-term">VITAM</span></a>, l’implémentation S3 fournie par VITAM nécessite la taille du fichier pour l’envoyer dans le stockage S3.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Par tenant VITAM utilisé, 17 <em>containers</em> sont créés.</p>
</div>
</div>
<div class="section" id="offre-tape-library">
<h2>5.5.4. Offre Tape-library<a class="headerlink" href="#offre-tape-library" title="Lien permanent vers ce titre">¶</a></h2>
<p>L’offre <em>Tape-library</em>, aussi désignée Offre Froide, permet de stocker les données sur des librairies de cartouches magnétiques.</p>
<p>Elle s’appuie sur des commandes linux standard pour manipuler les éléments robotiques. Elle est donc a priori compatible avec tous les matériels compatibles Linux.</p>
<p>Points positifs :</p>
<ul class="simple">
<li>Froide : a contrario des offres disques déjà utilisables dans Vitam (FS ou Objet), l’accès aux données sur les cartouches n’est pas immédiat. Il nécessite le montage des cartouches dans des lecteurs, qui sont en nombre limités. En cas de corruption des données des offres disques, sa répercussion vers les données archivées sur cartouches serait très lente. C’est une garantie de sécurité supplémentaire.</li>
<li>Peu onéreuse : comparée à un stockage disque, un stockage bande est moins onéreux: 1 To de stockage sur LTO revient à 10€ HT.</li>
<li>Externalisable : les cartouches peuvent être extraites de la librairie une fois les données inscrites, et stockées dans un local sécurisé tiers.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Dans sa version actuelle, Vitam ne prend pas en charge les opérations d’externalisation. Ce process ne peut être réalisé que manuellement.</p>
</div>
<p>Points négatifs :</p>
<ul class="simple">
<li>Nécessite la mise en place et l’exploitation d’une librairie de cartouches. Cela induit les manipulations de médias pour externalisation, ajout de cartouches neuves, etc … Afin de ne pas ralentir le fonctionnement en écriture de l’application durant ces manipulations, les données sont stockées dans un espace disque «&nbsp;tampon&nbsp;» avant d’être transférées sur bandes.</li>
</ul>
<p>L’offre Tape-library utilise les commandes standard <code class="docutils literal notranslate"><span class="pre">mt</span></code> et <code class="docutils literal notranslate"><span class="pre">mtx</span></code> pour manipuler les lecteurs de bandes et la librairie. Ces outils doivent être présents sur le serveur supportant l’offre.
Cette même machine doit également avoir accès à la librairie soit par attachement direct, soit par le biais d’un accès distant ( ex: iscsi )</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">L’usage des commandes mt et mtx nécessite d’associer le user vitam au groupe unix «&nbsp;tape&nbsp;»</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="05-logs-architecture.html" class="btn btn-neutral float-right" title="5.6. Concentration et exploitation des logs applicatifs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="03-technical-architecture.html" class="btn btn-neutral float-left" title="5.4. Architecture technique détaillée" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>