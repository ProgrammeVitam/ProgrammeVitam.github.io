

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="fr" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="fr" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5.1.4. Packaging &mdash; Documentation VITAM - Architecture 2.15.1-1</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'2.15.1-1',
              LANGUAGE:'fr',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/translations.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Recherche" href="../../search.html" />
    <link rel="next" title="5.1.5. Déploiement de la solution" href="30-principles-deployment.html" />
    <link rel="prev" title="5.1.3. Principes sur les communications inter-services et le clustering" href="10-principles-networking.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> VITAM - Architecture
          

          
            
            <img src="../../_static/logo_vitam.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.15.1-1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html#rappels">2. Rappels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/_toc.html">3. Vue d’ensemble</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archi-applicative/_toc.html">4. Architecture applicative</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../_toc.html">5. Architecture technique / exploitation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="_toc.html">5.1. Principes d’architecture technique</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="00-principles-services.html">5.1.1. Principes communs et environnement des services</a></li>
<li class="toctree-l3"><a class="reference internal" href="02-principles-users-rights.html">5.1.2. Utilisateurs, dossiers &amp; droits</a></li>
<li class="toctree-l3"><a class="reference internal" href="10-principles-networking.html">5.1.3. Principes sur les communications inter-services et le clustering</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">5.1.4. Packaging</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#principes-communs">5.1.4.1. Principes communs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#depots">5.1.4.2. Dépôts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#prise-en-compte-de-la-configuration-dans-le-packaging">5.1.4.3. Prise en compte de la configuration dans le packaging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="30-principles-deployment.html">5.1.5. Déploiement de la solution</a></li>
<li class="toctree-l3"><a class="reference internal" href="40-principles-monitoring.html">5.1.6. Suivi de l’état du système</a></li>
<li class="toctree-l3"><a class="reference internal" href="50-principles-technical-administration.html">5.1.7. Administration technique</a></li>
<li class="toctree-l3"><a class="reference internal" href="60-principles-data-management.html">5.1.8. Gestion des données du système</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../01-services-techniques.html">5.2. Services techniques fournis par la solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02-dependencies.html">5.3. Composants logiciels utilisés</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03-technical-architecture.html">5.4. Architecture technique détaillée</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04-data-storage.html">5.5. Stockage des données</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05-logs-architecture.html">5.6. Concentration et exploitation des logs applicatifs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06-metrics-architecture.html">5.7. Métriques applicatives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../07-deployment-tooling.html">5.8. Outillage de déploiement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08-consul.html">5.9. Service registry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10-it-services.html">5.10. Dépendances aux services d’infrastructures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../15-services.html">5.11. Composants déployés</a></li>
<li class="toctree-l2"><a class="reference internal" href="../20-deployment-guidelines.html">5.12. Guidelines de déploiement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../25-resources.html">5.13. Eléments de dimensionnement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../90-flux-all.html">5.14. Matrice des flux</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../securite/_toc.html">6. Sécurité</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../include/_toc.html">7. Architecture détaillée</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">VITAM - Architecture</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../_toc.html">5. Architecture technique / exploitation</a> &raquo;</li>
        
          <li><a href="_toc.html">5.1. Principes d’architecture technique</a> &raquo;</li>
        
      <li>5.1.4. Packaging</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/archi-exploit-infra/principes/20-principles-packaging.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="packaging">
<h1>5.1.4. Packaging<a class="headerlink" href="#packaging" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="principes-communs">
<h2>5.1.4.1. Principes communs<a class="headerlink" href="#principes-communs" title="Lien permanent vers ce titre">¶</a></h2>
<p>Tout package doit respecter les principes suivants :</p>
<ul class="simple">
<li>Nom des packages : <code class="docutils literal notranslate"><span class="pre">vitam-&lt;id&gt;</span></code> du package</li>
<li>Version du package : Numéro de «&nbsp;release&nbsp;» du projet Vitam</li>
</ul>
<p>Les dossiers (ainsi que les droits associés) compris dans les packages doivent respecter les principes dictés dans <a class="reference internal" href="02-principles-users-rights.html"><span class="doc">la section dédiée</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Les limitations associés au format de packaging choisi (packaging natif, rpm / deb selon l’OS cible) sont :</p>
<ul class="last simple">
<li>L’instanciation d’une seule instance d’un même moteur par machine (il n’est ainsi pas possible d’installer 2 moteurs d’exécution sur le même OS) ;</li>
<li>La redondance de certains contenus dans les packages (ex: les librairies Java sont embarquées dans les packages, et non tirées dans les dépendances de package)</li>
</ul>
</div>
<p>Les fichiers de configuration sont gérés par l’outil de déploiement de manière externe aux packages ; ils ne sont pas inclus dans les packages.</p>
<p>Les composants de la solution logicielle <a class="reference internal" href="../../introduction.html#term-vitam"><span class="xref std std-term">VITAM</span></a> sont tous disponibles sous forme de packages natifs aux distributions supportées (rpm pour CentOS 7, deb pour Debian 9 (stretch)) ; ceci inclut notamment :</p>
<ul class="simple">
<li>L’usage des pré-requis (au sens Require ou Depends) nativement inclus dans la distribution concernée ;</li>
<li>L’arborescence des répertoires OS de la distribution concernée ;</li>
<li>L’usage du système de démarrage systemd.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Seuls les paquets binaires cibles sont disponibles ; les paquets sources (SRPM pour CentOS, par exemple) ne seront pas fournis, les sources étant disponibles dans le dépôt git public.</p>
</div>
</div>
<div class="section" id="depots">
<h2>5.1.4.2. Dépôts<a class="headerlink" href="#depots" title="Lien permanent vers ce titre">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">La typologie des dépôts présentée ci-dessous a notamment pour but de permettre l’installation de VITAM sur des environnements présentant un accès restreint à Internet (i.e. limité aux miroirs des dépôts d’update standard des distributions linux). Par conséquent, aucun dépôt externe autre que les dépôts natifs des distributions Linux n’est requis.</p>
</div>
<p>L’installation de VITAM s’appuie sur 2 dépôts internes différents :</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">vitam-product</span></code> : ce dépôt hégerge les packages des logiciels développés dans le cadre de VITAM ; ces packages sont maintenus par VITAM, et les licences d’utilisations associées sont celles de VITAM.</li>
<li><code class="docutils literal notranslate"><span class="pre">vitam-external</span></code> : ce dépôt héberge les packages des logiciels requis par l’installation de VITAM mais non présents dans les dépôts natifs de la distribution. Ces packages sont fournis par VITAM, mais sont redistribués sans modifications de la part de VITAM. Ils ne sont en particulier pas maintenus par VITAM, et les licences d’utilisation restent celles des packages originaux.</li>
</ul>
</div></blockquote>
<p>Le contenu de ces dépôts est présent dans la distribution de la solution VITAM.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Un dépôt supplémentaire, pour les <em>griffins</em>, permet de déployer également les briques logicielles relatives à la préservation.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">La création, configuration et initialisation des dépôts internes à partir des packages livrés est un pré-requis à l’installation de VITAM ; ces tâches ne sont pas incluses dans l’installation de la solution logicielle afin de pouvoir respecter la manière d’héberger des dépôts natifs de distributions Linux qui varie grandement selon les différents gestionnaires d’infrastructure.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Astuce</p>
<p class="last">En outre, le programme VITAM mettra à disposition un miroir externe accessible sur Internet comportant les paquets à jour pour les dépôts internes mentionnés ci-dessus.</p>
</div>
<p>En plus des paquets logiciels livrés, l’installation de la solution VITAM requiert des dépôts nativement disponibles dans les distributions cibles.</p>
<div class="section" id="centos">
<h3>5.1.4.2.1. CentOS<a class="headerlink" href="#centos" title="Lien permanent vers ce titre">¶</a></h3>
<p>VITAM s’appuie sur les dépôts suivants :</p>
<ul class="simple">
<li>Centos 7 (Base, Extras) : il s’agit des dépôts standard de la distribution</li>
<li>EPEL 7 (Extra Packages for Enterprise Linux) : il s’agit d’un dépôt maintenu par Fedora et fournissant un ensemble de packages complétant ceux de RHEL/Centos</li>
</ul>
</div>
<div class="section" id="debian">
<h3>5.1.4.2.2. Debian<a class="headerlink" href="#debian" title="Lien permanent vers ce titre">¶</a></h3>
<p>VITAM s’appuie sur les dépôts suivants :</p>
<ul class="simple">
<li>Debian stretch (dépôts main dans stretch, stretch-updates et security) : il s’agit des dépôts standard de la distribution</li>
<li>stretch-backports : il s’agit d’un backport de paquets plus récents non disponibles au moment de la publication de la version Debian</li>
</ul>
</div>
</div>
<div class="section" id="prise-en-compte-de-la-configuration-dans-le-packaging">
<h2>5.1.4.3. Prise en compte de la configuration dans le packaging<a class="headerlink" href="#prise-en-compte-de-la-configuration-dans-le-packaging" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="id1">
<h3>5.1.4.3.1. CentOS<a class="headerlink" href="#id1" title="Lien permanent vers ce titre">¶</a></h3>
<p>Conformément aux usages RPM de Centos/RHEL, les packages ne contiennent pas dans les pré/post action d’arrêt/démarrage/redémarrage de services.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">La configuration de démarrage des services et leur démarrage (a minima initial) est de la responsabilité de l’outillage de déploiement.</p>
</div>
<p>Contrairement aux usages de RPM, les fichiers de configuration ne seront pas gérés dans RPM. En effet, les fichiers de configuration seront instanciés par l’outil de déploiement. Pour éviter la génération de fichier .rpmnew ou .rpmsave, il ne sera pas utilisé la directive %config.</p>
<div class="admonition caution">
<p class="first admonition-title">Prudence</p>
<p class="last">A ce jour, les fichiers de configuration ne sont pas listés dans les fichiers de configuration des fichiers RPM ; par conséquent, ils n’apparaissent pas dans le résultats de commandes telles que <code class="docutils literal notranslate"><span class="pre">rpm</span> <span class="pre">-ql</span></code>.</p>
</div>
</div>
<div class="section" id="id2">
<h3>5.1.4.3.2. Debian<a class="headerlink" href="#id2" title="Lien permanent vers ce titre">¶</a></h3>
<p>Tout comme pour CentOS, les paquets Debian n’intègrent pas les fichiers de configuration, et ne sont donc pas connus de dpkg ; en outre, ils ne s’intègrent pas dans debconf.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="30-principles-deployment.html" class="btn btn-neutral float-right" title="5.1.5. Déploiement de la solution" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="10-principles-networking.html" class="btn btn-neutral float-left" title="5.1.3. Principes sur les communications inter-services et le clustering" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>