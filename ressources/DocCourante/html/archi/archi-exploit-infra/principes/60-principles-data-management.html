<!DOCTYPE html>
<html class="writer-html4" lang="fr" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5.1.8. Gestion des données du système &mdash; Documentation VITAM - Architecture 7.0.1</title><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../_static/translations.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Recherche" href="../../search.html" />
    <link rel="next" title="5.2. Services techniques fournis par la solution" href="../01-services-techniques.html" />
    <link rel="prev" title="5.1.7. Administration technique" href="50-principles-technical-administration.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            VITAM - Architecture
              <img src="../../_static/logo_vitam.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                7.0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html#rappels">2. Rappels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/_toc.html">3. Vue d’ensemble</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archi-applicative/_toc.html">4. Architecture applicative</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../_toc.html">5. Architecture technique / exploitation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="_toc.html">5.1. Principes d’architecture technique</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="00-principles-services.html">5.1.1. Principes communs et environnement des services</a></li>
<li class="toctree-l3"><a class="reference internal" href="02-principles-users-rights.html">5.1.2. Utilisateurs, dossiers &amp; droits</a></li>
<li class="toctree-l3"><a class="reference internal" href="10-principles-networking.html">5.1.3. Principes sur les communications inter-services et le clustering</a></li>
<li class="toctree-l3"><a class="reference internal" href="20-principles-packaging.html">5.1.4. Packaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="30-principles-deployment.html">5.1.5. Déploiement de la solution</a></li>
<li class="toctree-l3"><a class="reference internal" href="40-principles-monitoring.html">5.1.6. Suivi de l’état du système</a></li>
<li class="toctree-l3"><a class="reference internal" href="50-principles-technical-administration.html">5.1.7. Administration technique</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">5.1.8. Gestion des données du système</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cas-des-deploiements-de-petite-taille">5.1.8.1. Cas des déploiements de petite taille</a></li>
<li class="toctree-l4"><a class="reference internal" href="#restauration">5.1.8.2. Restauration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../01-services-techniques.html">5.2. Services techniques fournis par la solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02-dependencies.html">5.3. Composants logiciels utilisés</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03-technical-architecture.html">5.4. Architecture technique détaillée</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04-data-storage.html">5.5. Stockage des données</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05-logs-architecture.html">5.6. Concentration et exploitation des logs applicatifs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06-metrics-architecture.html">5.7. Métriques applicatives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../07-deployment-tooling.html">5.8. Outillage de déploiement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08-consul.html">5.9. Service registry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10-it-services.html">5.10. Dépendances aux services d’infrastructures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../15-services.html">5.11. Composants déployés</a></li>
<li class="toctree-l2"><a class="reference internal" href="../20-deployment-guidelines.html">5.12. Guidelines de déploiement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../25-resources.html">5.13. Eléments de dimensionnement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../90-flux-all.html">5.14. Matrice des flux</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../securite/_toc.html">6. Sécurité</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../include/_toc.html">7. Architecture détaillée</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">VITAM - Architecture</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../_toc.html">5. Architecture technique / exploitation</a></li>
          <li class="breadcrumb-item"><a href="_toc.html">5.1. Principes d’architecture technique</a></li>
      <li class="breadcrumb-item active">5.1.8. Gestion des données du système</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/archi-exploit-infra/principes/60-principles-data-management.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="gestion-des-donnees-du-systeme">
<h1>5.1.8. Gestion des données du système<a class="headerlink" href="#gestion-des-donnees-du-systeme" title="Lien permanent vers ce titre">¶</a></h1>
<p>Dans VITAM, les principes de sauvegarde / restauration utilisés de manière classique ne peuvent être appliqués ; en effet, ils ne peuvent pas convenir dans le cadre de déploiements gérant une quantité massive d’archives. Par conséquent, des principes de sauvegarde et restauration applicatives particuliers sont mis en place dans le cadre de la solution, principalement basés sur l’utilisation des offres de stockage afin d’assurer la pérennisation des données.</p>
<p>VITAM doit être reconstructible à partir de 2 éléments qui sont :</p>
<ul class="simple">
<li>Les données persistées dans les offres de stockage ;</li>
<li>La configuration &amp; les données (notamment les secrets) de déploiement. Ces secrets incluent notamment les certificats (et notamment les certificats clients des applications externes et des personae).</li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">Voir aussi</p>
<p class="last">La reconstruction et la vision applicative des données est abordée à la section <a class="reference internal" href="../../archi-applicative/11-data-architecture-multisite.html"><span class="doc">Architecture des données &amp; multisite</span></a>.</p>
</div>
<div class="section" id="cas-des-deploiements-de-petite-taille">
<h2>5.1.8.1. Cas des déploiements de petite taille<a class="headerlink" href="#cas-des-deploiements-de-petite-taille" title="Lien permanent vers ce titre">¶</a></h2>
<p>Dans le cas de déploiement de petite taille, il est possible d’effectuer une sauvegarde classique du système, à froid.</p>
<div class="section" id="dossiers">
<h3>5.1.8.1.1. Dossiers<a class="headerlink" href="#dossiers" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les dossiers suivants sont éligibles aux processus de sauvegarde (dans l’ordre décroissant de criticité) :</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">/vitam/data</span></code> : ce répertoire contenant les données des applications, sa sauvegarde est vitale.</li>
<li><code class="docutils literal notranslate"><span class="pre">/vitam/tmp</span></code> : la sauvegarde de ce répertoire est optionnelle ; elle peut permettre de diminuer le temps de reprise après incident.</li>
<li><code class="docutils literal notranslate"><span class="pre">/vitam/conf</span></code> : la sauvegarde de la configuration est normalement peu utile, car tous les fichiers de configuration sont gérés par ansible, donc facilement réinstanciables.</li>
</ul>
<p>Les autres répertoires sont intégralement fournis par les packages d’installation ; leur sauvegarde n’est donc pas indispensable.</p>
</div>
<div class="section" id="sauvegarde">
<h3>5.1.8.1.2. Sauvegarde<a class="headerlink" href="#sauvegarde" title="Lien permanent vers ce titre">¶</a></h3>
<p>La sauvegarde s’effectue pendant la nuit, avec globalement 5 phases :</p>
<ol class="arabic simple">
<li>Une phase initiale de suppression des possibilités d’écritures externes dans les bases de données (arrêt des composants frontaux) ;</li>
<li>Une phase d’attente de la fin des processus internes en cours (workflow d’entrée et sécurisation des journaux) ; cette phase se clôt par l’arrêt ordonné de tous les services VITAM ;</li>
<li>Une phase d’export des bases de données sous forme de fichiers ;</li>
<li>Une phase de sauvegarde des fichiers (avec a minima les fichiers d’archives et fichiers d’export des bases de données) ;</li>
<li>Une phase de redémarrage ordonné des services VITAM.</li>
</ol>
</div>
</div>
<div class="section" id="restauration">
<h2>5.1.8.2. Restauration<a class="headerlink" href="#restauration" title="Lien permanent vers ce titre">¶</a></h2>
<p>La procédure de restauration s’appuie sur le postulat que le système VITAM est dans un état incohérent au début de celle-ci.</p>
<ol class="arabic simple">
<li>S’assurer que tous les services VITAM sont arrêtés.</li>
<li>Restaurer les dossiers précédemment sauvegardés à leur emplacement respectif.</li>
<li>Démarrer les services suivant la procédure de démarrage VITAM.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">La sauvegarde / restauration des bases MongoDB et Elasticsearch (data et logs) n’est pas indispensable. A contrario, la sauvegarde / restauration des bases MongoDB des offres, et notamment les offres froides (stockage sur bande) est fortement recommandée ; des détails sont fournis dans le <a class="reference internal" href="../../introduction.html#term-dex"><span class="xref std std-term">DEX</span></a>.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="50-principles-technical-administration.html" class="btn btn-neutral float-left" title="5.1.7. Administration technique" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../01-services-techniques.html" class="btn btn-neutral float-right" title="5.2. Services techniques fournis par la solution" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>