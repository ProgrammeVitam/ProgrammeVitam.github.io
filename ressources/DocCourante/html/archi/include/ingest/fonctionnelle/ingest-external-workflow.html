<!DOCTYPE html>
<html class="writer-html4" lang="fr" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>7.8.1.6. Généralités &mdash; Documentation VITAM - Architecture 6.1</title><link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../../_static/translations.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Recherche" href="../../../search.html" />
    <link rel="next" title="7.8.2. Technique" href="../technique/index.html" />
    <link rel="prev" title="7.8.1.5. Ingest ExternalAntivirus" href="ingest-external-antivirus.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            VITAM - Architecture
              <img src="../../../_static/logo_vitam.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                6.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html#rappels">2. Rappels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/_toc.html">3. Vue d’ensemble</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../archi-applicative/_toc.html">4. Architecture applicative</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../archi-exploit-infra/_toc.html">5. Architecture technique / exploitation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../securite/_toc.html">6. Sécurité</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../_toc.html">7. Architecture détaillée</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../access/_toc.html">7.1. Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../batch-report/_toc.html">7.2. Batch-report</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../collect/_toc.html">7.3. Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../common/_toc.html">7.4. Common</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../functional-administration/_toc.html">7.5. Functional administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ihm-demo/_toc.html">7.6. IHM demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ihm-recette/_toc.html">7.7. IHM recette</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../_toc.html">7.8. Ingest</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">7.8.1. Architecture Fonctionnelle</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="ingest-internal.html">7.8.1.1. Généralités</a></li>
<li class="toctree-l4"><a class="reference internal" href="ingest-external.html">7.8.1.2. Généralités</a></li>
<li class="toctree-l4"><a class="reference internal" href="ingest-external.html#telechargement-standard-et-test-a-blanc-d-un-sip">7.8.1.3. Téléchargement standard  et test à blanc d’un SIP:</a></li>
<li class="toctree-l4"><a class="reference internal" href="ingest-external.html#autres-fonctionnalites">7.8.1.4. Autres Fonctionnalités:</a></li>
<li class="toctree-l4"><a class="reference internal" href="ingest-external-antivirus.html">7.8.1.5. Ingest ExternalAntivirus</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">7.8.1.6. Généralités</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fonctionnalites-concernant-le-workflow">7.8.1.7. Fonctionnalités concernant le workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="#les-actions">7.8.1.8. Les actions:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#asynchrone">7.8.1.9. Asynchrone:</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../technique/index.html">7.8.2. Technique</a></li>
<li class="toctree-l3"><a class="reference internal" href="../securite/index.html">7.8.3. Securite</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../internal-security/_toc.html">7.9. Security-Internal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../logbook/_toc.html">7.10. Logbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../metadata/_toc.html">7.11. Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../processing/_toc.html">7.12. Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../scheduler/_toc.html">7.13. Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../storage/_toc.html">7.14. Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../technical-administration/_toc.html">7.15. Technical administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../worker/_toc.html">7.16. Worker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../workspace/_toc.html">7.17. Workspace</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">VITAM - Architecture</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../_toc.html">7. Architecture détaillée</a></li>
          <li class="breadcrumb-item"><a href="../_toc.html">7.8. Ingest</a></li>
          <li class="breadcrumb-item"><a href="index.html">7.8.1. Architecture Fonctionnelle</a></li>
      <li class="breadcrumb-item active">7.8.1.6. Généralités</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/include/ingest/fonctionnelle/ingest-external-workflow.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="generalites">
<h1>7.8.1.6. Généralités<a class="headerlink" href="#generalites" title="Lien permanent vers ce titre">¶</a></h1>
<p>En plus de réaliser des upload de SIP, l’ingest-external expose aussi des méthodes pour gérer un process de traitement avec un workflow.
Pour rappel, ingest-external fait appel à ingest-internal pour continuer l’exécution des méthodes demandées.</p>
</div>
<div class="section" id="fonctionnalites-concernant-le-workflow">
<h1>7.8.1.7. Fonctionnalités concernant le workflow<a class="headerlink" href="#fonctionnalites-concernant-le-workflow" title="Lien permanent vers ce titre">¶</a></h1>
<p>L’ingest external expose les méthodes suivantes pour gérer ces process:</p>
<ul>
<li><p class="first">initVitamProcess : Initialiser un process avec un workflow.</p>
</li>
<li><p class="first">initWorkFlow: Initialiser un process avec un workflow. Cette méthode est dépréciée en faveur de initVitamProcess.</p>
</li>
<li><p class="first">updateOperationActionProcess: exécuter une action sur un process (next, resume, pause, cancel)</p>
</li>
<li><p class="first">updateVitamProcess: Cette méthode est dépréciée en faveur de updateOperationActionProcess</p>
</li>
<li><p class="first">executeOperationProcess: Elle expose les même fonctionnalités que updateOperationActionProcess en utilisant la méthode http POST.</p>
</li>
<li><p class="first">cancelOperationProcessExecution: Annuler l’exécution d’un process.</p>
</li>
<li><p class="first">getOperationProcessStatus: Retourne le statut d’un process</p>
</li>
<li><p class="first">getOperationProcessExecutionDetails: Retourne le détail d’un process</p>
</li>
<li><p class="first">listOperationsDetails: Lister tous les process qui sont en état RUNNING ou PAUSE.</p>
</li>
<li><p class="first">wait(int tenantId, String processId, ProcessState state, int nbTry, long timeWait, TimeUnit timeUnit): Permet de bien gérer le pooling côté serveur. En effet, cette méthode fait appel à getOperationProcessStatus nbTry fois et esapce les appels avec un temps de timeWait. La réponse au client est retournée dans les cas suivants:</p>
<blockquote>
<div><p>&gt; nbTry est atteint (nombre de rappel)
&gt; le state du process est COMPLETED
&gt; Le state du process est PAUSE et le statut est supérieur à STARTED</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="les-actions">
<h1>7.8.1.8. Les actions:<a class="headerlink" href="#les-actions" title="Lien permanent vers ce titre">¶</a></h1>
<p>Les actions possible pour un workflow  sont: INIT, NEXT, RESUME, PAUSE, CANCEL
Dans le cas des méthodes initVitamProcess et cancelOperationProcessExecution les actions sont par défaut INIT et CANCEL respectivement.</p>
<p>Pour les autres méthodes: Les actions doivent êtres (NEXT, RESUME ou PAUSE)</p>
<ul class="simple">
<li>INIT: Initialiser un process avec un workflow et mettre son état à PAUSE (en attente d’une action)</li>
<li>NEXT: Exécuter la première étape d’un process et mettre en état PAUSE. Si c’est la dernière étape alors mettre en état COMPLETED.</li>
<li>RESUME: Exécuter tous les états d’un process et mettre en état COMPLETED</li>
<li>PAUSE: Mettre le process en état PAUSE dès que possible. Si c’est la dernière étape en cours d’exécution alors mettre en état COMPLETED</li>
<li>CANCEL: Mettre le process en état COMPLETED dès que possible.</li>
</ul>
</div>
<div class="section" id="asynchrone">
<h1>7.8.1.9. Asynchrone:<a class="headerlink" href="#asynchrone" title="Lien permanent vers ce titre">¶</a></h1>
<p>L’exécution d’un process est complètement asynchrone. Donc pour avoir l’état final d’un process et son statut final il faut faire du pooling. La méthode wait est là pour vous aider.
Attention: Au retour de la réponse d’une action sur le process ne vaut pas dire que l’exécution est terminé, il faut donc attendre la fin de l’exécution en appelant la méthode getOperationProcessStatus ou wait. Il faut faire attention aussi pour les tests d’intergrations et les tests de non régression.</p>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ingest-external-antivirus.html" class="btn btn-neutral float-left" title="7.8.1.5. Ingest ExternalAntivirus" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../technique/index.html" class="btn btn-neutral float-right" title="7.8.2. Technique" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>