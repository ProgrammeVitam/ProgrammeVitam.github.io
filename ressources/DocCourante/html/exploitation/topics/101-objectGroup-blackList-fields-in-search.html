<!DOCTYPE html>
<html class="writer-html4" lang="fr" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5.3. Configuration des champs ObjectGroup devant être exclus de la recherche &mdash; Documentation VITAM - Documentation d&#39;exploitation 6.1</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="5.4. Portails d’administration" href="11-adminportals.html" />
    <link rel="prev" title="5.2. Audit de cohérence de données entre MongoDb et Elasticsearch" href="100-auditDataConsistency.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            VITAM - Documentation d'exploitation
              <img src="../_static/logo_vitam.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                6.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html#rappels">2. Rappels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prerequis-competences.html">3. Expertises requises</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">4. Architecture de la solution logicielle VITAM</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="_toc.html">5. Exploitation globale</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="10-accessgrants.html">5.1. Gestion des accès</a></li>
<li class="toctree-l2"><a class="reference internal" href="100-auditDataConsistency.html">5.2. Audit de cohérence de données entre MongoDb et Elasticsearch</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.3. Configuration des champs ObjectGroup devant être exclus de la recherche</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration">5.3.1. Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fonctionnement">5.3.2. Fonctionnement</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="11-adminportals.html">5.4. Portails d’administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="12-appconfig.html">5.5. Paramétrage &amp; configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="14-miseajour.html">5.6. Déploiement / mises à jour</a></li>
<li class="toctree-l2"><a class="reference internal" href="15-maintenance.html">5.7. Interruption / maintenance</a></li>
<li class="toctree-l2"><a class="reference internal" href="16-backup_restore.html">5.8. Sauvegarde / restauration</a></li>
<li class="toctree-l2"><a class="reference internal" href="17-backup_restore_gros_volume.html">5.9. Sauvegarde et restauration de mongodb gros volumes</a></li>
<li class="toctree-l2"><a class="reference internal" href="18-securityprofile.html">5.10. Gestion des profils de sécurité</a></li>
<li class="toctree-l2"><a class="reference internal" href="19-certificatpersonae.html">5.11. Certificats personae</a></li>
<li class="toctree-l2"><a class="reference internal" href="19-grouped_tenants.html">5.12. Gestion des indexes Elasticseach dans un contexte massivement multi-tenants</a></li>
<li class="toctree-l2"><a class="reference internal" href="20-batchs.html">5.13. Batchs et traitements</a></li>
<li class="toctree-l2"><a class="reference internal" href="21-graphstorage.html">5.14. Sauvegarde des données graphe (Log shipping)</a></li>
<li class="toctree-l2"><a class="reference internal" href="22-graphcompute.html">5.15. Recalcul des données graphe</a></li>
<li class="toctree-l2"><a class="reference internal" href="23-siegfried_signature.html">5.16. Montée de version du fichier de signature de Siegfried</a></li>
<li class="toctree-l2"><a class="reference internal" href="24-griffins.html">5.17. Griffins</a></li>
<li class="toctree-l2"><a class="reference internal" href="30-reconstruction.html">5.18. Reconstruction</a></li>
<li class="toctree-l2"><a class="reference internal" href="31-pra.html">5.19. Plan de Reprise d’Activité (<code class="docutils literal notranslate"><span class="pre">PRA</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="40-resynchronisation.html">5.20. Resynchronisation d’une offre</a></li>
<li class="toctree-l2"><a class="reference internal" href="45-offerdiff.html">5.21. Audit comparatif entre 2 offres de stockage miroirs</a></li>
<li class="toctree-l2"><a class="reference internal" href="50-ontologies.html">5.22. Procédure d’exploitation suite à la création ou la modification d’une ontologie</a></li>
<li class="toctree-l2"><a class="reference internal" href="50-ontologies.html#l-ontologie-externe-suite-a-la-montee-de-version-de-vitam">5.23. L’ontologie externe suite à la montée de version de <code class="docutils literal notranslate"><span class="pre">VITAM</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="60-forcedpause.html">5.24. Procédure d’exploitation pour la mise en pause forcée d’une opération</a></li>
<li class="toctree-l2"><a class="reference internal" href="60-reindexation.html">5.25. Réindexation</a></li>
<li class="toctree-l2"><a class="reference internal" href="65-ingest-cleanup.html">5.26. Nettoyage des ingests incomplets</a></li>
<li class="toctree-l2"><a class="reference internal" href="66-dip-cleanup.html">5.27. Suppression des DIP et des fichiers de transfert</a></li>
<li class="toctree-l2"><a class="reference internal" href="70-certificate-revocation.html">5.28. Procédure d’exploitation pour la révocation des certificats SIA et Personae</a></li>
<li class="toctree-l2"><a class="reference internal" href="80-offer-activation.html">5.29. Activation/désactivation d’une offre</a></li>
<li class="toctree-l2"><a class="reference internal" href="90-environment-cleaning.html">5.30. Nettoyage d’un environnement</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../monitoring/_toc.html">6. Suivi de l’état du système</a></li>
<li class="toctree-l1"><a class="reference internal" href="../composants/_toc.html">7. Exploitation des COTS de la solution logicielle VITAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../include/_toc.html">8. Exploitation des composants de la solution logicielle VITAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../external_app.html">9. Intégration d’une application externe dans Vitam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshoot/_toc.html">10. Aide à l’exploitation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ/_toc.html">11. Questions Fréquemment Posées</a></li>
<li class="toctree-l1"><a class="reference internal" href="../annexes/_toc.html">12. Annexes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">VITAM - Documentation d'exploitation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="_toc.html">5. Exploitation globale</a></li>
      <li class="breadcrumb-item active">5.3. Configuration des champs ObjectGroup devant être exclus de la recherche</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/topics/101-objectGroup-blackList-fields-in-search.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="configuration-des-champs-objectgroup-devant-etre-exclus-de-la-recherche">
<h1>5.3. Configuration des champs ObjectGroup devant être exclus de la recherche<a class="headerlink" href="#configuration-des-champs-objectgroup-devant-etre-exclus-de-la-recherche" title="Lien permanent vers ce titre">¶</a></h1>
<p>Cette partie décrit le process d’exclure des propriétes des groupes d’objets lors de leurs recherche dans Vitam en tenant compte des différentes API
qui remontent des données de groupes d’objets.</p>
<div class="section" id="configuration">
<h2>5.3.1. Configuration<a class="headerlink" href="#configuration" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il faudrait tout d’abord configurer la propriéte <code class="docutils literal notranslate"><span class="pre">objectGroupBlackListedFieldsForVisualizationByTenant</span></code>, qui définit une Map
associant un tenant à une black liste de propriétes de groupe d’objets. Cette liste de propriétes serait exclue d’affichage lors
des recherchers faites sur la collection d’objet group pour le tenant concerné.</p>
<p>Ci-dessous un exemple de cette configuration, qui existe dans le fichier access-external.conf :</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>authentication: true
jettyConfig: jetty-config.xml
tenantFilter : true
authorizeTrackTotalHits : false
objectGroupBlackListedFieldsForVisualizationByTenant:
 0: [&#39;Filename&#39;, &#39;#operations&#39;, &#39;Size&#39;]
 1: [&#39;Filename&#39;, &#39;#opi&#39;]
 2: [&#39;Filename&#39;]
 3: [&#39;Filename&#39;]
 4: [&#39;Filename&#39;]
 5: [&#39;Filename&#39;]
 6: [&#39;Filename&#39;]
 7: [&#39;Filename&#39;]
 8: [&#39;Filename&#39;]
 9: [&#39;Filename&#39;]
</pre></div>
</div>
<p>Par défaut, tout les tenants du système (9 dans cet exemple ) déclarent le champ <code class="docutils literal notranslate"><span class="pre">Filename</span></code> dans leur black liste. Ensuite, libre à l’exploitant de gérer cette
liste en rajoutant, modifiant, voir même supprimant le champ par défaut.</p>
</div>
<div class="section" id="fonctionnement">
<h2>5.3.2. Fonctionnement<a class="headerlink" href="#fonctionnement" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une fois la configuration de la black liste est faite, et le(s) service(s) access-external démarré(s), les requêtes qui permettent de lancer
des recherches sur les objets groupes, et qui prennent en considération un tenant d’utilisation, ne remontent plus au niveau des réponses,
les propriétes déja mis dans la liste.</p>
<p>Ci-dessous les points d’API concernés :</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">/objects</span><span class="p">:</span>
  <span class="nt">displayName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Objects</span>
  <span class="nt">description</span><span class="p">:</span> <span class="p p-Indicator">|</span>
   <span class="no">API qui permet d&#39;accéder aux objets groupes en se basant sur une requête qui utilisele langage de requête (DSL)</span>
   <span class="no">de Vitam en entrée et retourne l&#39;objet d&#39;archives selon le DSL Vitam en cas de succès.</span>
  <span class="nt">get</span><span class="p">:</span>
    <span class="nt">description</span><span class="p">:</span> <span class="p p-Indicator">|</span>
      <span class="no">Requête qui retourne le résultat contenant un Object d&#39;archives : ses métadonnées ou un de ses objets binaires.</span>
      <span class="no">Dans le cas des métadonnées, la requête utilise le langage de requête DSL de type **recherche unitaire (GET BY ID)** de Vitam en entrée.</span>
      <span class="no">&#39;Accept&#39; header est &#39;application/octet-stream&#39; (objet binaire) ou &#39;application/json&#39; (métadonnées)</span>

      <span class="no">Permissions requises:</span>
        <span class="no">- objects:read</span>
    <span class="nt">is</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">AccessTraits.AccessUniqueObjectQualifierResponse</span><span class="p p-Indicator">,</span> <span class="nv">AccessTraits.AccessUniqueObjectResponse</span><span class="p p-Indicator">]</span>
    <span class="nt">headers</span><span class="p">:</span>
      <span class="nt">Accept</span><span class="p">:</span>
        <span class="nt">required</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class="nt">enum</span><span class="p">:</span> <span class="p p-Indicator">[</span> <span class="s">&quot;application/octet-stream&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;application/json&quot;</span> <span class="p p-Indicator">]</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">/units/{{unit-id}}/objects</span><span class="p p-Indicator">:</span>
  <span class="nt">displayName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Objects of one ArchiveUnit</span>
  <span class="nt">description</span><span class="p">:</span> <span class="p p-Indicator">|</span>
   <span class="no">API qui définit les requêtes pour accéder à l&#39;Objet d&#39;archives associé à l&#39;Unité d&#39;archives s&#39;il existe.</span>
   <span class="no">La requête utilise le langage de requête (DSL) de Vitam en entrée et retourne l&#39;objet d&#39;archives selon le DSL Vitam en cas de succès.</span>
  <span class="nt">get</span><span class="p">:</span>
    <span class="nt">description</span><span class="p">:</span> <span class="p p-Indicator">|</span>
      <span class="no">Requête qui retourne le résultat contenant un Object d&#39;archives : ses métadonnées ou un de ses objets binaires, rattachés</span>
      <span class="no">à l&#39;identifiant de l&#39;unité archivistique en paramétre.</span>

      <span class="no">Permissions requises:</span>
        <span class="no">- units:id:objects:read:json</span>

        <span class="no">ou</span>
        <span class="no">- units:id:objects:read:binary</span>
    <span class="nt">is</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">AccessTraits.AccessUniqueObjectQualifierResponse</span><span class="p p-Indicator">,</span> <span class="nv">AccessTraits.AccessUniqueObjectResponse</span><span class="p p-Indicator">]</span>
    <span class="nt">headers</span><span class="p">:</span>
      <span class="nt">Accept</span><span class="p">:</span>
        <span class="nt">required</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class="nt">enum</span><span class="p">:</span> <span class="p p-Indicator">[</span> <span class="s">&quot;application/octet-stream&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;application/json&quot;</span> <span class="p p-Indicator">]</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="100-auditDataConsistency.html" class="btn btn-neutral float-left" title="5.2. Audit de cohérence de données entre MongoDb et Elasticsearch" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="11-adminportals.html" class="btn btn-neutral float-right" title="5.4. Portails d’administration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>