<!DOCTYPE html>
<html class="writer-html4" lang="fr" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>8.2.16.4. Description &mdash; Documentation VITAM - Documentation d&#39;exploitation 8.0.0</title><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../_static/translations.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Recherche" href="../../search.html" />
    <link rel="next" title="8.2.17. Storage" href="../storage/_toc.html" />
    <link rel="prev" title="8.2.16.3. Opérations" href="operations.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            VITAM - Documentation d'exploitation
              <img src="../../_static/logo_vitam.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                8.0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html#rappels">2. Rappels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../prerequis-competences.html">3. Expertises requises</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture.html">4. Architecture de la solution logicielle VITAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../topics/_toc.html">5. Exploitation globale</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../monitoring/_toc.html">6. Suivi de l’état du système</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../composants/_toc.html">7. Exploitation des COTS de la solution logicielle VITAM</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../_toc.html">8. Exploitation des composants de la solution logicielle VITAM</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../_toc.html#generalites">8.1. Généralités</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../_toc.html#composants">8.2. Composants</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../common.html">8.2.1. Fichiers communs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../access/_toc.html">8.2.2. Access</a></li>
<li class="toctree-l3"><a class="reference internal" href="../batch-report/_toc.html">8.2.3. Batch-Report</a></li>
<li class="toctree-l3"><a class="reference internal" href="../collect/_toc.html">8.2.4. Collect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../common-plugin/_toc.html">8.2.5. common-plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../common/_toc.html">8.2.6. Common</a></li>
<li class="toctree-l3"><a class="reference internal" href="../functional-administration/_toc.html">8.2.7. Functional administration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hello-world-plugin/_toc.html">8.2.8. Hello World Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ihm-demo/_toc.html">8.2.9. ihm-demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ihm-recette/_toc.html">8.2.10. ihm-recette</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ingest/_toc.html">8.2.11. Ingest</a></li>
<li class="toctree-l3"><a class="reference internal" href="../internal-security/_toc.html">8.2.12. Security-Internal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logbook/_toc.html">8.2.13. Logbook</a></li>
<li class="toctree-l3"><a class="reference internal" href="../metadata/_toc.html">8.2.14. Metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="../processing/_toc.html">8.2.15. Processing</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="_toc.html">8.2.16. scheduler</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="introduction.html">8.2.16.1. Présentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="configuration.html">8.2.16.2. Configuration / fichiers utiles</a></li>
<li class="toctree-l4"><a class="reference internal" href="operations.html">8.2.16.3. Opérations</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">8.2.16.4. Description</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../storage/_toc.html">8.2.17. Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../technical-administration/_toc.html">8.2.18. Technical administration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../worker/_toc.html">8.2.19. Worker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workspace/_toc.html">8.2.20. Workspace</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../external_app.html">9. Intégration d’une application externe dans Vitam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshoot/_toc.html">10. Aide à l’exploitation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../FAQ/_toc.html">11. Questions Fréquemment Posées</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../annexes/_toc.html">12. Annexes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">VITAM - Documentation d'exploitation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../_toc.html">8. Exploitation des composants de la solution logicielle VITAM</a></li>
          <li class="breadcrumb-item"><a href="_toc.html">8.2.16. scheduler</a></li>
      <li class="breadcrumb-item active">8.2.16.4. Description</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/include/scheduler/description.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="description">
<h1>8.2.16.4. Description<a class="headerlink" href="#description" title="Lien permanent vers ce titre">¶</a></h1>
<p>Ce module se compose de jobs <em>quartz</em> pouvant être activés au besoin grâce à la configuration d’Ansible.</p>
<ul class="simple">
<li>AuditObjectJob</li>
<li>AuditDataConsistencyMongoEsJob</li>
<li>IdentityExpirationJob</li>
<li>MetadataReconstructionJob</li>
<li>OfferLogCompactionJob</li>
<li>PersistentIdentifierReconstructionJob</li>
<li>ProcessObsoleteComputedInheritedRulesJob</li>
<li>PurgeDipJob</li>
<li>PurgeSipJob</li>
<li>ReconstructionAccessionRegisterJob</li>
<li>ReconstructionOperationJob</li>
<li>ReconstructionReferentialJob</li>
<li>ReferentialCreateSymblolicAccessionRegisterJob</li>
<li>RuleManagementAuditJob</li>
<li>StorageBackupLogJob</li>
<li>StorageLogTraceabilityJob</li>
<li>StoreGraphJob</li>
<li>TraceabilityAuditJob</li>
<li>TraceabilityJob</li>
<li>TraceabilityLFCJob</li>
</ul>
<p>Les détails de ces jobs sont expliqués ci-dessous.</p>
<div class="section" id="jobs-quartz">
<h2>8.2.16.4.1. Jobs quartz<a class="headerlink" href="#jobs-quartz" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les jobs du planificateur s’activent automatiquement selon la configuration souhaitée.</p>
<div class="admonition caution">
<p class="first admonition-title">Prudence</p>
<p class="last">Attention, il faut que le délai d’exécution du job soit supérieur à <code class="docutils literal notranslate"><span class="pre">org.quartz.scheduler.idleWaitTime</span></code>, qui est réglé à 30 secondes par défaut.</p>
</div>
<p>Si le délai d’exécution a été réglé par erreur à une valeur inférieure, il peut arriver qu’il soit impossible de changer le délai d’exécution à une valeur correcte.
Dans ce cas, la procédure à suivre est de mettre les jobs en pause (<code class="docutils literal notranslate"><span class="pre">PUT</span> <span class="pre">http://&lt;host&gt;:&lt;port</span> <span class="pre">admin&gt;/scheduler/v1/pause/ALL</span></code>), attendre au minimum 30 secondes, puis réinitialiser les jobs (<code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">http://&lt;host&gt;:&lt;port</span> <span class="pre">admin&gt;/scheduler/v1/jobs</span></code>)</p>
<div class="section" id="auditobjectjob-java">
<h3>8.2.16.4.1.1. AuditObjectJob.java<a class="headerlink" href="#auditobjectjob-java" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce job lance le workflow d’audit d’intégrité et/ou d’existence à travers la configuration <em>auditType</em>.
Le job d’intégrité se déclenche toutes les 4 heures, en commençant à 00:30.
Le job d’existence se déclenche toutes les 4 heures, en commençant à 00:50.</p>
<p>Ce job prend deux paramètres :</p>
<ul class="simple">
<li><strong>operationsDelayInMinutes</strong> : permet de ne pas prendre les données fraîchement enregistrées.</li>
<li><a href="#id1"><span class="problematic" id="id2">**</span></a>selectedTenants: une liste de tenants sur lesquels l’audit sera lancé.</li>
<li><strong>auditType</strong> : prend l’une des valeurs <em>Existence</em> ou <em>Integrity</em>.</li>
</ul>
</div>
<div class="section" id="auditdataconsistencymongoesjob-java">
<h3>8.2.16.4.1.2. AuditDataConsistencyMongoEsJob.java<a class="headerlink" href="#auditdataconsistencymongoesjob-java" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce job permet de vérifier et corriger les incohérences entre MongoDB et Elasticsearch.</p>
</div>
<div class="section" id="identityexpirationjob-java">
<h3>8.2.16.4.1.3. IdentityExpirationJob.java<a class="headerlink" href="#identityexpirationjob-java" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce job vérifie s’il y a des certificats qui vont expirer. Il est programmé par défaut pour s’exécuter chaque jour à minuit.</p>
</div>
<div class="section" id="metadatareconstructionjob-java">
<h3>8.2.16.4.1.4. MetadataReconstructionJob.java<a class="headerlink" href="#metadatareconstructionjob-java" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce job facilite la reconstruction depuis l’offre vers MongoDB et Elasticsearch sur un site secondaire.
On peut le programmer à travers la valeur <code class="docutils literal notranslate"><span class="pre">vitam_timers.metadata.frequency_reconstruction</span></code>, et par défaut, il se lance chaque 5 minutes.</p>
</div>
<div class="section" id="offerlogcompactionjob-java">
<h3>8.2.16.4.1.5. OfferLogCompactionJob.java<a class="headerlink" href="#offerlogcompactionjob-java" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce job gère la compaction des journaux de chaque offre et ne se lance que sur le site primaire.
On peut le programmer à travers la valeur <code class="docutils literal notranslate"><span class="pre">vitam_timers.offer.frequency_offerlog_compaction</span></code>, et par défaut, il se lance toutes les 30 minutes, en commençant à la 10e minute de l’heure.</p>
</div>
<div class="section" id="persistentidentifierreconstructionjob-java">
<h3>8.2.16.4.1.6. PersistentIdentifierReconstructionJob.java<a class="headerlink" href="#persistentidentifierreconstructionjob-java" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce job facilite la reconstruction des identifiants persistants.
On peut le programmer à travers la valeur <code class="docutils literal notranslate"><span class="pre">vitam_timers.metadata.frequency_persistent_identifier_reconstruction</span></code>, par défaut, il est désactivé.</p>
</div>
<div class="section" id="processobsoletecomputedinheritedrulesjob-java">
<h3>8.2.16.4.1.7. ProcessObsoleteComputedInheritedRulesJob.java<a class="headerlink" href="#processobsoletecomputedinheritedrulesjob-java" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce job s’occupe du traitement des règles calculées ou héritées devenues obsolètes et ne se lance que sur le site primaire.
On peut le programmer à travers la valeur <code class="docutils literal notranslate"><span class="pre">vitam_timers.metadata.frequency_computed_inherited_rules</span></code>, par défaut, il se lance chaque jour à 2h30 du matin.</p>
</div>
<div class="section" id="purgedipjob-java">
<h3>8.2.16.4.1.8. PurgeDipJob.java<a class="headerlink" href="#purgedipjob-java" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce job effectue la purge des anciens <em>DIP</em> et ne se lance que sur le site primaire.
On peut le programmer à travers la valeur <code class="docutils literal notranslate"><span class="pre">vitam_timers.metadata.frequency_purge_dip</span></code>, par défaut, il se lance chaque heure.</p>
</div>
<div class="section" id="purgesipjob-java">
<h3>8.2.16.4.1.9. PurgeSipJob.java<a class="headerlink" href="#purgesipjob-java" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce job effectue la purge des anciens <em>SIP</em> et ne se lance que sur le site primaire.
On peut le programmer à travers la valeur <code class="docutils literal notranslate"><span class="pre">vitam_timers.metadata.frequency_purge_transfers_sip</span></code>, par défaut, il se lance chaque matin à 2h25.</p>
</div>
<div class="section" id="reconstructionaccessionregisterjob-java">
<h3>8.2.16.4.1.10. ReconstructionAccessionRegisterJob.java<a class="headerlink" href="#reconstructionaccessionregisterjob-java" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce job permet de faire la reconstruction des données concernant AccessionRegisterSymbolic et AccessionRegisterDetail portées par le composant functional-administration uniquement sur le site secondaire.
On peut le programmer à travers la valeur <code class="docutils literal notranslate"><span class="pre">vitam_timers.functional_administration.frequency_accession_register_reconstruction</span></code>, par défaut, il se lance chaque 5min.</p>
</div>
<div class="section" id="reconstructionoperationjob-java">
<h3>8.2.16.4.1.11. ReconstructionOperationJob.java<a class="headerlink" href="#reconstructionoperationjob-java" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce job permet de faire la reconstruction des opérations depuis l’offre et logbook et ne se lance que sur le site secondaire.
On peut le programmer à travers la valeur <code class="docutils literal notranslate"><span class="pre">vitam_timers.logbook.frequency_logbook_reconstruction</span></code>, par défaut, il se lance chaque 5min.</p>
</div>
<div class="section" id="reconstructionreferentialjob-java">
<h3>8.2.16.4.1.12. ReconstructionReferentialJob.java<a class="headerlink" href="#reconstructionreferentialjob-java" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce job permet de faire la reconstruction des données portées par le composant functional-administration uniquement sur le site secondaire.
On peut le programmer à travers la valeur <code class="docutils literal notranslate"><span class="pre">vitam_timers.functional_administration.frequency_reconstruction</span></code>, par défaut, il se lance chaque 5min.</p>
</div>
<div class="section" id="referentialcreatesymblolicaccessionregisterjob-java">
<h3>8.2.16.4.1.13. ReferentialCreateSymblolicAccessionRegisterJob.java<a class="headerlink" href="#referentialcreatesymblolicaccessionregisterjob-java" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce job permet de déclencher une commande qui va calculer le registre des fonds symbolique et les ajoute dans les bases de données uniquement sur le site primaire.
On peut le programmer à travers la valeur <code class="docutils literal notranslate"><span class="pre">vitam_timers.functional_administration.frequency_create_accession_register_symbolic</span></code>, par défaut, il se lance chaque 5min.</p>
</div>
<div class="section" id="rulemanagementauditjob-java">
<h3>8.2.16.4.1.14. RuleManagementAuditJob.java<a class="headerlink" href="#rulemanagementauditjob-java" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce job permet de faire la validation de la cohérence des règles de gestion entre les offres de stockage et les bases de données uniquement sur le site primaire.
On peut le programmer à travers la valeur <code class="docutils literal notranslate"><span class="pre">vitam_timers.functional_administration.frequency_rule_management_audit</span></code>, par défaut, il se lance chaque jour, à 40 minutes passées de chaque heure.</p>
</div>
<div class="section" id="storagebackuplogjob-java">
<h3>8.2.16.4.1.15. StorageBackupLogJob.java<a class="headerlink" href="#storagebackuplogjob-java" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce job effectue la sauvegarde des journaux d’accès et des journaux d’écriture uniquement sur le site primaire.
On peut le programmer à travers la valeur <code class="docutils literal notranslate"><span class="pre">vitam_timers.storage.vitam_storage_accesslog_backup</span></code>, par défaut, il se lance toutes les 4 heures, en commençant à minuit et 10 minutes.</p>
</div>
<div class="section" id="storagelogtraceabilityjob-java">
<h3>8.2.16.4.1.16. StorageLogTraceabilityJob.java<a class="headerlink" href="#storagelogtraceabilityjob-java" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce job assure la sécurisation des opérations de stockage uniquement sur le site primaire.
On peut le programmer à travers la valeur <code class="docutils literal notranslate"><span class="pre">vitam_timers.storage.frequency_traceability_log</span></code>, par défaut, il se lance toutes les 4 heures, en commençant à minuit et 40 minutes.</p>
</div>
<div class="section" id="storegraphjob-java">
<h3>8.2.16.4.1.17. StoreGraphJob.java<a class="headerlink" href="#storegraphjob-java" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce job permet la sauvegrade des graphs sur l’offre uniquement sur le site primaire.
On peut le programmer à travers la valeur <code class="docutils literal notranslate"><span class="pre">vitam_timers.metadata.frequency_store_graph</span></code>, par défaut, il se lance toutes les 30 minutes, en commençant à la 10e minute de chaque heure.</p>
</div>
<div class="section" id="traceabilityauditjob-java">
<h3>8.2.16.4.1.18. TraceabilityAuditJob.java<a class="headerlink" href="#traceabilityauditjob-java" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce job vérifie s’il y a eu une traçabilité au cours de la dernière période uniquement sur le site primaire.
On peut le programmer à travers la valeur <code class="docutils literal notranslate"><span class="pre">vitam_timers.logbook.frequency_traceability_audit</span></code>, par défaut, il se lance à 00:55 chaque jour.
Ce job prend 4 paramètres :</p>
<blockquote>
<div><ul class="simple">
<li><strong>operationTraceabilityMaxRenewalDelay</strong></li>
<li><strong>operationTraceabilityMaxRenewalDelayUnit</strong></li>
<li><strong>lifecycleTraceabilityMaxRenewalDelay</strong></li>
<li><strong>lifecycleTraceabilityMaxRenewalDelayUnit</strong></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="traceabilityjob-java">
<h3>8.2.16.4.1.19. TraceabilityJob.java<a class="headerlink" href="#traceabilityjob-java" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce job sécurise les opérations dans le logbook uniquement sur le site primaire.
On peut le programmer à travers la valeur <code class="docutils literal notranslate"><span class="pre">vitam_timers.logbook.frequency_traceability_operations</span></code>, par défaut, il se lance toutes les heures, à la 5e minute de chaque heure.</p>
</div>
<div class="section" id="traceabilitylfcjob-java">
<h3>8.2.16.4.1.20. TraceabilityLFCJob.java<a class="headerlink" href="#traceabilitylfcjob-java" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce job sécurise les événements du cycle de vie dans le logbook uniquement sur le site primaire.
On peut le programmer à travers la valeur <code class="docutils literal notranslate"><span class="pre">vitam_timers.logbook.frequency_traceability_lfc_objectgroup</span></code>, par défaut, il se lance toutes les heures, à la 15e minute de chaque heure.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="operations.html" class="btn btn-neutral float-left" title="8.2.16.3. Opérations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../storage/_toc.html" class="btn btn-neutral float-right" title="8.2.17. Storage" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>