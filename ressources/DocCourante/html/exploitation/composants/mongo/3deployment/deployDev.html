<!DOCTYPE html>
<html class="writer-html4" lang="fr" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>7.2.9.4.2. Déploiement d’un cluster de développement &mdash; Documentation VITAM - Documentation d&#39;exploitation 7.0.1</title><link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../../_static/translations.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Recherche" href="../../../search.html" />
    <link rel="next" title="7.2.9.4.3. Déploiement d’un cluster de production" href="deployProd.html" />
    <link rel="prev" title="7.2.9.4.1. Présentation" href="presentation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            VITAM - Documentation d'exploitation
              <img src="../../../_static/logo_vitam.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                7.0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html#rappels">2. Rappels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../prerequis-competences.html">3. Expertises requises</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../architecture.html">4. Architecture de la solution logicielle VITAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/_toc.html">5. Exploitation globale</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../monitoring/_toc.html">6. Suivi de l’état du système</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../_toc.html">7. Exploitation des COTS de la solution logicielle VITAM</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../_toc.html#generalites">7.1. Généralités</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../_toc.html#cots">7.2. COTS</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../cerebro/_toc.html">7.2.1. Cerebro</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../consul/_toc.html">7.2.2. Consul</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../elasticsearch_interceptor/_toc.html">7.2.3. Kibana interceptor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../elasticsearch_log/_toc.html">7.2.4. Elasticsearch chaîne de log</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../elasticsearch_vitam/_toc.html">7.2.5. Elasticsearch Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../grafana/_toc.html">7.2.6. Grafana</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../kibana/_toc.html">7.2.7. Kibana</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../log_server/_toc.html">7.2.8. Log server</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../_toc.html">7.2.9. MongoDB</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../0mongos/_toc.html">7.2.9.1. Service vitam-mongos</a></li>
<li class="toctree-l4"><a class="reference internal" href="../1mongoc/_toc.html">7.2.9.2. Service vitam-mongoc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../2mongod/_toc.html">7.2.9.3. Service vitam-mongod</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="_toc.html">7.2.9.4. Topologies de déploiement et tolérance aux pannes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../4exploitation/_toc.html">7.2.9.5. Exploitation d’un cluster MongoDB</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../prometheus/_toc.html">7.2.10. Prometheus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../restic/_toc.html">7.2.11. Restic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../siegfried/_toc.html">7.2.12. Siegfried</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../include/_toc.html">8. Exploitation des composants de la solution logicielle VITAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../external_app.html">9. Intégration d’une application externe dans Vitam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../troubleshoot/_toc.html">10. Aide à l’exploitation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../FAQ/_toc.html">11. Questions Fréquemment Posées</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../annexes/_toc.html">12. Annexes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">VITAM - Documentation d'exploitation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../_toc.html">7. Exploitation des COTS de la solution logicielle VITAM</a></li>
          <li class="breadcrumb-item"><a href="../_toc.html">7.2.9. MongoDB</a></li>
          <li class="breadcrumb-item"><a href="_toc.html">7.2.9.4. Topologies de déploiement et tolérance aux pannes</a></li>
      <li class="breadcrumb-item active">7.2.9.4.2. Déploiement d’un cluster de développement</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/composants/mongo/3deployment/deployDev.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="deploiement-d-un-cluster-de-developpement">
<h1>7.2.9.4.2. Déploiement d’un cluster de développement<a class="headerlink" href="#deploiement-d-un-cluster-de-developpement" title="Lien permanent vers ce titre">¶</a></h1>
<p>En environnement de développement, la tolérance aux pannes, ainsi que la performance du système testé, ne sont pas attendues. Il est donc possible de déployer un cluster minimaliste, constitué d’un composant par type et associé à des ressources machines minimales. La configuration minimum pour un service mongoDB est de 1 vCPU et 512 Mo de RAM.
Il est possible de colocaliser les trois services <code class="docutils literal notranslate"><span class="pre">vitam-mongos</span></code>, <code class="docutils literal notranslate"><span class="pre">vitam-mongoc</span></code> et <code class="docutils literal notranslate"><span class="pre">vitam-mongod</span></code> sur la même machine en prévoyant 1 vCPU et 2 Go de RAM.</p>
<p>Pour réaliser le déploiement du cluster <code class="docutils literal notranslate"><span class="pre">mongodb-data</span></code> sur une seule machine, l’inventaire ansible doit référencer la même machine pour chacun des groupes <code class="docutils literal notranslate"><span class="pre">hosts-mongos-data</span></code>, <code class="docutils literal notranslate"><span class="pre">hosts-mongoc-data</span></code> et <code class="docutils literal notranslate"><span class="pre">hosts-mongod-data</span></code>. Bien qu’il n’y ait qu’un seul <code class="docutils literal notranslate"><span class="pre">Shard</span></code> et qu’un membre par <code class="docutils literal notranslate"><span class="pre">ReplicaSet</span></code>, le paramètres <code class="docutils literal notranslate"><span class="pre">mongo_rs_bootstrap</span></code> et <code class="docutils literal notranslate"><span class="pre">mongo_shard_id</span></code> sont attendus. Ces paramètres sont détaillés dans le paragraphe qui suit.</p>
<p>Exemple</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">hosts</span><span class="o">-</span><span class="n">mongodb</span><span class="o">-</span><span class="n">data</span><span class="p">:</span><span class="n">children</span><span class="p">]</span>
<span class="n">hosts</span><span class="o">-</span><span class="n">mongos</span><span class="o">-</span><span class="n">data</span>
<span class="n">hosts</span><span class="o">-</span><span class="n">mongoc</span><span class="o">-</span><span class="n">data</span>
<span class="n">hosts</span><span class="o">-</span><span class="n">mongod</span><span class="o">-</span><span class="n">data</span>

<span class="p">[</span><span class="n">hosts</span><span class="o">-</span><span class="n">mongos</span><span class="o">-</span><span class="n">data</span><span class="p">]</span>
<span class="n">host1</span><span class="o">.</span><span class="n">vm</span>    <span class="n">mongo_cluster_name</span><span class="o">=</span><span class="n">mongodb</span><span class="o">-</span><span class="n">data</span>

<span class="p">[</span><span class="n">hosts</span><span class="o">-</span><span class="n">mongoc</span><span class="o">-</span><span class="n">data</span><span class="p">]</span>
<span class="n">host1</span><span class="o">.</span><span class="n">vm</span>    <span class="n">mongo_cluster_name</span><span class="o">=</span><span class="n">mongodb</span><span class="o">-</span><span class="n">data</span>                    <span class="n">mongo_rs_bootstrap</span><span class="o">=</span><span class="n">true</span>

<span class="p">[</span><span class="n">hosts</span><span class="o">-</span><span class="n">mongod</span><span class="o">-</span><span class="n">data</span><span class="p">]</span>
<span class="n">host1</span><span class="o">.</span><span class="n">vm</span>    <span class="n">mongo_cluster_name</span><span class="o">=</span><span class="n">mongodb</span><span class="o">-</span><span class="n">data</span>  <span class="n">mongo_shard_id</span><span class="o">=</span><span class="mi">0</span>  <span class="n">mongo_rs_bootstrap</span><span class="o">=</span><span class="n">true</span>
</pre></div>
</div>
<p>Le déploiement d’un cluster <code class="docutils literal notranslate"><span class="pre">mongodb-offer</span></code> suit les mêmes règles que l’exemple illustré ci-dessus (les groupes ansible ne sont pas les mêmes).</p>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="presentation.html" class="btn btn-neutral float-left" title="7.2.9.4.1. Présentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="deployProd.html" class="btn btn-neutral float-right" title="7.2.9.4.3. Déploiement d’un cluster de production" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>