<!DOCTYPE html>
<html class="writer-html4" lang="fr" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>6.4. Audit &mdash; Documentation VITAM - Documentation d&#39;exploitation 8.1.0</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="6.5. Gestion de la capacité" href="26-capacity_planning.html" />
    <link rel="prev" title="6.3. Logs" href="24-logs.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            VITAM - Documentation d'exploitation
              <img src="../_static/logo_vitam.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                8.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html#rappels">2. Rappels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prerequis-competences.html">3. Expertises requises</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">4. Architecture de la solution logicielle VITAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/_toc.html">5. Exploitation globale</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="_toc.html">6. Suivi de l’état du système</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="10-veille.html">6.1. Veille et patchs sécurité</a></li>
<li class="toctree-l2"><a class="reference internal" href="22-status-api.html">6.2. API de de supervision</a></li>
<li class="toctree-l2"><a class="reference internal" href="24-logs.html">6.3. Logs</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">6.4. Audit</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#audit-de-coherence">6.4.1. Audit de cohérence</a></li>
<li class="toctree-l3"><a class="reference internal" href="#audit-sur-les-collections-d-administration">6.4.2. Audit sur les collections d’administration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="26-capacity_planning.html">6.5. Gestion de la capacité</a></li>
<li class="toctree-l2"><a class="reference internal" href="27-security_sup.html">6.6. Suivi de l’état de sécurité</a></li>
<li class="toctree-l2"><a class="reference internal" href="30-alerting.html">6.7. Alerting</a></li>
<li class="toctree-l2"><a class="reference internal" href="40-workflow.html">6.8. Suivi des Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="41-logbook-consistency.html">6.9. Cohérence des journaux</a></li>
<li class="toctree-l2"><a class="reference internal" href="50-timers-systems.html">6.10. Liste des <cite>timers</cite> systemd</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../composants/_toc.html">7. Exploitation des COTS de la solution logicielle VITAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../include/_toc.html">8. Exploitation des composants de la solution logicielle VITAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../external_app.html">9. Intégration d’une application externe dans Vitam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshoot/_toc.html">10. Aide à l’exploitation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ/_toc.html">11. Questions Fréquemment Posées</a></li>
<li class="toctree-l1"><a class="reference internal" href="../annexes/_toc.html">12. Annexes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">VITAM - Documentation d'exploitation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="_toc.html">6. Suivi de l’état du système</a></li>
      <li class="breadcrumb-item active">6.4. Audit</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/monitoring/25-audit.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="audit">
<h1>6.4. Audit<a class="headerlink" href="#audit" title="Lien permanent vers ce titre">¶</a></h1>
<p>Divers audits sont mis à disposition des utilisateurs et administrateurs par le biais de l”<a class="reference internal" href="../introduction.html#term-ihm"><span class="xref std std-term">IHM</span></a> de démonstration sont décrits dans le Manuel Utilisateurs.</p>
<div class="section" id="audit-de-coherence">
<h2>6.4.1. Audit de cohérence<a class="headerlink" href="#audit-de-coherence" title="Lien permanent vers ce titre">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Il est recommandé de procéder à un audit de cohérence aléatoire dans le cadre d’opérations techniques ciblées, telles qu’une migration de plate-forme et de données.</p>
</div>
<p>Pour lancer un audit de cohérence, il faut lancer le playbook comme suit :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ansible-playbook ansible-vitam-exploitation/audit_coherence.yml -i environments/hosts.&lt;environnement&gt; --ask-vault-pass  -e <span class="s2">&quot;tenantId=&lt;tenant id&gt; access_contract=&lt;access contrat&gt; operationIds=&lt;operationid1,operationid2...&gt;&quot;</span>
</pre></div>
</div>
<p>Les paramètres à spécifier sont :</p>
<ul class="simple">
<li><cite>tenantId</cite> : Le tenant à auditer</li>
<li><cite>access_contract</cite> : Le contrat d’accès</li>
<li><cite>operationIds</cite> : La liste des opérations d’entrée (ingest) à auditer au format <cite>guid1,guid2,…guidN</cite> (séparées par des virgules, sans espaces). L’audit portera sur les unités archivistiques versées au cours des opérations d’entrée spécifiées.</li>
</ul>
<p>Les identifiants des opérations d’entrée (ingest) à cibler peuvent être récupérés depuis l’IHM via le journal des opérations, en filtrant sur les opérations de type «&nbsp;Entrée&nbsp;» (INGEST). Il peut s’agir d’opérations choisies aléatoirement ou ciblées sur une période donnée.</p>
<div class="admonition caution">
<p class="first admonition-title">Prudence</p>
<p class="last">L’audit de cohérence est un workflow lourd qui doit être lancé sur un volume modéré d’unités archivistiques (100K maximum). Les opérations d’entrée (ingest) à auditer doivent être renseignées en conséquent (ex. Si les versement contiennent 10K unités archivistiques en moyenne, ne pas renseigner plus de 10 opérations).</p>
</div>
</div>
<div class="section" id="audit-sur-les-collections-d-administration">
<h2>6.4.2. Audit sur les collections d’administration<a class="headerlink" href="#audit-sur-les-collections-d-administration" title="Lien permanent vers ce titre">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Cet audit permet de contrôler la présence/absence d’un référentiel (une collection d’administration fonctionnelle ou technique) sur les offres de stockage.</p>
</div>
<p>Pour lancer un audit des référentiels, il faut lancer le playbook comme suit :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ansible-playbook ansible-vitam-exploitation/audit_referential.yml -i environments/hosts.&lt;environnement&gt; --ask-vault-pass -e <span class="s2">&quot;tenant_id=&lt;tenant&gt; collectionName=&lt;nom_collection&gt;&quot;</span>
</pre></div>
</div>
<p>Liste des <cite>collectionName</cite> disponible pour l’audit:</p>
<ul class="simple">
<li>Access_Contract</li>
<li>Accession_Register_Summary</li>
<li>Agencies</li>
<li>Archive_Unit_Profile</li>
<li>Formats</li>
<li>Ingest_Contract</li>
<li>Profile</li>
<li>Rules</li>
</ul>
<div class="admonition hint">
<p class="first admonition-title">Indication</p>
<p class="last">L’audit est lancé sur un seul tenant et une seule collection. Le tenant doit être le tenant d’administration dans le cas où la collection n’est accessible que par le tenant d’administration.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="24-logs.html" class="btn btn-neutral float-left" title="6.3. Logs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="26-capacity_planning.html" class="btn btn-neutral float-right" title="6.5. Gestion de la capacité" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>