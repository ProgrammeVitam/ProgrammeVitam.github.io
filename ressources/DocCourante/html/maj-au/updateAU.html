

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Mise à jour d’un SIP &mdash; documentation VITAM - Mise à jour des unités archivistiques 0.26.1</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Recherche" href="search.html"/>
    <link rel="top" title="documentation VITAM - Mise à jour des unités archivistiques 0.26.1" href="index.html"/>
        <link rel="prev" title="VITAM - Mise à jour des unités archivistiques" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> VITAM - Mise à jour des unités archivistiques
          

          
            
            <img src="_static/LogoVitamGrand2.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.26.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Mise à jour d&#8217;un SIP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#principe-de-fonctionnement">Principe de fonctionnement</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#update">Update</a></li>
<li class="toctree-l3"><a class="reference internal" href="#evolutions-futures">Evolutions futures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mise-a-jour-du-schema-xsd-seda">Mise à jour du schéma XSD SEDA</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#precision-du-systemid">Précision du SystemId</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mise-a-jour-de-contenu">Mise à jour de contenu</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#suppression-de-lien">Suppression de lien</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ajout-de-lien">Ajout de lien</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#exemples-de-mise-a-jour">Exemples de mise à jour</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#initialisation">Initialisation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mise-a-jour-de-contenu-simple">Mise à jour de contenu simple</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ajout-d-un-lien">Ajout d&#8217;un lien</a></li>
<li class="toctree-l3"><a class="reference internal" href="#suppression-d-un-lien">Suppression d&#8217;un lien</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mise-a-jour-via-les-ihm">Mise à jour via les IHM</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">VITAM - Mise à jour des unités archivistiques</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Mise à jour d&#8217;un SIP</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/updateAU.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mise-a-jour-d-un-sip">
<h1>Mise à jour d&#8217;un SIP<a class="headerlink" href="#mise-a-jour-d-un-sip" title="Lien permanent vers ce titre">¶</a></h1>
<p>Cette partie décrit la mise à jour d&#8217;une Unité Archivistique dans Vitam.</p>
<div class="section" id="principe-de-fonctionnement">
<h2>Principe de fonctionnement<a class="headerlink" href="#principe-de-fonctionnement" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="update">
<h3>Update<a class="headerlink" href="#update" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour le moment, seul le cas de l&#8217;ajout d&#8217;une nouvelle Unité Archivistique à une Unité Archivistique existante est en place.</p>
<ol class="arabic simple">
<li>Lors de l&#8217;extraction SEDA, si une Unité Archivistique déclare un identifiant Vitam dans une Unité Archivistique (<em>&lt;SystemId&gt;GUID&lt;/SystemId&gt;</em>), alors les données de l&#8217;Unité Archivistique existante sont récupérées et un flag <em>&lt;existing&gt;true&lt;/existing&gt;</em> est ajouté pour indiquer qu&#8217;il s&#8217;agit d&#8217;un mise à jour.</li>
<li>Les règles de gestion sont recalculées pour les Unités Archivistiques dont les métadonnées on été modifiées</li>
<li>Lors de l&#8217;indexation des metadonnées, si l&#8217;Unité Archivistique est indiquée comme existante, alors on opère une mise à jour des données et on ajoute l&#8217;identifiant de l&#8217;opération en cours. Ajourd&#8217;hui l&#8217;implémentation de l&#8217;algorithme prends également en compte la mise à jour des métadonnées : toutes les métadonnées déclarées dans le bordereau s&#8217;ajoutent ou remplacent les métadonnées existantes.</li>
<li>Alimentation des registres de fond : se comporte comme pour un ajout d&#8217;Unité Archivistique pour les existants</li>
</ol>
</div>
<div class="section" id="evolutions-futures">
<h3>Evolutions futures<a class="headerlink" href="#evolutions-futures" title="Lien permanent vers ce titre">¶</a></h3>
<p>Toute Unité Archivistique déclarée dans le bordereau sera mise à jour en base car il est obligatoire de déclarer le <em>&lt;Title&gt;..&lt;/Title&gt;</em> et le <em>&lt;DescriptionLevel&gt;..&lt;/DescriptionLevel&gt;</em>, il n&#8217;est donc pas possible de déclarer que les métadonnées des Unités Archivistiques ne doivent pas être modifiées.
Une évolutions du schéma xsd seda sera faite.</p>
<p>De plus, il faut définir une tâche dans le step de vérification du borderau pour apporter une information explicitant quand même la mise à jour. Elle pourrait correspondre techniquement à la vérification de l&#8217;existence de l&#8217;unité archivistique et pourrait s&#8217;intituler &#8220;Vérification de l&#8217;existence de l&#8217;unité archivistique en vue d&#8217;une mise à jour&#8221;.</p>
</div>
</div>
<div class="section" id="mise-a-jour-du-schema-xsd-seda">
<h2>Mise à jour du schéma XSD SEDA<a class="headerlink" href="#mise-a-jour-du-schema-xsd-seda" title="Lien permanent vers ce titre">¶</a></h2>
<p>Cette partie a pour but de présenter l&#8217;implémentation qui a été mise en place pour enrichir la norme SEDA.</p>
<p>Le but étant de proposer la mise à jour d&#8217;UA via le langage XML.</p>
<dl class="docutils">
<dt>Les différents types de mises à jour :</dt>
<dd><ul class="first last simple">
<li>Premier type de mise à jour : mise à jour de contenu (der métadonnées ou encore de règles de gestion). Il pourra être question de modifications de contenu (mise à jour / enrichissement de titre, description, ou ajout de nouvelles métadonnées, etc.). On peut déterminer d&#8217;ores et déjà que l&#8217;on pourra proposer deux modes de mise à jour: un mode PATCH (modification d&#8217;un ou plusieurs champs particuliers) et un mode FULL (annule et remplace).</li>
<li>Deuxième type de mise à jour : la mise à jour de liens. Il s&#8217;agit ici de modification (ajout / suppression) de liens entre plusieurs UA. Pour respecter la logique SEDA, les modifications (ajouts et suppressions) de liens se feront toujours du père vers les fils (elles seront déclarées dans l&#8217;UA père).</li>
</ul>
</dd>
</dl>
<p>Pour pouvoir décrire ce genre d&#8217;opérations via un xml, il convient donc d&#8217;étendre le schéma SEDA existant. Pour se faire, il a fallu implémenter un élément abstract : OtherManagementAbstract à l&#8217;intérieur de la balise Management pour un unité archivistique donné.</p>
<p>L&#8217;implémentation choisie porte le nom &#8220;UpdateOperation&#8221;. Pour toute opération de mise à jour, il faudra donc préciser une balise &#8220;UpdateOperation&#8221;.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;ArchiveUnit&gt;</span>
    <span class="c">&lt;!-- ADDITIONNAL INFORMATION --&gt;</span>
    <span class="nt">&lt;Management&gt;</span>
    <span class="c">&lt;!-- ADDITIONNAL INFORMATION --&gt;</span>
      <span class="nt">&lt;UpdateOperation&gt;</span>
         <span class="c">&lt;!-- ADDITIONNAL INFORMATION --&gt;</span>
      <span class="nt">&lt;/UpdateOperation&gt;</span>
    <span class="nt">&lt;/Management&gt;</span>
<span class="nt">&lt;ArchiveUnit&gt;</span>
</pre></div>
</div>
<div class="section" id="precision-du-systemid">
<h3>Précision du SystemId<a class="headerlink" href="#precision-du-systemid" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour pouvoir indiquer simplement au moteur VITAM que l&#8217;unité archivistique que l&#8217;on tente de mettre à jour est déjà existante dans le système, un champ SystemId doit être indiqué.
Pour le moment, l&#8217;identification d&#8217;un archive unit pré-existant dans le système Vitam se fera via son GUID. Plus tard, on étudiera la possibilité de passer par un système de requête pour sélectionner un UA.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;ArchiveUnit&gt;</span>
    <span class="c">&lt;!-- ADDITIONNAL INFORMATION --&gt;</span>
    <span class="nt">&lt;Management&gt;</span>
    <span class="c">&lt;!-- ADDITIONNAL INFORMATION --&gt;</span>
      <span class="nt">&lt;UpdateOperation&gt;</span>
         <span class="nt">&lt;SystemId&gt;</span>GUID_MY_ARCHIVE_UNIT<span class="nt">&lt;/SystemId&gt;</span>
      <span class="nt">&lt;/UpdateOperation&gt;</span>
    <span class="nt">&lt;/Management&gt;</span>
<span class="nt">&lt;ArchiveUnit&gt;</span>
</pre></div>
</div>
<p>On utilise toujours, au sein du SEDA, les « XML ID » afin de définir des liens entre plusieurs UA.
Le système est capable de récupérer les objets concernés grâce à la balise SystemId (id interne à VITAM) s’ils existent déjà dans le SAE.
Ainsi, pour créer un lien entre deux UA existants dans le système, il faudra les déclarer tous les deux dans le SEDA via lla balise &#8220;XML ID&#8221; tout en indiquant le SystemID (GUID).</p>
</div>
<div class="section" id="mise-a-jour-de-contenu">
<h3>Mise à jour de contenu<a class="headerlink" href="#mise-a-jour-de-contenu" title="Lien permanent vers ce titre">¶</a></h3>
<p>En plus de l&#8217;ajout de l&#8217;information sur le SystemId pour indiquer au système que l&#8217;UA existe déjà, si l&#8217;on souhaite effectuer une mise à jour de son contenu, il conviendra, en plus de la précision des données modifiées (dans la partie Content, pas de modification, de ce côté) préciser le type de mise à jour souhaité : totale ou partielle.
Une balise FullUpdate permettra de spécifier le type de mise à jour.</p>
<p>Remplacer FullUpdate (false/true) par updateMode (NO_DATA, PATCH, FULL)</p>
<p>Pour une mise à jour partielle (seuls les champs précisés dans Content seront mis à jour) :</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;ArchiveUnit&gt;</span>
    <span class="c">&lt;!-- ADDITIONNAL INFORMATION --&gt;</span>
    <span class="nt">&lt;Management&gt;</span>
      <span class="c">&lt;!-- Nouvelle regle --&gt;</span>
      <span class="nt">&lt;DisseminationRule&gt;</span>
         <span class="nt">&lt;Rule&gt;</span>DIS-00001<span class="nt">&lt;/Rule&gt;</span>
         <span class="nt">&lt;StartDate&gt;</span>2008-07-14<span class="nt">&lt;/StartDate&gt;</span>
      <span class="nt">&lt;/DisseminationRule&gt;</span>
      <span class="nt">&lt;UpdateOperation&gt;</span>
         <span class="nt">&lt;SystemId&gt;</span>GUID_MY_ARCHIVE_UNIT<span class="nt">&lt;/SystemId&gt;</span>
         <span class="nt">&lt;FullUpdate&gt;</span>false<span class="nt">&lt;/FullUpdate&gt;</span>
      <span class="nt">&lt;/UpdateOperation&gt;</span>
    <span class="nt">&lt;/Management&gt;</span>
    <span class="nt">&lt;Content&gt;</span>
      <span class="c">&lt;!-- Nouvelle titre --&gt;</span>
      <span class="nt">&lt;Title&gt;</span>Mon nouveau Titre<span class="nt">&lt;/Title&gt;</span>
    <span class="nt">&lt;/Content&gt;</span>
<span class="nt">&lt;ArchiveUnit&gt;</span>
</pre></div>
</div>
<p>Pour une mise à jour complète (annule et remplace) :</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;ArchiveUnit&gt;</span>
    <span class="c">&lt;!-- ADDITIONNAL INFORMATION --&gt;</span>
    <span class="nt">&lt;Management&gt;</span>
      <span class="nt">&lt;DisseminationRule&gt;</span>
         <span class="nt">&lt;Rule&gt;</span>DIS-00001<span class="nt">&lt;/Rule&gt;</span>
         <span class="nt">&lt;StartDate&gt;</span>2008-07-14<span class="nt">&lt;/StartDate&gt;</span>
      <span class="nt">&lt;/DisseminationRule&gt;</span>
      <span class="nt">&lt;UpdateOperation&gt;</span>
         <span class="nt">&lt;SystemId&gt;</span>GUID_MY_ARCHIVE_UNIT<span class="nt">&lt;/SystemId&gt;</span>
         <span class="nt">&lt;FullUpdate&gt;</span>true<span class="nt">&lt;/FullUpdate&gt;</span>
      <span class="nt">&lt;/UpdateOperation&gt;</span>
    <span class="nt">&lt;/Management&gt;</span>
    <span class="nt">&lt;Content&gt;</span>
      <span class="nt">&lt;DescriptionLevel&gt;</span>Item<span class="nt">&lt;/DescriptionLevel&gt;</span>
      <span class="nt">&lt;Title&gt;</span>Histoire de la station de sa cération à 1946.pdf<span class="nt">&lt;/Title&gt;</span>
      <span class="nt">&lt;TransactedDate&gt;</span>2015-12-04T09:02:25<span class="nt">&lt;/TransactedDate&gt;</span>
    <span class="nt">&lt;/Content&gt;</span>
<span class="nt">&lt;ArchiveUnit&gt;</span>
</pre></div>
</div>
<div class="section" id="suppression-de-lien">
<h4>Suppression de lien<a class="headerlink" href="#suppression-de-lien" title="Lien permanent vers ce titre">¶</a></h4>
<img alt="_images/ua_remove_link.jpeg" src="_images/ua_remove_link.jpeg" />
<p>La suppression d&#8217;un lien entre un UA père et un UA fils sera obligatoirement déclarée sur l&#8217;UA père, pour respecter la logique SEDA.
Une balise ToDelete permettra de lister les liens entre l&#8217;UA père et ses UA fils référencés.</p>
<p>Pour la suppression d&#8217;un lien :</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;ArchiveUnit</span> <span class="na">id=</span><span class="s">&quot;ID_PERE&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- ADDITIONNAL INFORMATION --&gt;</span>
    <span class="nt">&lt;Management&gt;</span>
    <span class="c">&lt;!-- ADDITIONNAL INFORMATION --&gt;</span>
      <span class="nt">&lt;UpdateOperation&gt;</span>
         <span class="nt">&lt;SystemId&gt;</span>GUID_ARCHIVE_UNIT_PERE<span class="nt">&lt;/SystemId&gt;</span>
         <span class="nt">&lt;ToDelete&gt;</span>
            <span class="nt">&lt;ArchiveUnitRefId&gt;</span>XML_ID_FILS_1<span class="nt">&lt;/ArchiveUnitRefId&gt;</span>
         <span class="nt">&lt;/ToDelete&gt;</span>
      <span class="nt">&lt;/UpdateOperation&gt;</span>
    <span class="nt">&lt;/Management&gt;</span>
<span class="nt">&lt;ArchiveUnit&gt;</span>

<span class="nt">&lt;ArchiveUnit</span> <span class="na">id=</span><span class="s">&quot;ID_FILS_1&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;Management&gt;</span>
    <span class="c">&lt;!-- ADDITIONNAL INFORMATION --&gt;</span>
      <span class="nt">&lt;UpdateOperation&gt;</span>
         <span class="nt">&lt;SystemId&gt;</span>GUID_ARCHIVE_UNIT_FILS_1<span class="nt">&lt;/SystemId&gt;</span>
      <span class="nt">&lt;/UpdateOperation&gt;</span>
    <span class="nt">&lt;/Management&gt;</span>
<span class="nt">&lt;ArchiveUnit&gt;</span>
</pre></div>
</div>
<p>A l&#8217;intérieur de la balise ArchiveUnitRefId, on doit référencer un XML ID. C&#8217;est à dire un ID interne au xml. Il ne s&#8217;agit donc pas ici d&#8217;un GUID référencé dans le système Vitam, mais bien une référence à un UA déclaré dans le bordereau.
Dans le bordereau doit donc être précisé également le SystemId de l&#8217;UA fils référencé, comme indiqué dans l&#8217;exemple ci-dessus, sinon le xml ne sera pas valide.</p>
</div>
<div class="section" id="ajout-de-lien">
<h4>Ajout de lien<a class="headerlink" href="#ajout-de-lien" title="Lien permanent vers ce titre">¶</a></h4>
<p>L&#8217;ajout de lien entre un UA père et un UA fils sera obligatoirement déclaré sur l&#8217;UA père, pour respecter la logique SEDA.
En complément de l&#8217;utilisation de la nouvelle balise SystemId, il conviendra d&#8217;utiliser la balise existante prévue par la norme SEDA : ArchiveUnitRefId.</p>
<dl class="docutils">
<dt>Quatre cas sont possibles :</dt>
<dd><ul class="first simple">
<li>Ajout d&#8217;un lien entre deux UA existants déjà dans le système VITAM.</li>
</ul>
<img alt="_images/ua_add_link.jpeg" src="_images/ua_add_link.jpeg" />
<ul class="simple">
<li>Ajout d&#8217;un nouvel UA fils à un UA père déjà existant dans le système VITAM.</li>
</ul>
<img alt="_images/ua_add_child_and_link.jpeg" src="_images/ua_add_child_and_link.jpeg" />
<ul class="simple">
<li>Ajout d&#8217;un UA fils à un nouvel UA père non existant dans le système VITAM.</li>
</ul>
<img alt="_images/ua_add_parent_and_link.jpeg" src="_images/ua_add_parent_and_link.jpeg" />
<ul class="last simple">
<li>Ajout d&#8217;un nouvel UA fils à un nouvel UA père.</li>
</ul>
</dd>
</dl>
<p>Pour le cas 1 (Ajout d&#8217;un lien entre deux UA existants déjà dans le système VITAM) :</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;ArchiveUnit</span> <span class="na">id=</span><span class="s">&quot;ID_PERE&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- ADDITIONNAL INFORMATION --&gt;</span>
    <span class="nt">&lt;Management&gt;</span>
    <span class="c">&lt;!-- ADDITIONNAL INFORMATION --&gt;</span>
      <span class="nt">&lt;UpdateOperation&gt;</span>
         <span class="nt">&lt;SystemId&gt;</span>GUID_ARCHIVE_UNIT_PERE<span class="nt">&lt;/SystemId&gt;</span>
      <span class="nt">&lt;/UpdateOperation&gt;</span>
    <span class="nt">&lt;/Management&gt;</span>
    <span class="nt">&lt;ArchiveUnitRefId&gt;</span>ID_FILS_1<span class="nt">&lt;/ArchiveUnitRefId&gt;</span>
<span class="nt">&lt;ArchiveUnit&gt;</span>

<span class="nt">&lt;ArchiveUnit</span> <span class="na">id=</span><span class="s">&quot;ID_FILS_1&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;Management&gt;</span>
    <span class="c">&lt;!-- ADDITIONNAL INFORMATION --&gt;</span>
      <span class="nt">&lt;UpdateOperation&gt;</span>
         <span class="nt">&lt;SystemId&gt;</span>GUID_ARCHIVE_UNIT_FILS_1<span class="nt">&lt;/SystemId&gt;</span>
      <span class="nt">&lt;/UpdateOperation&gt;</span>
    <span class="nt">&lt;/Management&gt;</span>
<span class="nt">&lt;ArchiveUnit&gt;</span>
</pre></div>
</div>
<p>Pour le cas 2 (Ajout d&#8217;un nouvel UA fils à un UA père déjà existant dans le système VITAM) :</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;ArchiveUnit</span> <span class="na">id=</span><span class="s">&quot;ID_PERE&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- ADDITIONNAL INFORMATION --&gt;</span>
    <span class="nt">&lt;Management&gt;</span>
    <span class="c">&lt;!-- ADDITIONNAL INFORMATION --&gt;</span>
      <span class="nt">&lt;UpdateOperation&gt;</span>
         <span class="nt">&lt;SystemId&gt;</span>GUID_ARCHIVE_UNIT_PERE<span class="nt">&lt;/SystemId&gt;</span>
      <span class="nt">&lt;/UpdateOperation&gt;</span>
    <span class="nt">&lt;/Management&gt;</span>
    <span class="nt">&lt;ArchiveUnitRefId&gt;</span>ID_FILS_1_NOUVEAU<span class="nt">&lt;/ArchiveUnitRefId&gt;</span>
<span class="nt">&lt;ArchiveUnit&gt;</span>

<span class="nt">&lt;ArchiveUnit</span> <span class="na">id=</span><span class="s">&quot;ID_FILS_1_NOUVEAU&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;Management&gt;</span>
      <span class="c">&lt;!-- Information sur le management --&gt;</span>
   <span class="nt">&lt;/Management&gt;</span>
   <span class="nt">&lt;Content&gt;</span>
      <span class="c">&lt;!-- Information sur le content --&gt;</span>
   <span class="nt">&lt;/Content&gt;</span>
<span class="nt">&lt;ArchiveUnit&gt;</span>
</pre></div>
</div>
<p>Pour le cas 3 (Ajout d&#8217;un UA fils à un nouvel UA père non existant dans le système VITAM) :</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;ArchiveUnit</span> <span class="na">id=</span><span class="s">&quot;ID_PERE&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;Management&gt;</span>
      <span class="c">&lt;!-- Information sur le management --&gt;</span>
   <span class="nt">&lt;/Management&gt;</span>
   <span class="nt">&lt;Content&gt;</span>
      <span class="c">&lt;!-- Information sur le management --&gt;</span>
   <span class="nt">&lt;/Content&gt;</span>
   <span class="nt">&lt;ArchiveUnitRefId&gt;</span>ID_FILS_1_EXISTANT<span class="nt">&lt;/ArchiveUnitRefId&gt;</span>
<span class="nt">&lt;ArchiveUnit&gt;</span>
<span class="nt">&lt;ArchiveUnit</span> <span class="na">id=</span><span class="s">&quot;ID_FILS_1_EXISTANT&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- ADDITIONNAL INFORMATION --&gt;</span>
    <span class="nt">&lt;Management&gt;</span>
    <span class="c">&lt;!-- ADDITIONNAL INFORMATION --&gt;</span>
      <span class="nt">&lt;UpdateOperation&gt;</span>
         <span class="nt">&lt;SystemId&gt;</span>GUID_ARCHIVE_UNIT_FILS_1_EXISTANT<span class="nt">&lt;/SystemId&gt;</span>
      <span class="nt">&lt;/UpdateOperation&gt;</span>
    <span class="nt">&lt;/Management&gt;</span>
<span class="nt">&lt;ArchiveUnit&gt;</span>
</pre></div>
</div>
<p>Pour le cas 4 (Ajout d&#8217;un nouvel UA fils à un nouvel UA père - cas nominal) :</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;ArchiveUnit</span> <span class="na">id=</span><span class="s">&quot;ID_PERE&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;Management&gt;</span>
      <span class="c">&lt;!-- Information sur le management --&gt;</span>
   <span class="nt">&lt;/Management&gt;</span>
   <span class="nt">&lt;Content&gt;</span>
      <span class="c">&lt;!-- Information sur le management --&gt;</span>
   <span class="nt">&lt;/Content&gt;</span>
   <span class="nt">&lt;ArchiveUnitRefId&gt;</span>ID_FILS_1_NOUVEAU<span class="nt">&lt;/ArchiveUnitRefId&gt;</span>
<span class="nt">&lt;ArchiveUnit&gt;</span>
<span class="nt">&lt;ArchiveUnit</span> <span class="na">id=</span><span class="s">&quot;ID_FILS_1_NOUVEAU&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;Management&gt;</span>
      <span class="c">&lt;!-- Information sur le management --&gt;</span>
   <span class="nt">&lt;/Management&gt;</span>
   <span class="nt">&lt;Content&gt;</span>
      <span class="c">&lt;!-- Information sur le management --&gt;</span>
   <span class="nt">&lt;/Content&gt;</span>
<span class="nt">&lt;ArchiveUnit&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="exemples-de-mise-a-jour">
<h2>Exemples de mise à jour<a class="headerlink" href="#exemples-de-mise-a-jour" title="Lien permanent vers ce titre">¶</a></h2>
<p>Vous trouverez ci-dessous des exemples d&#8217;utilisation (à adapter, bien évidemment) d&#8217;utilisation des différentes opérations de mise à jour.</p>
<div class="section" id="initialisation">
<h3>Initialisation<a class="headerlink" href="#initialisation" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour pouvoir effectuer des opérations de mise à jour, il convient d&#8217;effectuer une Entrée.
Pour notre exemple, nous allons réaliser l&#8217;import d&#8217;un SIP renseignant :</p>
<ul class="simple">
<li>1 ArchiveUnit XML_ID1.</li>
<li>1 ArchiveUnit XML_ID2 seul.</li>
<li>1 ArchiveUnit XML_ID_FILS1 rattaché à l&#8217;ArchiveUnit XML_ID1. Cet ArchiveUnit référençant un DataObject, déclaré dans le bordereau.</li>
<li>1 ArchiveUnit XML_ID_FILS2 rattaché à l&#8217;ArchiveUnit XML_ID1.</li>
</ul>
<p>Le SIP d&#8217;initialisation se trouvant ici : :download:&#8217;&lt;files/SIP_INIT.zip&gt;&#8217;
Le bordereau : :download:&#8217;&lt;files/manifest_INIT.xml&gt;&#8217;</p>
</div>
<div class="section" id="mise-a-jour-de-contenu-simple">
<h3>Mise à jour de contenu simple<a class="headerlink" href="#mise-a-jour-de-contenu-simple" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le but ici est de mettre à jour les métadonnées de l&#8217;ArchiveUnit XML_ID1 d&#8217;origine.
Le bordereau permettant de faire cette mise à jour : :download:&#8217;&lt;files/manifest_UPDATE_CONTENT.xml&gt;&#8217;</p>
<p>Ci-dessous un extrait de la syntaxe :</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;UpdateOperation&gt;</span>
      <span class="nt">&lt;SystemId&gt;</span>aeaaaaaaaaaam7mxab2kkakzn5mib7aaaaaq<span class="nt">&lt;/SystemId&gt;</span>
      <span class="nt">&lt;FullUpdate&gt;</span>false<span class="nt">&lt;/FullUpdate&gt;</span>
<span class="nt">&lt;/UpdateOperation&gt;</span>
</pre></div>
</div>
<p><em>Note</em> : il conviendra de remplacer le contenu de la balise &lt;SystemId&gt; par l&#8217;identifiant interne généré lors de l&#8217;entrée original.</p>
<p>Après l&#8217;import du SIP contenant ce bordereau (pas d&#8217;objet nécéssaire dans le SIP), les informations de l&#8217;ArchiveUnit XML_ID1 seront mises à jour.</p>
</div>
<div class="section" id="ajout-d-un-lien">
<h3>Ajout d&#8217;un lien<a class="headerlink" href="#ajout-d-un-lien" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le but ici est l&#8217;ajout d&#8217;un lien entre l&#8217;ArchiveUnit XML_ID2 et l&#8217;ArchiveUnit XML_ID_FILS2.
Le bordereau permettant de faire cette mise à jour : :download:&#8217;&lt;files/manifest ADD_LINK.xml&gt;&#8217;</p>
<p>Ci-dessous un extrait de la syntaxe :</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Dans la balise Management de l&#39;ArchiveUnit XML_ID2 --&gt;</span>
<span class="nt">&lt;UpdateOperation&gt;</span>
   <span class="nt">&lt;SystemId&gt;</span>aeaaaaaaaaaam7mxab2kkakzn5micdiaaaaq<span class="nt">&lt;/SystemId&gt;</span>
<span class="nt">&lt;/UpdateOperation&gt;</span>
<span class="c">&lt;!-- Puis plus loin toujours dans la balise ArchiveUnit de XML_ID2 --&gt;</span>
<span class="nt">&lt;ArchiveUnit</span> <span class="na">id=</span><span class="s">&quot;XML_ID21&quot;</span><span class="nt">&gt;</span>
     <span class="nt">&lt;ArchiveUnitRefId&gt;</span>XML_ID_FILS2<span class="nt">&lt;/ArchiveUnitRefId&gt;</span>
 <span class="nt">&lt;/ArchiveUnit&gt;</span>
</pre></div>
</div>
<p><em>Note</em> : il conviendra de remplacer les contenus des balises &lt;SystemId&gt; par les identifiants internes générés lors de l&#8217;entrée original.</p>
<p>Après l&#8217;import du SIP contenant ce bordereau (pas d&#8217;objet nécéssaire dans le SIP), l&#8217;ArchiveUnit XML_ID2 sera un père de l&#8217;ArchiveUnit XML_ID_FILS2.</p>
</div>
<div class="section" id="suppression-d-un-lien">
<h3>Suppression d&#8217;un lien<a class="headerlink" href="#suppression-d-un-lien" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le but ici est la suppression d&#8217;un lien existant entre l&#8217;ArchiveUnit XML_ID1 et l&#8217;ArchiveUnit XML_ID_FILS2.
Le bordereau permettant de faire cette mise à jour : :download:&#8217;&lt;files/manifest DELETE_LINK.xml&gt;&#8217;</p>
<p>Ci-dessous un extrait de la syntaxe :</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;UpdateOperation&gt;</span>
   <span class="nt">&lt;SystemId&gt;</span>aeaaaaaaaaaam7mxab2kkakzn5mib7aaaaaq<span class="nt">&lt;/SystemId&gt;</span>
   <span class="nt">&lt;ToDelete&gt;</span>
      <span class="nt">&lt;ArchiveUnitRefId&gt;</span>XML_ID_FILS2<span class="nt">&lt;/ArchiveUnitRefId&gt;</span>
   <span class="nt">&lt;/ToDelete&gt;</span>
<span class="nt">&lt;/UpdateOperation&gt;</span>
</pre></div>
</div>
<p><em>Note</em> : il conviendra de remplacer les contenus des balises &lt;SystemId&gt; par les identifiants internes générés lors de l&#8217;entrée original.</p>
<p>Après l&#8217;import du SIP contenant ce bordereau (pas d&#8217;objet nécéssaire dans le SIP), l&#8217;ArchiveUnit XML_ID1 ne sera plus un père de l&#8217;ArchiveUnit XML_ID_FILS2.</p>
</div>
</div>
<div class="section" id="mise-a-jour-via-les-ihm">
<h2>Mise à jour via les IHM<a class="headerlink" href="#mise-a-jour-via-les-ihm" title="Lien permanent vers ce titre">¶</a></h2>
<p>En ce qui concerne l&#8217;utilisation via les IHM minimales, ce n&#8217;est pas encore possible. Cette évolution sera dévelopée lors d&#8217;une unser story associée.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="index.html" class="btn btn-neutral" title="VITAM - Mise à jour des unités archivistiques" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.26.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>