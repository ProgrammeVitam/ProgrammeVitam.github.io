

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Base Logbook &mdash; documentation VITAM - Modèle de données 0.26.1</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Recherche" href="search.html"/>
    <link rel="top" title="documentation VITAM - Modèle de données 0.26.1" href="index.html"/>
        <link rel="next" title="4. Base MetaData" href="metadata.html"/>
        <link rel="prev" title="2. Base Identity" href="identity.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> VITAM - Modèle de données
          

          
            
            <img src="_static/LogoVitamGrand2.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.26.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="identity.html">2. Base Identity</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Base Logbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#collections-contenues-dans-la-base">3.1. Collections contenues dans la base</a></li>
<li class="toctree-l2"><a class="reference internal" href="#collection-logbookoperation">3.2. Collection LogbookOperation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#utilisation-de-la-collection-logbookoperation">3.2.1. Utilisation de la collection LogbookOperation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exemple-de-json-stocke-en-base-comprenant-l-exhaustivite-des-champs-de-la-collection-logbookoperation">3.2.2. Exemple de JSON stocké en base comprenant l&#8217;exhaustivité des champs de la collection LogbookOperation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detail-des-champs-du-json-stocke-dans-la-collection">3.2.3. Détail des champs du JSON stocké dans la collection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#champ-presents-dans-les-events">3.2.4. Champ présents dans les events</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detail-des-champs-du-json-stocke-en-base-specifiques-a-une-operation-de-securisation-des-journaux-d-operation-et-de-cycle-de-vie">3.2.5. Détail des champs du JSON stocké en base spécifiques à une opération de sécurisation des journaux d&#8217;opération et de cycle de vie</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#collection-logbooklifecycleunit">3.3. Collection LogbookLifeCycleUnit</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#utilisation-de-la-collection-logbooklifecycleunit">3.3.1. Utilisation de la collection LogbookLifeCycleUnit</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exemple-de-json-stocke-en-base-comprenant-l-exhaustivite-des-champs-de-la-collection-logbooklifecycleunit">3.3.2. Exemple de JSON stocké en base comprenant l&#8217;exhaustivité des champs de la collection LogbookLifeCycleUnit</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detail-des-champs-du-json-stocke-en-base">3.3.3. Détail des champs du JSON stocké en base</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detail-des-champs-du-json-stocke-en-base-specifiques-a-une-mise-a-jour">3.3.4. Détail des champs du JSON stocké en base spécifiques à une mise à jour</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#collection-logbooklifecycleobjectgroup">3.4. Collection LogbookLifeCycleObjectGroup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#utilisation-de-la-collection-logbooklifecycleobjectgroup">3.4.1. Utilisation de la collection LogbookLifeCycleObjectGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exemple-de-json-stocke-en-base-comprenant-l-exhaustivite-des-champs">3.4.2. Exemple de JSON stocké en base comprenant l&#8217;exhaustivité des champs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">3.4.3. Détail des champs du JSON stocké en base</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="metadata.html">4. Base MetaData</a></li>
<li class="toctree-l1"><a class="reference internal" href="masterdata.html">5. Base MasterData</a></li>
<li class="toctree-l1"><a class="reference internal" href="annexes.html">6. Annexes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">VITAM - Modèle de données</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>3. Base Logbook</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/logbook.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="base-logbook">
<h1>3. Base Logbook<a class="headerlink" href="#base-logbook" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="collections-contenues-dans-la-base">
<h2>3.1. Collections contenues dans la base<a class="headerlink" href="#collections-contenues-dans-la-base" title="Lien permanent vers ce titre">¶</a></h2>
<p>La base Logbook contient les collections relatives aux journaux d&#8217;opérations et de cycles de vie des unités archivistiques et des groupes d&#8217;objets de la solution logicielle Vitam.</p>
<p>L&#8217;ensemble des champs est peuplé automatiquement par Vitam.</p>
</div>
<div class="section" id="collection-logbookoperation">
<h2>3.2. Collection LogbookOperation<a class="headerlink" href="#collection-logbookoperation" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="utilisation-de-la-collection-logbookoperation">
<h3>3.2.1. Utilisation de la collection LogbookOperation<a class="headerlink" href="#utilisation-de-la-collection-logbookoperation" title="Lien permanent vers ce titre">¶</a></h3>
<p>La collection LogbookOperation comporte toutes les informations de traitement liées aux opérations effectuées dans la solution logicielle Vitam, chaque opération faisant l&#8217;objet d&#8217;un enregistrement distinct.</p>
<p>Ces opérations sont :</p>
<ul class="simple">
<li>Audit (implémentée dans la release en cours)</li>
<li>Données de référence (implémentée dans la release en cours)</li>
<li>Elimination (non implémentée dans la release en cours)</li>
<li>Entrée (implémentée dans la release en cours)</li>
<li>Mise à jour (implémentée dans la release en cours)</li>
<li>Préservation (non implémentée dans la release en cours)</li>
<li>Sécurisation (implémentée dans la release en cours)</li>
<li>Vérification (implémentée dans la release en cours)</li>
</ul>
<p>Les valeurs correspondant à ces opérations dans les journaux sont détaillées dans l&#8217;annexe 7.3.</p>
</div>
<div class="section" id="exemple-de-json-stocke-en-base-comprenant-l-exhaustivite-des-champs-de-la-collection-logbookoperation">
<h3>3.2.2. Exemple de JSON stocké en base comprenant l&#8217;exhaustivité des champs de la collection LogbookOperation<a class="headerlink" href="#exemple-de-json-stocke-en-base-comprenant-l-exhaustivite-des-champs-de-la-collection-logbookoperation" title="Lien permanent vers ce titre">¶</a></h3>
<p>Extrait d&#8217;un JSON correspondant à une opération d&#8217;entrée terminée avec succès.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacec45rhabfy2ak6ox625ciaaaaq&quot;</span><span class="p">,</span>
   <span class="s2">&quot;evId&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacec45rhabfy2ak6ox625ciaaaaq&quot;</span><span class="p">,</span>
   <span class="s2">&quot;evParentId&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
   <span class="s2">&quot;evType&quot;</span><span class="p">:</span> <span class="s2">&quot;PROCESS_SIP_UNITARY&quot;</span><span class="p">,</span>
   <span class="s2">&quot;evDateTime&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-09-12T12:08:33.166&quot;</span><span class="p">,</span>
   <span class="s2">&quot;evDetData&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\n</span><span class="s2">  </span><span class="se">\&quot;</span><span class="s2">EvDetailReq</span><span class="se">\&quot;</span><span class="s2"> : </span><span class="se">\&quot;</span><span class="s2">Cartes postales (Grande Collecte)</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\n</span><span class="s2">  </span><span class="se">\&quot;</span><span class="s2">EvDateTimeReq</span><span class="se">\&quot;</span><span class="s2"> : </span><span class="se">\&quot;</span><span class="s2">2016-10-12T16:28:40</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\n</span><span class="s2">  </span><span class="se">\&quot;</span><span class="s2">ArchivalAgreement</span><span class="se">\&quot;</span><span class="s2"> : </span><span class="se">\&quot;</span><span class="s2">ArchivalAgreement0</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\n</span><span class="s2">  </span><span class="se">\&quot;</span><span class="s2">ServiceLevel</span><span class="se">\&quot;</span><span class="s2"> : null</span><span class="se">\n</span><span class="s2">}&quot;</span><span class="p">,</span>
   <span class="s2">&quot;evIdProc&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacec45rhabfy2ak6ox625ciaaaaq&quot;</span><span class="p">,</span>
   <span class="s2">&quot;evTypeProc&quot;</span><span class="p">:</span> <span class="s2">&quot;INGEST&quot;</span><span class="p">,</span>
   <span class="s2">&quot;outcome&quot;</span><span class="p">:</span> <span class="s2">&quot;STARTED&quot;</span><span class="p">,</span>
   <span class="s2">&quot;outDetail&quot;</span><span class="p">:</span> <span class="s2">&quot;PROCESS_SIP_UNITARY.STARTED&quot;</span><span class="p">,</span>
   <span class="s2">&quot;outMessg&quot;</span><span class="p">:</span> <span class="s2">&quot;Début du processus d&#39;entrée du SIP : aedqaaaaacec45rhabfy2ak6ox625ciaaaaq&quot;</span><span class="p">,</span>
   <span class="s2">&quot;agId&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">Name</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">vitam-iaas-app-01</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">Role</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">ingest-external</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">ServerId</span><span class="se">\&quot;</span><span class="s2">:1211004455,</span><span class="se">\&quot;</span><span class="s2">SiteId</span><span class="se">\&quot;</span><span class="s2">:1,</span><span class="se">\&quot;</span><span class="s2">GlobalPlatformId</span><span class="se">\&quot;</span><span class="s2">:137262631}&quot;</span><span class="p">,</span>
   <span class="s2">&quot;agIdApp&quot;</span><span class="p">:</span> <span class="s2">&quot;CT-000001&quot;</span><span class="p">,</span>
   <span class="s2">&quot;evIdAppSession&quot;</span><span class="p">:</span> <span class="s2">&quot;MyApplicationId-ChangeIt&quot;</span><span class="p">,</span>
   <span class="s2">&quot;evIdReq&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacec45rhabfy2ak6ox625ciaaaaq&quot;</span><span class="p">,</span>
   <span class="s2">&quot;agIdExt&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">originatingAgency</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">Identifier0</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">TransferringAgency</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">ARCHIVES DEPARTEMENTALES DE LA VENDEE</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">ArchivalAgency</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">ARCHIVES DEPARTEMENTALES DE LA VENDEE</span><span class="se">\&quot;</span><span class="s2">}&quot;</span><span class="p">,</span>
   <span class="s2">&quot;rightsStatementIdentifier&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">ArchivalAgreement</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">ArchivalAgreement0</span><span class="se">\&quot;</span><span class="s2">}&quot;</span><span class="p">,</span>
   <span class="s2">&quot;obId&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacec45rhabfy2ak6ox625ciaaaaq&quot;</span><span class="p">,</span>
   <span class="s2">&quot;obIdReq&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
   <span class="s2">&quot;obIdIn&quot;</span><span class="p">:</span> <span class="s2">&quot;Cartes postales (Grande Collecte)&quot;</span><span class="p">,</span>
   <span class="s2">&quot;events&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="p">{</span>
           <span class="s2">&quot;evId&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacec45rhabfy2ak6ox625ciaaaaq&quot;</span><span class="p">,</span>
           <span class="s2">&quot;evParentId&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
           <span class="s2">&quot;evType&quot;</span><span class="p">:</span> <span class="s2">&quot;STP_SANITY_CHECK_SIP.STARTED&quot;</span><span class="p">,</span>
           <span class="s2">&quot;evDateTime&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-09-12T12:08:33.166&quot;</span><span class="p">,</span>
           <span class="s2">&quot;evDetData&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
           <span class="s2">&quot;evIdProc&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacec45rhabfy2ak6ox625ciaaaaq&quot;</span><span class="p">,</span>
           <span class="s2">&quot;evTypeProc&quot;</span><span class="p">:</span> <span class="s2">&quot;INGEST&quot;</span><span class="p">,</span>
           <span class="s2">&quot;outcome&quot;</span><span class="p">:</span> <span class="s2">&quot;OK&quot;</span><span class="p">,</span>
           <span class="s2">&quot;outDetail&quot;</span><span class="p">:</span> <span class="s2">&quot;STP_SANITY_CHECK_SIP.STARTED.OK&quot;</span><span class="p">,</span>
           <span class="s2">&quot;outMessg&quot;</span><span class="p">:</span> <span class="s2">&quot;Début du processus des contrôles préalables à l&#39;entrée&quot;</span><span class="p">,</span>
           <span class="s2">&quot;agId&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">Name</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">vitam-iaas-app-01</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">Role</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">ingest-external</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">ServerId</span><span class="se">\&quot;</span><span class="s2">:1211004455,</span><span class="se">\&quot;</span><span class="s2">SiteId</span><span class="se">\&quot;</span><span class="s2">:1,</span><span class="se">\&quot;</span><span class="s2">GlobalPlatformId</span><span class="se">\&quot;</span><span class="s2">:137262631}&quot;</span><span class="p">,</span>
           <span class="s2">&quot;evIdReq&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacec45rhabfy2ak6ox625ciaaaaq&quot;</span><span class="p">,</span>
           <span class="s2">&quot;obId&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacec45rhabfy2ak6ox625ciaaaaq&quot;</span>
       <span class="p">},</span>
       <span class="p">{</span>
           <span class="s2">&quot;evId&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacec45rhabfy2ak6ox625ciaaaaq&quot;</span><span class="p">,</span>
           <span class="s2">&quot;evParentId&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
           <span class="s2">&quot;evType&quot;</span><span class="p">:</span> <span class="s2">&quot;STP_SANITY_CHECK_SIP&quot;</span><span class="p">,</span>
           <span class="s2">&quot;evDateTime&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-09-12T12:08:33.219&quot;</span><span class="p">,</span>
           <span class="s2">&quot;evDetData&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
           <span class="s2">&quot;evIdProc&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacec45rhabfy2ak6ox625ciaaaaq&quot;</span><span class="p">,</span>
           <span class="s2">&quot;evTypeProc&quot;</span><span class="p">:</span> <span class="s2">&quot;INGEST&quot;</span><span class="p">,</span>
           <span class="s2">&quot;outcome&quot;</span><span class="p">:</span> <span class="s2">&quot;OK&quot;</span><span class="p">,</span>
           <span class="s2">&quot;outDetail&quot;</span><span class="p">:</span> <span class="s2">&quot;STP_SANITY_CHECK_SIP.OK&quot;</span><span class="p">,</span>
           <span class="s2">&quot;outMessg&quot;</span><span class="p">:</span> <span class="s2">&quot;Début du processus des contrôles préalables à l&#39;entrée&quot;</span><span class="p">,</span>
           <span class="s2">&quot;agId&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">Name</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">vitam-iaas-app-01</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">Role</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">ingest-external</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">ServerId</span><span class="se">\&quot;</span><span class="s2">:1211004455,</span><span class="se">\&quot;</span><span class="s2">SiteId</span><span class="se">\&quot;</span><span class="s2">:1,</span><span class="se">\&quot;</span><span class="s2">GlobalPlatformId</span><span class="se">\&quot;</span><span class="s2">:137262631}&quot;</span><span class="p">,</span>
           <span class="s2">&quot;evIdReq&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacec45rhabfy2ak6ox625ciaaaaq&quot;</span><span class="p">,</span>
           <span class="s2">&quot;obId&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacec45rhabfy2ak6ox625ciaaaaq&quot;</span>
       <span class="p">},</span>
       <span class="p">{</span>
           <span class="s2">&quot;evId&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacec45rhabfy2ak6ox625ciaaaaq&quot;</span><span class="p">,</span>
           <span class="s2">&quot;evParentId&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacec45rhabfy2ak6ox625ciaaaaq&quot;</span><span class="p">,</span>
           <span class="s2">&quot;evType&quot;</span><span class="p">:</span> <span class="s2">&quot;SANITY_CHECK_SIP&quot;</span><span class="p">,</span>
           <span class="s2">&quot;evDateTime&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-09-12T12:08:33.219&quot;</span><span class="p">,</span>
           <span class="s2">&quot;evDetData&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
           <span class="s2">&quot;evIdProc&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacec45rhabfy2ak6ox625ciaaaaq&quot;</span><span class="p">,</span>
           <span class="s2">&quot;evTypeProc&quot;</span><span class="p">:</span> <span class="s2">&quot;INGEST&quot;</span><span class="p">,</span>
           <span class="s2">&quot;outcome&quot;</span><span class="p">:</span> <span class="s2">&quot;OK&quot;</span><span class="p">,</span>
           <span class="s2">&quot;outDetail&quot;</span><span class="p">:</span> <span class="s2">&quot;SANITY_CHECK_SIP.OK&quot;</span><span class="p">,</span>
           <span class="s2">&quot;outMessg&quot;</span><span class="p">:</span> <span class="s2">&quot;Succès du contrôle sanitaire&quot;</span><span class="p">,</span>
           <span class="s2">&quot;agId&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">Name</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">vitam-iaas-app-01</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">Role</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">ingest-external</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">ServerId</span><span class="se">\&quot;</span><span class="s2">:1211004455,</span><span class="se">\&quot;</span><span class="s2">SiteId</span><span class="se">\&quot;</span><span class="s2">:1,</span><span class="se">\&quot;</span><span class="s2">GlobalPlatformId</span><span class="se">\&quot;</span><span class="s2">:137262631}&quot;</span><span class="p">,</span>
           <span class="s2">&quot;evIdReq&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacec45rhabfy2ak6ox625ciaaaaq&quot;</span><span class="p">,</span>
           <span class="s2">&quot;obId&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacec45rhabfy2ak6ox625ciaaaaq&quot;</span>
       <span class="p">},</span>
       <span class="p">{</span>
           <span class="p">[</span><span class="o">...</span><span class="p">]</span>
       <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">&quot;_tenant&quot;</span><span class="p">:</span> <span class="mi">0</span>
 <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="detail-des-champs-du-json-stocke-dans-la-collection">
<h3>3.2.3. Détail des champs du JSON stocké dans la collection<a class="headerlink" href="#detail-des-champs-du-json-stocke-dans-la-collection" title="Lien permanent vers ce titre">¶</a></h3>
<p>Chaque enregistrement de cette collection est composé d&#8217;une structure auto-imbriquée : la structure possède une première instanciation &#8220;incluante&#8221; et contient un tableau de n structures identiques, dont seules les valeurs contenues dans les champs changent.</p>
<p>La structure est décrite ci-dessous.
Pour certains champs, on indiquera s’il s&#8217;agit de la structure incluante ou d&#8217;une structure incluse dans celle-ci.</p>
<p><strong>&#8220;_id&#8221; (identifier):</strong> Identifiant unique donné par le système lors de l&#8217;initialisation de l&#8217;opération</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de 36 caractères correspondant à un GUID.</li>
<li>Cet identifiant constitue la clé primaire de l&#8217;opération dans la collection.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe uniquement pour la structure incluante.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evId&#8221; (event Identifier): Champs obligatoire peuplé par Vitam</strong> identifiant de l&#8217;événement</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de 36 caractères.</li>
<li>Il identifie l&#8217;opération de manière unique dans la collection.</li>
<li>Cet identifiant doit être l&#8217;identifiant d&#8217;un événement dans le cadre de l&#8217;opération (evIdProc) et doit donc être différent par paire (début/fin).</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses*</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evParentId&#8221; (event Parent Identifier):</strong> identifiant de l&#8217;événement parent.</p>
<blockquote>
<div><ul class="simple">
<li>Il est constitué d&#8217;une chaîne de 36 caractères correspondant à un GUID.</li>
<li>Il identifie l&#8217;événement parent.</li>
<li>Ce champ est toujours à null pour la structure incluante et les tâches principales</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evType&#8221; (event Type):</strong> code du type de l&#8217;opération</p>
<blockquote>
<div><ul class="simple">
<li>Issu de la définition du workflow en JSON (fichier default-workflow.json).</li>
<li>La liste des valeurs possibles pour ce champ se trouve en annexe. Seul le code est stocké dans ce champ, la traduction se faisant via un fichier properties (vitam-logbook-message-fr.properties).</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evDateTime&#8221; (event DateTime):</strong> date de lancement de l&#8217;opération</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une date au format ISO8601 AAAA-MM-JJ+&#8221;T&#8221;+hh:mm:ss:[3digits de millisecondes]</li>
<li>Elle est renseignée par le client LogBook.
<code class="docutils literal"><span class="pre">Exemple</span> <span class="pre">:</span> <span class="pre">&quot;2016-08-17T08:26:04.227&quot;</span></code></li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evDetData&#8221; (event Detail Data):</strong> détails des données l&#8217;événement.</p>
<blockquote>
<div><ul class="simple">
<li>Donne plus de détail sur l&#8217;événement ou son résultat.</li>
<li>Par exemple, pour l&#8217;étape ATR_NOTIFICATION, ce champ détaille le nom de l&#8217;ArchiveTransferReply, son empreinte et l&#8217;algorithme utilisé pour calculer l&#8217;empreinte.</li>
<li>Sur la structure incluante du journal d&#8217;opérations d&#8217;entrée, il contient un JSON composé des champs suivants :<ul>
<li>evDetDataType : structure impactée. Chaîne de caractères. Doit correspondre à une valeur de l&#8217;énumération LogbookEvDetDataType</li>
<li>EvDetailReq : précisions sur la demande de transfert. Chaîne de caractères. Reprend le champ &#8220;Comment&#8221; du message ArchiveTransfer.</li>
<li>EvDateTimeReq : date de la demande de transfert inscrit dans le champ evDetData. Date au format ISO8601 AAAA-MM-JJ+&#8221;T&#8221;+hh:mm:ss:[3digits de millisecondes].</li>
<li>ServiceLevel : niveau de service. Chaîne de caractères. Reprend le champ ServiceLevel du message ArchiveTransfer</li>
</ul>
</li>
<li>Cardinalité pour les structures incluantes : 1-1</li>
<li>Cardinalité pour les structures incluses : 0-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evIdProc&#8221; (event Identifier Process):</strong> identifiant du processus.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de 36 caractères.</li>
<li>Toutes les mêmes entrées du journal des opérations partagent la même valeur, qui est celle du champ &#8220;_id&#8221;</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evTypeProc&#8221; (event Type Process):</strong> type de processus.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>Nom du processus qui effectue l&#8217;action, parmi une liste de processus possibles fixée. Cette liste est disponible en annexe 7.3.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;outcome&#8221;:</strong> Statut de l&#8217;événement.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères devant correspondre à une valeur de la liste suivante :<ul>
<li>STARTED (Début de l&#8217;événement)</li>
<li>OK (Succès de l&#8217;événement)</li>
<li>KO (Échec de l&#8217;événement)</li>
<li>WARNING (Succès de l&#8217;événement comportant toutefois des alertes)</li>
<li>FATAL (Erreur technique)</li>
</ul>
</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;outDetail&#8221; (outcome Detail):</strong> code correspondant au résultat de l&#8217;événement.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>Il contient le code correspondant au résultat de l&#8217;événement, incluant le statut. La liste des valeurs possibles pour ce champ se trouve en annexe. Seul le code doit être stocké dans ce champ, la traduction doit se faire via un fichier properties (vitam-logbook-message-fr.properties)</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;outMessg&#8221; (outcomeDetailMessage):</strong> détail du résultat de l&#8217;événement.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>C&#8217;est un message intelligible destiné à être lu par un être humain en tant que détail de l&#8217;événement. Traduction du code présent dans outDetail issue du fichier vitam-logbook-message-fr.properties.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;agId&#8221; (agent Identifier):</strong> identifiant de l&#8217;agent interne réalisant l&#8217;évènement.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit de plusieurs chaînes de caractères indiquant le nom, le rôle et le PID de l&#8217;agent. Ce champ est calculé par le journal à partir de ServerIdentifier. <code class="docutils literal"><span class="pre">Exemple</span> <span class="pre">:</span> <span class="pre">{\&quot;name\&quot;:\&quot;ingest-internal_1\&quot;,\&quot;role\&quot;:\&quot;ingest-internal\&quot;,\&quot;pid\&quot;:425367}</span></code></li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;agIdApp&#8221; (agent Identifier Application):</strong> identifiant de l’application externe qui appelle la solution logicielle Vitam pour effectuer d&#8217;une opération. Cet identifiant est celui du contexte applicatif utilisé par l&#8217;application.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe uniquement pour la structure incluante.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evIdAppSession&#8221; (event Identifier Application Session):</strong> identifiant de la transaction qui a entraîné le lancement d&#8217;une opération dans Vitam.</p>
<blockquote>
<div><ul class="simple">
<li>L’application externe est responsable de la gestion de cet identifiant. Il correspond à un identifiant pour une session donnée côté application externe.</li>
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe uniquement pour la structure incluante.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evIdReq&#8221; (event Identifier Request):</strong> identifiant de la requête déclenchant l’opération.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de 36 caractères.</li>
<li>Cardinalité : 1-1</li>
<li>Une requestId est créée pour chaque nouvelle requête http venant de l’extérieur.</li>
<li>Dans le cas du processus d&#8217;entrée, il devrait s&#8217;agir du numéro de l&#8217;opération (EvIdProc).</li>
<li>Il s&#8217;agit du X-Application-Id.</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;agIdExt&#8221; (agent Identifier External):</strong> identifiant de l&#8217;agent externe mentionné dans le message ArchiveTransfer.</p>
<blockquote>
<div><ul>
<li><p class="first">Il s&#8217;agit pour un ingest d&#8217;un JSON comprenant les champs suivants :</p>
<blockquote>
<div><ul class="simple">
<li>originatingAgency : identifiant du service producteur. Il s&#8217;agit d&#8217;une chaîne de caractères. Reprend le contenu du champ OriginatingAgencyIdentifier du message ArchiveTransfer.</li>
<li>transferringAgency : identifiant du service de transfert. Il s&#8217;agit d&#8217;une chaîne de caractères. Reprend le contenu du champ TransferringAgencyIdentifier du message ArchiveTransfer.</li>
<li>ArchivalAgency : identifiant du service d&#8217;archivage. Il s&#8217;agit d&#8217;une chaîne de caractères. Reprend le contenu du champ ArchivalAgencyIdentifier du message ArchiveTransfer.</li>
<li>submissionAgency : identifiant du service versant. Il s&#8217;agit d&#8217;une chaîne de caractères. Reprend le contenu du champ SubmissionAgencyIdentifier du message ArchiveTransfer. Ne contient aucune valeur actuellement</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Cardinalité : 1-1</p>
</li>
<li><p class="first">Ce champ existe uniquement pour la structure incluante.</p>
</li>
</ul>
</div></blockquote>
<p><strong>&#8220;rightsStatementIdentifier&#8221;:</strong> identifiant des données référentielles en vertu desquelles l&#8217;opération peut s&#8217;éxécuter</p>
<blockquote>
<div><ul>
<li><p class="first">Il s&#8217;agit pour un ingest d&#8217;un json comprennant les champs suivants :</p>
<blockquote>
<div><ul class="simple">
<li>ArchivalAgreement: identifiant du contrat d&#8217;entrée utilisé pour réaliser l&#8217;ingest.</li>
</ul>
<blockquote>
<div><p>Il s&#8217;agit d&#8217;une chaîne de caractères.
Reprend le contenu du champ ArchivalAgreement du message ArchiveTransfer.</p>
</div></blockquote>
<ul class="simple">
<li>Profil: identifiant du profil utilisé pour réaliser l&#8217;ingest.</li>
</ul>
<blockquote>
<div><p>Il s&#8217;agit d&#8217;une chaîne de caractères.
Reprend le contenu du champ ArchiveProfile du message ArchiveTransfer.</p>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first">Il s&#8217;agit pour un update d&#8217;un json comprennant les champs suivants :</p>
<blockquote>
<div><ul class="simple">
<li>AccessContract : identifiant du contrat d&#8217;accès utilisé pour réaliser l&#8217;update.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Cardinalité : 1-1</p>
</li>
</ul>
</div></blockquote>
<p><strong>&#8220;obId&#8221; (object Identifier):</strong> identifiant Vitam du lot d’objets auquel s’applique l’opération (lot correspondant à une liste).</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de 36 caractères.</li>
<li>Dans le cas d’une opération d&#8217;entrée, il s’agit du GUID de l’entrée (evIdProc).</li>
<li>Dans le cas d’une opération d&#8217;audit, il s’agit par exemple du nom d’un lot d’archives prédéfini.</li>
<li>Dans le cas d’une opération de mise à jour, il s’agit du GUID de l&#8217;unité archivistique mise à jour.</li>
<li>Dans le cas d&#8217;une opération de Masterdata, il s&#8217;agit de l&#8217;id de l&#8217;opération</li>
<li>Cardinalité structure incluante : 1-1</li>
<li>Cardinalité structure incluse : 0-1</li>
<li>Ce champ existe pour les structures incluantes et incluses</li>
</ul>
</div></blockquote>
<p><strong>&#8220;obIdReq&#8221; (object Identifier Request):</strong> identifiant Vitam de la requête caractérisant un lot d’objets auquel s’applique l’opération.</p>
<blockquote>
<div><ul class="simple">
<li>Ne concerne que les lots d’objets dynamiques, c’est-à-dire obtenus par la présente requête. Ne concerne pas les lots ayant un identifiant défini.</li>
<li>Cardinalité : 1-1</li>
<li>Actuellement, la valeur est toujours &#8216;null&#8217;. Ce champ existe pour les structures incluantes et incluses</li>
</ul>
</div></blockquote>
<p><strong>&#8220;obIdIn&#8221; (Object Identifier Income):</strong> identifiant externe du lot d’objets auquel s’applique l’opération.</p>
<blockquote>
<div><ul class="simple">
<li>Chaîne de caractères intelligible pour un humain qui permet de comprendre à quel SIP ou quel lot d&#8217;archives se rapporte l&#8217;événement.</li>
<li>Reprend le contenu du champ MessageIdentifier du message ArchiveTransfer.</li>
<li>Cardinalité structure incluante : 1-1</li>
<li>Cardinalité structure incluse : 0-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;events&#8221;:</strong> tableau de structure.</p>
<blockquote>
<div><ul class="simple">
<li>Pour la structure incluante, le tableau contient n structures incluses dans l&#8217;ordre des événements (date)</li>
<li>Cardinalité : 1-1</li>
<li>S&#8217;agissant d&#8217;un tableau, les structures incluses ont pour cardinalité 1-n.</li>
<li>Ce champ existe uniquement pour la structure incluante.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;_tenant&#8221;:</strong> identifiant du tenant.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;un entier.</li>
<li>Cardinalité : 1-1
<em>Ce champ existe uniquement pour la structure incluante.</em></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="champ-presents-dans-les-events">
<h3>3.2.4. Champ présents dans les events<a class="headerlink" href="#champ-presents-dans-les-events" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les events sont au minimum composés des champs suivants:</p>
<blockquote>
<div><ul class="simple">
<li>evId</li>
<li>evParentId</li>
<li>evType</li>
<li>evDateTime</li>
<li>evDetData</li>
<li>evIdProc</li>
<li>evTypeProc</li>
<li>outcome</li>
<li>outDetail</li>
<li>outMessg</li>
<li>agId</li>
<li>evIdReq</li>
<li>obId</li>
</ul>
</div></blockquote>
<p>D&#8217;autres champs peuvent apparaître dans certains events lorsqu&#8217;ils mettent à jour le master.</p>
</div>
<div class="section" id="detail-des-champs-du-json-stocke-en-base-specifiques-a-une-operation-de-securisation-des-journaux-d-operation-et-de-cycle-de-vie">
<h3>3.2.5. Détail des champs du JSON stocké en base spécifiques à une opération de sécurisation des journaux d&#8217;opération et de cycle de vie<a class="headerlink" href="#detail-des-champs-du-json-stocke-en-base-specifiques-a-une-operation-de-securisation-des-journaux-d-operation-et-de-cycle-de-vie" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ceci ne concerne aujourd&#8217;hui que les sécurisations des journaux d&#8217;opération et la sécurisation des journaux de cycle de vie.</p>
<p>Exemple de données stockées par l&#8217;opération de sécurisation des journaux d&#8217;opération :</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="s2">&quot;evDetData&quot;</span><span class="p">:</span>
<span class="p">{</span>
\<span class="s2">&quot;LogType</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">OPERATION</span><span class="se">\&quot;</span><span class="s2">,</span>
\<span class="s2">&quot;StartDate</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">2017-06-29T09:22:23.227</span><span class="se">\&quot;</span><span class="s2">,</span>
\<span class="s2">&quot;EndDate</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">2017-06-29T09:39:08.690</span><span class="se">\&quot;</span><span class="s2">,</span>
\<span class="s2">&quot;Hash</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">HYnFf07gFkar3lO+U2FQ9qkhi9eUMFN5hcH7oU7vrAAL3FAlMm8aJP7+VxkVWhLzmmFolwUEcq6fbS7Km2is5g==</span><span class="se">\&quot;</span><span class="s2">,</span>
\<span class="s2">&quot;TimeStampToken</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">MIIEljAVAgEAMBAMDk9wZXJhdGlvbiBPa2F5MIIEewYJKoZIhvcNAQcCoIIEbDCCBGgCAQMxDzANBglghkgBZQMEAgMFADCBgAYLKoZIhvcNAQkQAQSgcQRvMG0CAQEGASkwUTANBglghkgBZQMEAgMFAARAvp71IU4GqUJ/rIVKZ74J09qdSDeHw24HHsjw0tAnHjD6ZfUJHjDp8yQSdB6Lf2a6ORPF5JCgsh86CctQ9h93mwIBARgPMjAxNzA2MjkwOTM5MDdaMYIDzTCCA8kCAQEwfjB4MQswCQYDVQQGEwJmcjEMMAoGA1UECAwDaWRmMQ4wDAYDVQQHDAVwYXJpczEOMAwGA1UECgwFdml0YW0xFDASBgNVBAsMC2F1dGhvcml0aWVzMSUwIwYDVQQDDBxjYV9pbnRlcm1lZGlhdGVfdGltZXN0YW1waW5nAgIAtzANBglghkgBZQMEAgMFAKCCASAwGgYJKoZIhvcNAQkDMQ0GCyqGSIb3DQEJEAEEMBwGCSqGSIb3DQEJBTEPFw0xNzA2MjkwOTM5MDdaMC0GCSqGSIb3DQEJNDEgMB4wDQYJYIZIAWUDBAIDBQChDQYJKoZIhvcNAQENBQAwTwYJKoZIhvcNAQkEMUIEQN8TGGTXtmpAztB16UGznFwW2xZMKRuX3zMnF9bTZFybM9tCGJtJd/IdBglcs69fsH05yuXOEYuwPhN1yQijSGEwZAYLKoZIhvcNAQkQAi8xVTBTMFEwTzALBglghkgBZQMEAgMEQGlkJQTJOiVJrGpFe2GsjJ0Ekug0n9Opel3//wOcpCmpqIET8w2yUcP1yqQJXYc87YeY1/OWhZiWFqbWXVV9HS4wDQYJKoZIhvcNAQENBQAEggIAV/rdnxIAyhvoGDprIahKAK3TPcriTggh1+gtDjEiD7kGB0KtXwAmPn2gb/2YtOmvIU7/a5KBFlfBR+foIRrc6z52cEdalhSpyHpYgpFuF7SjMFO6Mfso1dwjI9KpZTv6OI6Kplbg6zwK939GpDbPgKaMrXw0EDafk184RQz6NNFFYG8JuQxhlba1SYkEMg0+oOkcz814H1ET7zUbt2yq75zdffduUDB81dxjsvpKbx/LbBEOUswGgnfnYGOlo1XbQaI2sM2+YiXHGD/qnl/uAteBayFeaHKXel+gkp8D1ykBFOrE46n6fCI5i0OhKHcPAxvxTg8p03M38PrZIwnqSUI1rxfJhk9Hu0JVcQi1EYLBMmyL4IbhXNFz2ZmSHgC6/BGTMZmuEksrA4vJr1WEFMUocEFQnL9pOJ+iI8U0SusJEDYvjde+yvfnxC8ZOGXOsaP9aUsuITOMT/wFdrH4RFe8q8Wjxzu5p4lSvJI9P+soSfBbLyzGUjmF2lAi/HdyzjunhmRr/kxHK8P9Bo2CSz77xgN566k2r44ER/lyHFvHme5ITq25CRhJf39kfbPh1Jjku3ulwiquykhnjXX7YGx5bDRNv+z29l4tq+AkZqq8O+0XY5fLGgauptsKhpj+CsfYs0uNJCywZtIOHzdL0NBeF7AF97nwTV841ZN/rKg=</span><span class="se">\&quot;</span><span class="s2">,</span>
\<span class="s2">&quot;PreviousLogbookTraceabilityDate</span><span class="se">\&quot;</span><span class="s2">:null,</span>
\<span class="s2">&quot;MinusOneMonthLogbookTraceabilityDate</span><span class="se">\&quot;</span><span class="s2">:null,</span>
\<span class="s2">&quot;MinusOneYeargbookTraceabilityDate</span><span class="se">\&quot;</span><span class="s2">:null,</span>
\<span class="s2">&quot;NumberOfElement</span><span class="se">\&quot;</span><span class="s2">:379,</span>
\<span class="s2">&quot;FileName</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">0_LogbookOperation_20170629_093907.zip</span><span class="se">\&quot;</span><span class="s2">,</span>
\<span class="s2">&quot;Size</span><span class="se">\&quot;</span><span class="s2">:3975227,</span>
\<span class="s2">&quot;DigestAlgorithm</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">SHA512</span><span class="se">\&quot;</span><span class="s2">}&quot;</span>
</pre></div>
</div>
<p>Dans le cas de l&#8217;événement final d&#8217;une opération de sécurisation du LogbookOperation, le champ <strong>&#8220;evDetData&#8221;</strong> est composé des champs suivants :</p>
<p><strong>&#8220;LogType&#8221;:</strong> type de logbook sécurisé.</p>
<blockquote>
<div><ul class="simple">
<li>Collection faisant l&#8217;objet de l&#8217;opération de sécurisation</li>
</ul>
<p><code class="docutils literal"><span class="pre">Exemple</span> <span class="pre">:</span> <span class="pre">&quot;operation&quot;</span></code>
* La valeur de ce champ est soit OPERATION soit LIFECYCLE.
* Cardinalité : 1-1</p>
</div></blockquote>
<p><strong>&#8220;StartDate&#8221;:</strong> date de début de la période de couverture de l&#8217;opération de sécurisation.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une date au format ISO8601 AAAA-MM-JJ+&#8221;T&#8221;+hh:mm:ss:[3digits de millisecondes] (correspond à la date de la première sécurisation)</li>
</ul>
<p><code class="docutils literal"><span class="pre">Exemple</span> <span class="pre">:</span> <span class="pre">&quot;2016-08-17T08:26:04.227&quot;</span></code></p>
<ul class="simple">
<li>Cardinalité : 1-1</li>
</ul>
</div></blockquote>
<p><strong>&#8220;EndDate&#8221;:</strong> date de fin de la période de couverture de l&#8217;opération de sécurisation.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une date au format ISO8601 AAAA-MM-JJ+&#8221;T&#8221;+hh:mm:ss:[3digits de millisecondes] (correspond à la date de la dernière opération sécurisée par la précédente sécurisation)</li>
</ul>
<p><code class="docutils literal"><span class="pre">Exemple</span> <span class="pre">:</span> <span class="pre">&quot;2016-08-17T08:26:04.227&quot;</span></code>
* Cardinalité : 1-1</p>
</div></blockquote>
<p><strong>&#8220;PreviousLogbookTraceabilityDate&#8221;:</strong> date de la précédente opération de sécurisation de ce type de journal.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit  de la date de début de la précédente opération de sécurisation du même type au format ISO8601 AAAA-MM-JJ+&#8221;T&#8221;+hh:mm:ss:[3digits de millisecondes] (correspond à la date de début de la sécurisation précédente)</li>
</ul>
<p><code class="docutils literal"><span class="pre">Exemple</span> <span class="pre">:</span> <span class="pre">&quot;2016-08-17T08:26:04.227&quot;</span></code></p>
<ul class="simple">
<li>Cardinalité : 1-1</li>
</ul>
</div></blockquote>
<p><strong>&#8220;MinusOneMonthLogbookTraceabilityDate&#8221;:</strong> date de l&#8217;opération de sécurisation passée d&#8217;un mois.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit  de la date de début de la précédente opération de sécurisation du même type réalisée un mois avant au format ISO8601 AAAA-MM-JJ+&#8221;T&#8221;+hh:mm:ss:[3digits de millisecondes]</li>
</ul>
<p><code class="docutils literal"><span class="pre">Exemple</span> <span class="pre">:</span> <span class="pre">&quot;2016-08-17T08:26:04.227&quot;</span></code></p>
<ul class="simple">
<li>Cardinalité : 1-1</li>
</ul>
</div></blockquote>
<p><strong>&#8220;MinusOneYeaLogbookTraceabilityDate&#8221;:</strong> date de l&#8217;opération de sécurisation passée d&#8217;un an.</p>
<blockquote>
<div><blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit de la date de début de la précédente opération de sécurisation du même type réalisée un an avant au format ISO8601 AAAA-MM-JJ+&#8221;T&#8221;+hh:mm:ss:[3digits de millisecondes]</li>
</ul>
</div></blockquote>
<p><code class="docutils literal"><span class="pre">Exemple</span> <span class="pre">:</span> <span class="pre">&quot;2016-08-17T08:26:04.227&quot;</span></code></p>
<blockquote>
<div><ul class="simple">
<li>Cardinalité : 1-1</li>
</ul>
</div></blockquote>
</div></blockquote>
<p><strong>&#8220;Hash&#8221;:</strong> Empreinte racine.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>Empreinte de la racine de l&#8217;arbre de Merkle.</li>
<li>Cardinalité : 1-1</li>
</ul>
</div></blockquote>
<p><strong>&#8220;TimeStampToken&#8221;:</strong> Tampon d’horodatage.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>Tampon d’horodatage sûr du journal sécurisé.</li>
<li>Cardinalité : 1-1</li>
</ul>
</div></blockquote>
<p><strong>&#8220;NumberOfElement&#8221;:</strong> Nombre d&#8217;éléments.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;un entier.</li>
<li>Nombre d&#8217;opérations sécurisées.</li>
<li>Cardinalité : 1-1</li>
</ul>
</div></blockquote>
<p><strong>&#8220;Size&#8221;:</strong> Taille du fichier.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;un entier.</li>
<li>Taille du fichier sécurisé (en octets).</li>
<li>Cardinalité : 1-1</li>
</ul>
</div></blockquote>
<p><strong>&#8220;FileName&#8221;:</strong> Identifiant du fichier.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>Nom du fichier sécurisé sur les offres de stockage au format {tenant}_LogbookOperation_{AAAAMMJJ_HHMMSS}.zip.</li>
</ul>
<p><code class="docutils literal"><span class="pre">Exemple</span> <span class="pre">:</span> <span class="pre">&quot;0_LogbookOperation_20170127_141136.zip&quot;</span></code></p>
<ul class="simple">
<li>Cardinalité : 1-1</li>
</ul>
</div></blockquote>
<p><strong>&#8220;DigestAlgorithm&#8221;:</strong> algorithme de hachage.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>Il s&#8217;agit du nom de l&#8217;algorithme de hachage utilisé pour réaliser le tampon d&#8217;horodatage.</li>
<li>Cardinalité : 1-1</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="collection-logbooklifecycleunit">
<h2>3.3. Collection LogbookLifeCycleUnit<a class="headerlink" href="#collection-logbooklifecycleunit" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="utilisation-de-la-collection-logbooklifecycleunit">
<h3>3.3.1. Utilisation de la collection LogbookLifeCycleUnit<a class="headerlink" href="#utilisation-de-la-collection-logbooklifecycleunit" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le journal du cycle de vie d&#8217;une unité archivistique (ArchiveUnit) trace tous les événements qui impactent celle-ci dès sa prise en charge dans le système. Il doit être conservé aussi longtemps que l&#8217;ArchiveUnit est gérée par le système.</p>
<ul class="simple">
<li>dès la réception d&#8217;une ArchiveUnit, l&#8217;ensemble des opérations qui lui sont appliquées sont tracées</li>
<li>les journaux du cycle de vie sont &#8220;committés&#8221; une fois le stockage des objets et l&#8217;indexation des métadonnées effectués sans échec, avant l&#8217;envoi d&#8217;une notification au service versant</li>
</ul>
<p>Chaque unité archivistique possède une et une seule entrée dans la collection LogbookLifeCycleUnit.</p>
</div>
<div class="section" id="exemple-de-json-stocke-en-base-comprenant-l-exhaustivite-des-champs-de-la-collection-logbooklifecycleunit">
<h3>3.3.2. Exemple de JSON stocké en base comprenant l&#8217;exhaustivité des champs de la collection LogbookLifeCycleUnit<a class="headerlink" href="#exemple-de-json-stocke-en-base-comprenant-l-exhaustivite-des-champs-de-la-collection-logbooklifecycleunit" title="Lien permanent vers ce titre">¶</a></h3>
<p>Extrait d&#8217;un JSON correspondant à un journal de cycle du vie d&#8217;une unité archivistique.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;aeaqaaaaaehbl62nabqkwak3k7qg5tiaaaaq&quot;</span><span class="p">,</span>
  <span class="s2">&quot;evId&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaaghbl62nabqkwak3k7qg5tiaaabq&quot;</span><span class="p">,</span>
  <span class="s2">&quot;evParentId&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s2">&quot;evType&quot;</span><span class="p">:</span> <span class="s2">&quot;LFC.LFC_CREATION&quot;</span><span class="p">,</span>
  <span class="s2">&quot;evDateTime&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-04-10T12:39:37.933&quot;</span><span class="p">,</span>
  <span class="s2">&quot;evIdProc&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaaghe45hwabliwak3k7qg7kaaaaaq&quot;</span><span class="p">,</span>
  <span class="s2">&quot;evTypeProc&quot;</span><span class="p">:</span> <span class="s2">&quot;INGEST&quot;</span><span class="p">,</span>
  <span class="s2">&quot;outcome&quot;</span><span class="p">:</span> <span class="s2">&quot;STARTED&quot;</span><span class="p">,</span>
  <span class="s2">&quot;outDetail&quot;</span><span class="p">:</span> <span class="s2">&quot;LFC.LFC_CREATION.STARTED&quot;</span><span class="p">,</span>
  <span class="s2">&quot;outMessg&quot;</span><span class="p">:</span> <span class="s2">&quot;!LFC.LFC_CREATION.STARTED!&quot;</span><span class="p">,</span>
  <span class="s2">&quot;agId&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">Name</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">vitam-iaas-app-02</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">Role</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">worker</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">ServerId</span><span class="se">\&quot;</span><span class="s2">:1041627981,</span><span class="se">\&quot;</span><span class="s2">SiteId</span><span class="se">\&quot;</span><span class="s2">:1,</span><span class="se">\&quot;</span><span class="s2">GlobalPlatformId</span><span class="se">\&quot;</span><span class="s2">:236321613}&quot;</span><span class="p">,</span>
  <span class="s2">&quot;obId&quot;</span><span class="p">:</span> <span class="s2">&quot;aeaqaaaaaehbl62nabqkwak3k7qg5tiaaaaq&quot;</span><span class="p">,</span>
  <span class="s2">&quot;evDetData&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s2">&quot;events&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
          <span class="s2">&quot;evId&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaaghbl62nabqkwak3k7qg5tiaaabq&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evParentId&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
          <span class="s2">&quot;evType&quot;</span><span class="p">:</span> <span class="s2">&quot;LFC.CHECK_MANIFEST&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evDateTime&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-04-10T12:39:37.953&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evIdProc&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaaghe45hwabliwak3k7qg7kaaaaaq&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evTypeProc&quot;</span><span class="p">:</span> <span class="s2">&quot;INGEST&quot;</span><span class="p">,</span>
          <span class="s2">&quot;outcome&quot;</span><span class="p">:</span> <span class="s2">&quot;OK&quot;</span><span class="p">,</span>
          <span class="s2">&quot;outDetail&quot;</span><span class="p">:</span> <span class="s2">&quot;LFC.CHECK_MANIFEST.OK&quot;</span><span class="p">,</span>
          <span class="s2">&quot;outMessg&quot;</span><span class="p">:</span> <span class="s2">&quot;Succès de la vérification de la cohérence du bordereau&quot;</span><span class="p">,</span>
          <span class="s2">&quot;agId&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">Name</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">vitam-iaas-app-02</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">Role</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">worker</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">ServerId</span><span class="se">\&quot;</span><span class="s2">:1041627981,</span><span class="se">\&quot;</span><span class="s2">SiteId</span><span class="se">\&quot;</span><span class="s2">:1,</span><span class="se">\&quot;</span><span class="s2">GlobalPlatformId</span><span class="se">\&quot;</span><span class="s2">:236321613}&quot;</span><span class="p">,</span>
          <span class="s2">&quot;obId&quot;</span><span class="p">:</span> <span class="s2">&quot;aeaqaaaaaehbl62nabqkwak3k7qg5tiaaaaq&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evDetData&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="p">{</span>
          <span class="s2">&quot;evId&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaaghbl62n5g8ftak3k7qg5tiaaabq&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evParentId&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaaghbl62nabqkwak3k7qg5tiaaabq&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evType&quot;</span><span class="p">:</span> <span class="s2">&quot;LFC.CHECK_MANIFEST.LFC_CREATION&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evDateTime&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-04-10T12:39:37.953&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evIdProc&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaaghe45hwabliwak3k7qg7kaaaaaq&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evTypeProc&quot;</span><span class="p">:</span> <span class="s2">&quot;INGEST&quot;</span><span class="p">,</span>
          <span class="s2">&quot;outcome&quot;</span><span class="p">:</span> <span class="s2">&quot;OK&quot;</span><span class="p">,</span>
          <span class="s2">&quot;outDetail&quot;</span><span class="p">:</span> <span class="s2">&quot;LFC.CHECK_MANIFEST.LFC_CREATION.OK&quot;</span><span class="p">,</span>
          <span class="s2">&quot;outMessg&quot;</span><span class="p">:</span> <span class="s2">&quot;Succès de la création du journal du cycle de vie&quot;</span><span class="p">,</span>
          <span class="s2">&quot;agId&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">Name</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">vitam-iaas-app-02</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">Role</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">worker</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">ServerId</span><span class="se">\&quot;</span><span class="s2">:1041627981,</span><span class="se">\&quot;</span><span class="s2">SiteId</span><span class="se">\&quot;</span><span class="s2">:1,</span><span class="se">\&quot;</span><span class="s2">GlobalPlatformId</span><span class="se">\&quot;</span><span class="s2">:236321613}&quot;</span><span class="p">,</span>
          <span class="s2">&quot;obId&quot;</span><span class="p">:</span> <span class="s2">&quot;aeaqaaaaaehbl62nabqkwak3k7qg5tiaaaaq&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evDetData&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
      <span class="p">},{</span>

      <span class="p">[</span><span class="o">...</span><span class="p">]</span>

      <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&quot;_tenant&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s2">&quot;_v&quot;</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="detail-des-champs-du-json-stocke-en-base">
<h3>3.3.3. Détail des champs du JSON stocké en base<a class="headerlink" href="#detail-des-champs-du-json-stocke-en-base" title="Lien permanent vers ce titre">¶</a></h3>
<p><strong>&#8220;_id&#8221;:</strong> Identifiant donné par le système lors de l&#8217;initialisation du journal du cycle de vie.</p>
<blockquote>
<div><ul class="simple">
<li>Il est constitué d&#8217;une chaîne de 36 caractères correspondant à un GUID.</li>
<li>Cet identifiant constitue la clé primaire du journal du cycle de vie de l&#8217;unité archivistique. Il reprend la valeur du champ _id de la collection Unit.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe uniquement pour la structure incluante.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evId&#8221; (event Identifier):</strong> identifiant de l&#8217;événement.</p>
<blockquote>
<div><ul class="simple">
<li>Il est constitué d&#8217;une chaîne de 36 caractères correspondant à un GUID.</li>
<li>Il identifie l&#8217;événement de manière unique dans la base.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evParentId&#8221; (event Parent Identifier):</strong> identifiant de l&#8217;événement parent.</p>
<blockquote>
<div><ul class="simple">
<li>Il est constitué d&#8217;une chaîne de 36 caractères correspondant à un GUID.</li>
<li>Il identifie l&#8217;événement parent.</li>
<li>La valeur est toujours null pour la structure incluante et les tâches principales</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evType&#8221; (event Type):</strong> code du type d&#8217;événement.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>La liste des valeurs possibles pour ce champ se trouve en annexe. Seul le code est stocké dans ce champ, la traduction se fait via un fichier properties (vitam-logbook-message-fr.properties)</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evDateTime&#8221; (event DateTime):</strong> date de l&#8217;événement.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une date au format ISO8601 AAAA-MM-JJ+&#8221;T&#8221;+hh:mm:ss:[3digits de millisecondes]</li>
</ul>
<p><code class="docutils literal"><span class="pre">Exemple</span> <span class="pre">:</span> <span class="pre">&quot;2016-08-17T08:26:04.227&quot;</span></code>
* Ce champ est positionné par le client LogBook.
* Cardinalité : 1-1
<em>Ce champ existe pour les structures incluantes et incluses</em></p>
</div></blockquote>
<p><strong>&#8220;evIdProc&#8221; (event Identifier Process):</strong> identifiant du processus.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de 36 caractères.</li>
<li>Toutes les mêmes entrées du journal du cycle de vie partagent la même valeur, qui est celle du champ &#8220;_id&#8221; de la collection LogbookOperation</li>
<li>Cardinalité : 1-1</li>
</ul>
<p><em>Ce champ existe pour les structures incluantes et incluses</em></p>
</div></blockquote>
<p><strong>&#8220;evTypeProc&#8221; (event Type Process):</strong> type de processus.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>Nom du processus qui effectue l&#8217;action, parmi une liste de processus possibles fixée. Cette liste est disponible en annexe.</li>
<li>Cardinalité : 1-1</li>
</ul>
<p><em>Ce champ existe pour les structures incluantes et incluses</em></p>
</div></blockquote>
<p><strong>&#8220;outcome&#8221;:</strong> statut de l&#8217;événement.</p>
<blockquote>
<div><ul>
<li><p class="first">Il s&#8217;agit d&#8217;une chaîne de caractères devant correspondre à une valeur de la liste suivante :</p>
<blockquote>
<div><ul class="simple">
<li>STARTED (début de l&#8217;événement)</li>
<li>OK (Succès de l&#8217;événement)</li>
<li>KO (Echec de l&#8217;événement)</li>
<li>WARNING (Succès de l&#8217;événement comportant des alertes)</li>
<li>FATAL (Erreur technique)</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Cardinalité : 1-1</p>
</li>
</ul>
<p><em>Ce champ existe pour les structures incluantes et incluses</em></p>
</div></blockquote>
<p><strong>&#8220;outDetail&#8221; (outcome Detail):</strong> code correspondant à l&#8217;erreur.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>Il contient le code fin de l&#8217;événement, incluant le statut. La liste des valeurs possibles pour ce champ se trouve en annexe. Seul le code est stocké dans ce champ, la traduction se fait via le fichier properties (vitam-logbook-message-fr.properties)</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses</li>
</ul>
</div></blockquote>
<p><strong>&#8220;outMessg&#8221; (outcomeDetailMessage):</strong> détail du résultat de l&#8217;événement.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>C&#8217;est un message intelligible destiné à être lu par un être humain en tant que détail de l&#8217;événement.</li>
<li>Traduction du code présent dans outDetail issue du fichier vitam-logbook-message-fr.properties.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses</li>
</ul>
</div></blockquote>
<p><strong>&#8220;agId&#8221; (agent Identifier):</strong> identifiant de l&#8217;agent réalisant l&#8217;évènement.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit de plusieurs chaînes de caractères indiquant le nom, le rôle et le PID de l&#8217;agent. Ce champ est calculé par le journal à partir de ServerIdentifier.</li>
</ul>
<p><code class="docutils literal"><span class="pre">Exemple</span> <span class="pre">:</span> <span class="pre">{\&quot;name\&quot;:\&quot;ingest-internal_1\&quot;,\&quot;role\&quot;:\&quot;ingest-internal\&quot;,\&quot;pid\&quot;:425367}</span></code>
* Cardinalité : 1-1
<em>Ce champ existe pour les structures incluantes et incluses</em></p>
</div></blockquote>
<p><strong>&#8220;obId&#8221; (object Identifier):</strong> identifiant de la solution logicielle Vitam correspondant au GUID de l&#8217;unité archivistique sur laquelle s&#8217;applique l&#8217;opération.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de 36 caractères correspondant à un GUID.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evDetData&#8221; (event Detail Data):</strong> détails des données de l&#8217;événement.</p>
<blockquote>
<div><ul>
<li><p class="first">Donne plus de détail sur l&#8217;événement. Par exemple, l&#8217;historisation de métadonnées lors d&#8217;une modification se fait dans ce champ.</p>
</li>
<li><p class="first">Dans la structure incluse correspondant à cet événement, il contient un JSON, par exemple, composé du champ suivant :</p>
<blockquote>
<div><ul class="simple">
<li>diff: contient la différence entre les métadonnées d&#8217;origine et les métadonnées modifiées. Chaîne de caractères.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">En outre, lors de l&#8217;historisation de la sauvegarde de l&#8217;unité archivistique sur les offres de stockage, on utilise ce champ pour tracer les informations sur le fichier sauvegardé. Il contient, ainsi, un JSON composé comme suit :</p>
<blockquote>
<div><ul class="simple">
<li>FileName : Identifiant du fichier. Il s&#8217;agit du nom du fichier sauvegardé sur les offres de stockage.</li>
<li>Algorithm : Algorithme de hachage. Il s&#8217;agit du nom de l&#8217;algorithme de hachage.</li>
<li>MessageDigest : Empreinte du fichier. Il s&#8217;agit d&#8217;une chaîne de caractères contenant l&#8217;empreinte du fichier.</li>
<li>Offers : Offres de stockage. Il s&#8217;agit des offres de stockage utilisées pour la sauvegarde du fichier.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Cardinalité : 1-1</p>
</li>
<li><p class="first">Ce champ existe pour les structures incluantes et incluses.</p>
</li>
</ul>
</div></blockquote>
<p><strong>&#8220;events&#8221;:</strong> tableau de structure.</p>
<blockquote>
<div><ul class="simple">
<li>Pour la structure incluante, le tableau contient n structures incluses dans l&#8217;ordre des événements (date)</li>
<li>Cardinalité : 1-1</li>
<li>S&#8217;agissant d&#8217;un tableau, les structures incluses ont pour cardinalité 1-n.</li>
<li>Ce champ existe uniquement pour la structure incluante.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;_tenant&#8221;:</strong> identifiant du tenant</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;un entier.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe uniquement pour la structure incluante.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;_v&#8221;:</strong> version de l&#8217;enregistrement décrit</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;un entier.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe uniquement pour la structure incluante.</li>
<li>0 correspond à l&#8217;enregistrement d&#8217;origine. Si le numéro est supérieur à 0, alors il s&#8217;agit du numéro de version de l&#8217;enregistrement.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="detail-des-champs-du-json-stocke-en-base-specifiques-a-une-mise-a-jour">
<h3>3.3.4. Détail des champs du JSON stocké en base spécifiques à une mise à jour<a class="headerlink" href="#detail-des-champs-du-json-stocke-en-base-specifiques-a-une-mise-a-jour" title="Lien permanent vers ce titre">¶</a></h3>
<p>Exemple de données stockées :</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="s2">&quot;evDetData&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">diff</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">-  Title : Recommandation de 2012 du CCSDS for Space Data System Practices - Reference Model for an Open Archival Information System (OAIS)</span><span class="se">\\</span><span class="s2">n+  Title : Recommandation de 2012 du CCSDS for Space Data System Practices - Reference Model for an Open Archival Information System (OAIS) 222</span><span class="se">\\</span><span class="s2">n-  #operations : [ aedqaaaaacaam7mxabxecakz3jbfwpaaaaaq </span><span class="se">\\</span><span class="s2">n+  #operations : [ aedqaaaaacaam7mxabxecakz3jbfwpaaaaaq, aecaaaaaacaam7mxabjssak2dzsjniyaaaaq </span><span class="se">\&quot;</span><span class="s2">}&quot;</span>
</pre></div>
</div>
<p>Dans le cas d&#8217;une mise à jour de métadonnées d&#8217;une unité archivistique (ArchiveUnit), le champ <strong>&#8220;evDetData&#8221;</strong> de l&#8217;événement final est composé du champ suivant :</p>
<p><strong>&#8220;diff&#8221;:</strong> historisation des modifications de métadonnées.</p>
<blockquote>
<div><ul class="simple">
<li>Son contenu doit respecter la forme suivante : les anciennes valeurs sont précédées d&#8217;un &#8220;-&#8221; (<code class="docutils literal"><span class="pre">-champ1:</span> <span class="pre">valeur1</span></code>) et les nouvelles valeurs sont précédées d&#8217;un &#8220;+&#8221; (<code class="docutils literal"><span class="pre">+champ1:</span> <span class="pre">valeur2</span></code>)</li>
</ul>
<p><code class="docutils literal"><span class="pre">Exemple</span> <span class="pre">:</span>
<span class="pre">-Titre:</span> <span class="pre">Discours</span> <span class="pre">du</span> <span class="pre">Roi</span> <span class="pre">\n+Titre:</span> <span class="pre">Discours</span> <span class="pre">du</span> <span class="pre">Roi</span> <span class="pre">Louis</span> <span class="pre">XVI</span> <span class="pre">\n-Description:</span> <span class="pre">Etat</span> <span class="pre">Généraux</span> <span class="pre">du</span> <span class="pre">5</span> <span class="pre">mai</span> <span class="pre">1789</span> <span class="pre">\n+Description:</span> <span class="pre">Etat</span> <span class="pre">Généraux</span> <span class="pre">du</span> <span class="pre">5</span> <span class="pre">mai</span> <span class="pre">1789</span> <span class="pre">au</span> <span class="pre">Château</span> <span class="pre">de</span> <span class="pre">Versailles</span></code></p>
</div></blockquote>
</div>
</div>
<div class="section" id="collection-logbooklifecycleobjectgroup">
<h2>3.4. Collection LogbookLifeCycleObjectGroup<a class="headerlink" href="#collection-logbooklifecycleobjectgroup" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="utilisation-de-la-collection-logbooklifecycleobjectgroup">
<h3>3.4.1. Utilisation de la collection LogbookLifeCycleObjectGroup<a class="headerlink" href="#utilisation-de-la-collection-logbooklifecycleobjectgroup" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le journal du cycle de vie du groupe d&#8217;objets (ObjectGroup) trace tous les événements qui impactent le groupe d&#8217;objets (et les objets associés) dès sa prise en charge dans le système. Il doit être conservé aussi longtemps que les objets sont gérés dans le système.</p>
<ul class="simple">
<li>dès la réception des objets, on trace les opérations effectuées sur les groupes d&#8217;objets et objets qui sont dans le SIP.</li>
<li>les journaux du cycle de vie sont &#8220;committés&#8221; une fois le stockage des objets effectué et l&#8217;indexation des métadonnées effectué, avant l&#8217;envoi d&#8217;une notification au service versant.</li>
</ul>
<p>Chaque groupe d&#8217;objets possède une et une seule entrée dans la collection LogbookLifeCycleObjectGroup.</p>
</div>
<div class="section" id="exemple-de-json-stocke-en-base-comprenant-l-exhaustivite-des-champs">
<h3>3.4.2. Exemple de JSON stocké en base comprenant l&#8217;exhaustivité des champs<a class="headerlink" href="#exemple-de-json-stocke-en-base-comprenant-l-exhaustivite-des-champs" title="Lien permanent vers ce titre">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;aeaaaaaaaaaam7mxaap44akyf7hurgaaaaba&quot;</span><span class="p">,</span>
  <span class="s2">&quot;evId&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacaam7mxaap44akyf7hurgaaaabq&quot;</span><span class="p">,</span>
  <span class="s2">&quot;evParentId&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s2">&quot;evType&quot;</span><span class="p">:</span> <span class="s2">&quot;CHECK_CONSISTENCY&quot;</span><span class="p">,</span>
  <span class="s2">&quot;evDateTime&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-11-04T14:47:43.512&quot;</span><span class="p">,</span>
  <span class="s2">&quot;evIdProc&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacaam7mxaau56akyf7hr45qaaaaq&quot;</span><span class="p">,</span>
  <span class="s2">&quot;evTypeProc&quot;</span><span class="p">:</span> <span class="s2">&quot;INGEST&quot;</span><span class="p">,</span>
  <span class="s2">&quot;outcome&quot;</span><span class="p">:</span> <span class="s2">&quot;STARTED&quot;</span><span class="p">,</span>
  <span class="s2">&quot;outDetail&quot;</span><span class="p">:</span> <span class="s2">&quot;STARTED&quot;</span><span class="p">,</span>
  <span class="s2">&quot;outMessg&quot;</span><span class="p">:</span> <span class="s2">&quot;Début de la vérification de la cohérence entre objets/groupes d’objets et ArchiveUnit.&quot;</span><span class="p">,</span>
  <span class="s2">&quot;agId&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">Name</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">vitam-iaas-worker-01</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">Role</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">worker</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">PlatformId</span><span class="se">\&quot;</span><span class="s2">:425367}&quot;</span><span class="p">,</span>
  <span class="s2">&quot;obId&quot;</span><span class="p">:</span> <span class="s2">&quot;aeaaaaaaaaaam7mxaap44akyf7hurgaaaaba&quot;</span><span class="p">,</span>
  <span class="s2">&quot;evDetData&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s2">&quot;events&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
          <span class="s2">&quot;evId&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacaam7mxaap44akyf7hurgaaaabq&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evParentId&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
          <span class="s2">&quot;evType&quot;</span><span class="p">:</span> <span class="s2">&quot;CHECK_CONSISTENCY&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evDateTime&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-11-04T14:47:43.515&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evIdProc&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacaam7mxaau56akyf7hr45qaaaaq&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evTypeProc&quot;</span><span class="p">:</span> <span class="s2">&quot;INGEST&quot;</span><span class="p">,</span>
          <span class="s2">&quot;outcome&quot;</span><span class="p">:</span> <span class="s2">&quot;OK&quot;</span><span class="p">,</span>
          <span class="s2">&quot;outDetail&quot;</span><span class="p">:</span> <span class="s2">&quot;OK&quot;</span><span class="p">,</span>
          <span class="s2">&quot;outMessg&quot;</span><span class="p">:</span> <span class="s2">&quot;Objet/groupe dobjet référencé par un ArchiveUnit.&quot;</span><span class="p">,</span>
          <span class="s2">&quot;agId&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">Name</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">vitam-iaas-app-02</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">Role</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">worker</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">ServerId</span><span class="se">\&quot;</span><span class="s2">:773928267,</span><span class="se">\&quot;</span><span class="s2">SiteId</span><span class="se">\&quot;</span><span class="s2">:1,</span><span class="se">\&quot;</span><span class="s2">GlobalPlatformId</span><span class="se">\&quot;</span><span class="s2">:237057355}&quot;</span><span class="p">,</span>
          <span class="s2">&quot;obId&quot;</span><span class="p">:</span> <span class="s2">&quot;aeaaaaaaaaaam7mxaap44akyf7hurgaaaaba&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evDetData&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="p">{</span>
          <span class="s2">&quot;evId&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">aeaaaaaaaaaam7mxaap44akyf7hurgaaaaba</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evParentId&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
          <span class="s2">&quot;evType&quot;</span><span class="p">:</span> <span class="s2">&quot;CHECK_DIGEST&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evDateTime&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-11-04T14:47:45.132&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evIdProc&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaacaam7mxaau56akyf7hr45qaaaaq&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evTypeProc&quot;</span><span class="p">:</span> <span class="s2">&quot;INGEST&quot;</span><span class="p">,</span>
          <span class="s2">&quot;outcome&quot;</span><span class="p">:</span> <span class="s2">&quot;STARTED&quot;</span><span class="p">,</span>
          <span class="s2">&quot;outDetail&quot;</span><span class="p">:</span> <span class="s2">&quot;STARTED&quot;</span><span class="p">,</span>
          <span class="s2">&quot;outMessg&quot;</span><span class="p">:</span> <span class="s2">&quot;Début de la vérification de lempreinte.&quot;</span><span class="p">,</span>
          <span class="s2">&quot;agId&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">Name</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">vitam-iaas-worker-01</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">Role</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">worker</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">PlatformId</span><span class="se">\&quot;</span><span class="s2">:425367}&quot;</span><span class="p">,</span>
          <span class="s2">&quot;obId&quot;</span><span class="p">:</span> <span class="s2">&quot;aeaaaaaaaaaam7mxaap44akyf7hurgaaaaba&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evDetData&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">MessageDigest</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">0f1de441a7d44a277e265eb741e748ea18c96a59c8c0385f938b9768a42e375716dfa3b20cc125905636</span>
          <span class="mi">5</span><span class="n">aa0d3541f6128389ad60c8effbdc63b94df9a2e02bb</span>\<span class="s2">&quot;,</span><span class="se">\&quot;</span><span class="s2">Algorithm</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">SHA512</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">SystemMessageDigest</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">SHA-512</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">SystemAlgorithm</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">0f1de441a7d44a277e265eb741e748ea18c96a59c8c0385f938b9768a42e375716dfa3b20cc125905636</span>
          <span class="mi">5</span><span class="n">aa0d3541f6128389ad60c8effbdc63b94df9a2e02bb</span>\<span class="s2">&quot;} &quot;</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="p">{</span>

          <span class="p">[</span><span class="o">...</span><span class="p">]</span>

      <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&quot;_tenant&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s2">&quot;_v&quot;</span><span class="p">:</span> <span class="mi">0</span>
  <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h3>3.4.3. Détail des champs du JSON stocké en base<a class="headerlink" href="#id1" title="Lien permanent vers ce titre">¶</a></h3>
<p><strong>&#8220;_id&#8221;:</strong> Identifiant donné par le système lors de l&#8217;initialisation du journal du cycle de vie.</p>
<blockquote>
<div><ul class="simple">
<li>Il est constitué d&#8217;une chaîne de 36 caractères correspondant à un GUID. Il reprend la valeur du champ _id de la collection ObjectGroup.</li>
<li>Cet identifiant constitue la clé primaire du journal du cycle de vie du groupe d&#8217;objet.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe uniquement pour la structure incluante.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evId&#8221; (event Identifier):</strong> identifiant de l&#8217;événement.</p>
<blockquote>
<div><ul class="simple">
<li>Il est constitué d&#8217;une chaîne de 36 caractères correspondant à un GUID.</li>
<li>Il identifie l&#8217;événement de manière unique dans la base.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses*</li>
</ul>
<p><em>Ce champ existe pour les structures incluantes et incluses</em></p>
</div></blockquote>
<dl class="docutils">
<dt><strong>&#8220;evParentId&#8221; (event Parent Identifier):</strong> identifiant de l&#8217;événement parent.</dt>
<dd><ul class="first last simple">
<li>Il est constitué d&#8217;une chaîne de 36 caractères correspondant à un GUID.</li>
<li>Il identifie l&#8217;événement parent.</li>
<li>La valeur du champ est toujours &#8220;null&#8221; pour la structure incluante et les tâches principales</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses</li>
</ul>
</dd>
</dl>
<p><strong>&#8220;evType&#8221;</strong> (event Type): nom de l&#8217;événement.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>La liste des valeurs possibles pour ce champ se trouve en annexe. Seul le code doit être stocké dans ce champ, la traduction doit se faire via le fichier properties (vitam-logbook-message-fr.properties).</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evDateTime&#8221; (event DateTime):</strong> date de l&#8217;événement.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une date au format ISO8601 AAAA-MM-JJ+&#8221;T&#8221;+hh:mm:ss:[3digits de millisecondes]</li>
</ul>
<p><code class="docutils literal"><span class="pre">Exemple</span> <span class="pre">:</span> <span class="pre">&quot;2016-08-17T08:26:04.227&quot;</span></code>.</p>
<ul class="simple">
<li>Ce champ est positionné par le client LogBook.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evIdProc&#8221; (event Identifier Process):</strong> identifiant du processus.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de 36 caractères.</li>
<li>Toutes les mêmes entrées du journal du cycle de vie partagent la même valeur, qui est celle du champ &#8220;_id&#8221; de la collection LogbookOperation.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evTypeProc&#8221; (event Type Process):</strong> type de processus.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>Nom du processus qui effectue l&#8217;action, parmi une liste de processus possibles fixée. Cette liste est disponible en annexe.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses</li>
</ul>
</div></blockquote>
<p><strong>&#8220;outcome&#8221;:</strong> statut de l&#8217;événement.</p>
<blockquote>
<div><ul>
<li><p class="first">Il s&#8217;agit d&#8217;une chaîne de caractères devant correspondre une valeur de la liste suivante :</p>
<blockquote>
<div><ul class="simple">
<li>STARTED (Début de l&#8217;événement)</li>
<li>OK (Succès de l&#8217;événement)</li>
<li>KO (Échec de l&#8217;événement)</li>
<li>WARNING (Succès de l&#8217;événement comportant des alertes)</li>
<li>FATAL (Erreur technique)</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Cardinalité : 1-1</p>
</li>
<li><p class="first">Ce champ existe pour les structures incluantes et incluses.</p>
</li>
</ul>
</div></blockquote>
<p><strong>&#8220;outDetail&#8221; (outcome Detail):</strong> code correspondant à l&#8217;erreur</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>Il contient le code fin de l&#8217;événement, incluant le statut. La liste des valeurs possibles pour ce champ se trouve en annexe. Seul le code est stocké dans ce champ, la traduction doit se faire via le fichier properties (vitam-logbook-message-fr.properties)</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;outMessg&#8221; (outcomeDetailMessage):</strong> détail du résultat de l&#8217;événement.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>C&#8217;est un message intelligible destiné à être lu par un être humain en tant que détail du résultat de l&#8217;événement.</li>
<li>Traduction du code présent dans outDetail issue du fichier vitam-logbook-message-fr.properties du code présent dans outDetail.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;agId&#8221; (agent Identifier):</strong> identifiant de l&#8217;agent réalisant l&#8217;évènement.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit de plusieurs chaînes de caractères indiquant le nom, le rôle et le PID de l&#8217;agent. Ce champ est calculé par le journal à partir de ServerIdentifier.</li>
</ul>
<p><code class="docutils literal"><span class="pre">Exemple</span> <span class="pre">:</span> <span class="pre">{\&quot;Name\&quot;:\&quot;vitam-iaas-app-01\&quot;,\&quot;Role\&quot;:\&quot;ingest-external\&quot;,\&quot;ServerId\&quot;:1514166061,\&quot;SiteId\&quot;:1,\&quot;GlobalPlatformId\&quot;:171988781}</span></code></p>
<ul class="simple">
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;obId&#8221; (object Identifier):</strong> identifiant de la solution logicielle Vitam du lot d’objets auquel s’applique l’opération (lot correspondant à une liste).</p>
<blockquote>
<div><blockquote>
<div><ul class="simple">
<li>Si l&#8217;évènement touche tout le GOT, alors le champs contiendra l&#8217;ID du GOT. S&#8217;il touche qu&#8217;un seul objet du GOT, alors contiendra que celui de l&#8217;objet en question</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses*</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evDetData&#8221; (event Detail Data):</strong> détails des données de l&#8217;événement.</p>
<blockquote>
<div><ul>
<li><p class="first">Donne plus de détails sur l&#8217;événement.</p>
</li>
<li><p class="first">Par exemple, pour l&#8217;événement LFC.CHECK_DIGEST, lorsque l&#8217;empreinte d&#8217;un objet inscrite dans le bordereau n&#8217;est pas calculée en SHA512, ce champ précise l&#8217;empreinte d&#8217;origine et celle réalisée ensuite par la solution logicielle Vitam. Dans la structure incluse correspondant à cet événement, il contient un JSON composé des champs suivants :</p>
<blockquote>
<div><ul class="simple">
<li>MessageDigest : empreinte de l&#8217;objet dans le bordereau. Chaîne de caractères, reprenant le champ &#8220;MessageDigest&#8221; du message ArchiveTransfer.</li>
<li>Algorithm : algorithme de hachage utilisé dans le bordereau. Chaîne de caractères, reprenant l&#8217;attribut de champ &#8220;MessageDigest&#8221; du message ArchiveTransfer.</li>
<li>SystemMessageDigest : empreinte de l&#8217;objet réalisé par la solution logicielle Vitam. Chaîne de caractères.</li>
<li>SystemAlgorithm : algorithme de hachage utilisé par la solution logicielle Vitam. Chaîne de caractères.</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>En outre, pour l&#8217;événement LFC.OBJ_STORAGE, on utilise ce champ pour tracer les informations sur l&#8217;objet (fichier binaire) sauvegardé. Il contient un JSON composé comme suit :</p>
<blockquote>
<div><ul class="simple">
<li>FileName : Identifiant du fichier. Il s&#8217;agit du nom du fichier sauvegardé sur les offres de stockage.</li>
<li>Algorithm : Algorithme de hachage. Il s&#8217;agit du nom de l&#8217;algorithme de hachage.</li>
<li>MessageDigest : Empreinte de l&#8217;objet. Il s&#8217;agit d&#8217;une chaîne de caractères contenant l&#8217;empreinte de l&#8217;objet.</li>
<li>Offers : Offres de srockage. Il s&#8217;agit des offres de stockage utilisées pour la sauvegarde de l&#8217;objet.</li>
</ul>
</div></blockquote>
<p>Pour l&#8217;événement LFC.OG_METADATA_STORAGE, on utilise ce champ pour tracer les informations sur le fichier (métadonnée) sauvegardé. Il contient un JSON composé comme suit :</p>
<blockquote>
<div><blockquote>
<div><ul class="simple">
<li>FileName : Identifiant du fichier. Il s&#8217;agit du nom du fichier sauvegardé sur les offres de stockage.</li>
<li>Algorithm : Algorithme de hachage. Il s&#8217;agit du nom de l&#8217;algorithme de hachage.</li>
<li>MessageDigest : Empreinte du fichier. Il s&#8217;agit d&#8217;une chaîne de caractères contenant l&#8217;empreinte du fichier.</li>
<li>Offers : Offres de stockage. Il s&#8217;agit des offres de stockage utilisées pour la sauvegarde du fichier.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses</li>
</ul>
</div></blockquote>
<p><strong>&#8220;events&#8221;:</strong> tableau de structure.</p>
<blockquote>
<div><ul class="simple">
<li>Pour la structure incluante, le tableau contient n structures incluses dans l&#8217;ordre des événements (date)</li>
<li>Cardinalité : 1-1</li>
<li>S&#8217;agissant d&#8217;un tableau, les structures incluses ont pour cardinalité 1-n.</li>
<li>Ce champ existe uniquement pour la structure incluante.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;_tenant&#8221;:</strong> identifiant du tenant.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;un entier.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe uniquement pour la structure incluante.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;_v&#8221;:</strong> version de l&#8217;enregistrement décrit.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;un entier.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe uniquement pour la structure incluante.</li>
</ul>
</div></blockquote>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="metadata.html" class="btn btn-neutral float-right" title="4. Base MetaData" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="identity.html" class="btn btn-neutral" title="2. Base Identity" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.26.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>