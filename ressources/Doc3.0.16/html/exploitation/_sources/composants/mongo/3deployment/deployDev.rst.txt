Déploiement d'un cluster de développement
#########################################

En environnement de développement, la tolérance aux pannes, ainsi que la performance du système testé, ne sont pas attendues. Il est donc possible de déployer un cluster minimaliste, constitué d'un composant par type et associé à des ressources machines minimales. La configuration minimum pour un service mongoDB est de 1 vCPU et 512 Mo de RAM.
Il est possible de colocaliser les trois services ``vitam-mongos``, ``vitam-mongoc`` et ``vitam-mongod`` sur la même machine en prévoyant 1 vCPU et 2 Go de RAM.

Pour réaliser le déploiement du cluster ``mongodb-data`` sur une seule machine, l'inventaire ansible doit référencer la même machine pour chacun des groupes ``hosts-mongos-data``, ``hosts-mongoc-data`` et ``hosts-mongod-data``. Bien qu'il n'y ait qu'un seul ``Shard`` et qu'un membre par ``ReplicaSet``, le paramètres ``mongo_rs_bootstrap`` et ``mongo_shard_id`` sont attendus. Ces paramètres sont détaillés dans le paragraphe qui suit.

Exemple ::

    [hosts-mongodb-data:children]
    hosts-mongos-data
    hosts-mongoc-data
    hosts-mongod-data
    
    [hosts-mongos-data]
    host1.vm    mongo_cluster_name=mongodb-data
    
    [hosts-mongoc-data]
    host1.vm    mongo_cluster_name=mongodb-data                    mongo_rs_bootstrap=true
    
    [hosts-mongod-data]
    host1.vm    mongo_cluster_name=mongodb-data  mongo_shard_id=0  mongo_rs_bootstrap=true

Le déploiement d'un cluster ``mongodb-offer`` suit les mêmes règles que l'exemple illustré ci-dessus (les groupes ansible ne sont pas les mêmes).
