

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Workflow de l’audit de l’existence et de l’intégrité des fichiers &mdash; documentation VITAM - Modèle de workflow 1.0.0</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Recherche" href="../search.html"/>
    <link rel="top" title="documentation VITAM - Modèle de workflow 1.0.0" href="../index.html"/>
        <link rel="up" title="AUDIT" href="_toc_audit.html"/>
        <link rel="next" title="Rapport d’audit" href="rapportaudit.html"/>
        <link rel="prev" title="Workflow de contrôle d’intégrité d’un journal sécurisé" href="workflow-check-traceability.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> VITAM - Modèle de workflow
          

          
            
            <img src="../_static/logo_vitam.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="_toc_audit.html">AUDIT</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="workflow-check-traceability.html">Workflow de contrôle d&#8217;intégrité d&#8217;un journal sécurisé</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Workflow de l&#8217;audit de l&#8217;existence et de l&#8217;intégrité des fichiers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#processus-d-audit-d-existence-des-fichiers-vision-metier">Processus d&#8217;audit d&#8217;existence des fichiers (vision métier)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#processus-d-audit-d-integrite-des-fichiers-vision-metier">Processus d&#8217;audit d&#8217;intégrité des fichiers (vision métier)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#processus-de-preparation-de-l-audit-stp-prepare-audit">Processus de préparation de l&#8217;audit (STP_PREPARE_AUDIT)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creation-de-la-liste-des-groupes-d-objets-list-objectgroup-id-prepareauditactionhandler-java">Création de la liste des groupes d&#8217;objets (LIST_OBJECTGROUP_ID - PrepareAuditActionHandler.java)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#processus-d-execution-de-l-audit-stp-audit">Processus d&#8217;éxecution de l&#8217;audit (STP_AUDIT)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#audit-de-la-verification-des-objets-audit-check-object-auditcheckobjectplugin-java">Audit de la vérification des objets AUDIT_CHECK_OBJECT - AuditCheckObjectPlugin.java</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#processus-de-finalisation-de-l-audit-stp-finalise-audit">Processus de finalisation de l&#8217;audit (STP_FINALISE_AUDIT)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#notification-de-la-fin-d-audit-report-audit-generateauditreportactionhandler-java">Notification de la fin d&#8217;audit (REPORT_AUDIT - GenerateAuditReportActionHandler.java)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="rapportaudit.html">Rapport d&#8217;audit</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dip/_toc_dip.html">DIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ingest/_toc_ingest.html">INGEST</a></li>
<li class="toctree-l1"><a class="reference internal" href="../masterdata/_toc_masterdata.html">MASTERDATA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../traceability/_toc_traceability.html">TRACEABILITY</a></li>
<li class="toctree-l1"><a class="reference internal" href="../update/_toc_update.html">UPDATE</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">VITAM - Modèle de workflow</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="_toc_audit.html">AUDIT</a> &raquo;</li>
      
    <li>Workflow de l&#8217;audit de l&#8217;existence et de l&#8217;intégrité des fichiers</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/audit/workflow_audit_file_existing_integrity.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="workflow-de-l-audit-de-l-existence-et-de-l-integrite-des-fichiers">
<h1>Workflow de l&#8217;audit de l&#8217;existence et de l&#8217;intégrité des fichiers<a class="headerlink" href="#workflow-de-l-audit-de-l-existence-et-de-l-integrite-des-fichiers" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Lien permanent vers ce titre">¶</a></h2>
<p>Cette section décrit le processus (workflow) d&#8217;audit de l&#8217;existence des fichiers mis en place dans la solution logicielle Vitam.</p>
<p>Celui-ci est défini dans le fichier &#8220;DefaultAuditWorkflow.json” (situé ici : sources/processing/processing-management/src/main/resources/workflows).</p>
</div>
<div class="section" id="processus-d-audit-d-existence-des-fichiers-vision-metier">
<h2>Processus d&#8217;audit d&#8217;existence des fichiers (vision métier)<a class="headerlink" href="#processus-d-audit-d-existence-des-fichiers-vision-metier" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le processus d&#8217;audit prend comme point d&#8217;entrée l&#8217;identifiant d&#8217;un tenant ou l&#8217;identifiant d&#8217;un service producteur. Il est possible de lancer un audit de l&#8217;existence des fichiers uniquement, ou de lancer un audit vérifiant l&#8217;existence et l&#8217;intégrité des fichiers en même temps.</p>
<p>Pour chaque objet du tenant choisi ou chaque objet appartenant au service producteur, l&#8217;audit va vérifier :</p>
<blockquote>
<div><ul class="simple">
<li>Que la liste des offres de stockage définie dans le groupe d&#8217;objets est bien la même que celle définie dans la stratégie de stockage</li>
<li>Que tous les fichiers correspondant aux objets existent sur les offres déclarées, dans un nombre de copie spécifié via la stratégie de stockage</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="processus-d-audit-d-integrite-des-fichiers-vision-metier">
<h2>Processus d&#8217;audit d&#8217;intégrité des fichiers (vision métier)<a class="headerlink" href="#processus-d-audit-d-integrite-des-fichiers-vision-metier" title="Lien permanent vers ce titre">¶</a></h2>
<p>Si l&#8217;audit d&#8217;intégrité des objets est lancé, le processus va également vérifier que les empreintes des objets stockés en base de données sont bien les mêmes que les empreintes fournies par les espaces de stockage, alors recalculées à la demande de l&#8217;audit.</p>
<p>Dans une première étape technique, il prépare la liste des groupes d&#8217;objets à auditer afin de paralléliser la tâche.
Dans un second temps, il effectue la vérification elle même.
Enfin, il sécurise les journaux de cycle de vie qui ont été modifiés.</p>
</div>
<div class="section" id="processus-de-preparation-de-l-audit-stp-prepare-audit">
<h2>Processus de préparation de l&#8217;audit (STP_PREPARE_AUDIT)<a class="headerlink" href="#processus-de-preparation-de-l-audit-stp-prepare-audit" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="creation-de-la-liste-des-groupes-d-objets-list-objectgroup-id-prepareauditactionhandler-java">
<h3>Création de la liste des groupes d&#8217;objets (LIST_OBJECTGROUP_ID - PrepareAuditActionHandler.java)<a class="headerlink" href="#creation-de-la-liste-des-groupes-d-objets-list-objectgroup-id-prepareauditactionhandler-java" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p class="first"><strong>Règle</strong> : Création de la liste des groupes d&#8217;objets à auditer</p>
</li>
<li><p class="first"><strong>Type</strong> : bloquant</p>
</li>
<li><dl class="first docutils">
<dt><strong>Statuts</strong> :</dt>
<dd><ul class="first last simple">
<li>OK : la liste a été créée avec succès (LIST_OBJECTGROUP_ID.OK=Succès de la création de la liste des groupes d&#8217;objets à auditer)</li>
<li>FATAL : Une erreur technique est survenue lors de la création de la liste (LIST_OBJECTGROUP_ID.FATAL=Erreur fatale lors de la création de la liste des groupes d&#8217;objets à auditer)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="processus-d-execution-de-l-audit-stp-audit">
<h2>Processus d&#8217;éxecution de l&#8217;audit (STP_AUDIT)<a class="headerlink" href="#processus-d-execution-de-l-audit-stp-audit" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="audit-de-la-verification-des-objets-audit-check-object-auditcheckobjectplugin-java">
<h3>Audit de la vérification des objets AUDIT_CHECK_OBJECT - AuditCheckObjectPlugin.java<a class="headerlink" href="#audit-de-la-verification-des-objets-audit-check-object-auditcheckobjectplugin-java" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p class="first"><strong>Règle</strong> : Tâche technique pour organiser et lancer l&#8217;action d&#8217;audit. A la fin de l&#8217;audit de chaque groupe d&#8217;objets en KO, la mise à jour en base de son journal de cycle de vie est faite.</p>
</li>
<li><p class="first"><strong>Type</strong> : bloquant</p>
</li>
<li><dl class="first docutils">
<dt><strong>Statuts</strong> :</dt>
<dd><ul class="first last simple">
<li>OK : l&#8217;action d&#8217;audit s&#8217;est terminée en OK (AUDIT_CHECK_OBJECT.AUDIT_FILE_EXISTING.OK=Succès de l&#8217;audit de l&#8217;existence des objets)</li>
<li>KO : l&#8217;action d&#8217;audit s&#8217;est terminée en KO (AUDIT_CHECK_OBJECT.AUDIT_FILE_EXISTING.KO=Echec de l&#8217;audit de l&#8217;existence des objets : au moins un objet demandé n&#8217;existe pas ou des stratégies de stockage sont incohérentes avec les offres déclarées)</li>
<li>FATAL : une erreur technique est survenue lors du lancement de l&#8217;action d&#8217;audit (AUDIT_CHECK_OBJECT.AUDIT_FILE_EXISTING.FATAL=Erreur fatale lors de l&#8217;audit de l&#8217;existence des objets)</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="section" id="audit-de-l-existence-des-objets-audit-file-existing-checkexistenceobjectplugin-java">
<h4>Audit de l&#8217;existence des objets (AUDIT_FILE_EXISTING - CheckExistenceObjectPlugin.java)<a class="headerlink" href="#audit-de-l-existence-des-objets-audit-file-existing-checkexistenceobjectplugin-java" title="Lien permanent vers ce titre">¶</a></h4>
<ul>
<li><dl class="first docutils">
<dt><strong>Règle</strong></dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">Vérification que, pour chaque groupe d&#8217;objets audités</span><dd><ul class="first last simple">
<li>La stratégie de stockage du groupe d&#8217;objets est conforme à celle du moteur de stockage</li>
<li>Les fichiers correspondant aux objets, déclarés dans le groupe d&#8217;objet, existent bien sous le même nom dans les offres de stockage</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first"><strong>Type</strong> : bloquant</p>
</li>
<li><dl class="first docutils">
<dt><strong>Statuts</strong> :</dt>
<dd><ul class="first last simple">
<li>OK : tous les objets de tous les groupes d&#8217;objet audités existent bien sur les offres de stockage (AUDIT_CHECK_OBJECT.AUDIT_FILE_EXISTING.OK=Succès de l&#8217;audit de l&#8217;existence de fichiers )</li>
<li>KO : au moins un objet n&#8217;existe pas pour au moins un groupe objets (AUDIT_CHECK_OBJECT.AUDIT_FILE_EXISTING.KO=Echec de l&#8217;audit de l&#8217;existence de fichiers)</li>
<li>Warning : il n&#8217;y a aucun objet à auditer (cas par exemple d&#8217;un producteur sans objets) (AUDIT_CHECK_OBJECT.AUDIT_FILE_EXISTING.WARNING=Avertissement lors de l&#8217;audit de l&#8217;existence des objets : au moins un groupe d&#8217;objets n&#8217;a pas d&#8217;objet binaire à vérifier)</li>
<li>FATAL : une erreur technique est survenue lors de l&#8217;audit de l&#8217;existence des objets (AUDIT_CHECK_OBJECT.AUDIT_FILE_EXISTING.FATAL=Erreur fatale lors de l&#8217;audit de l&#8217;existence des objets)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="audit-de-l-integrite-des-objets-audit-check-object-audit-file-integrity-checkintegrityobjectplugin-java">
<h4>Audit de l&#8217;intégrité des objets (AUDIT_CHECK_OBJECT.AUDIT_FILE_INTEGRITY - CheckIntegrityObjectPlugin.java)<a class="headerlink" href="#audit-de-l-integrite-des-objets-audit-check-object-audit-file-integrity-checkintegrityobjectplugin-java" title="Lien permanent vers ce titre">¶</a></h4>
<ul>
<li><dl class="first docutils">
<dt><strong>Règle</strong></dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">Vérification que, pour chaque groupe d&#8217;objets audités</span><dd><ul class="first last simple">
<li>L&#8217;objet existe bien (voir &#8220;AUDIT_FILE_EXISTING&#8221;)</li>
<li>L&#8217;empreinte de l&#8217;objet enregistrée en base de données est la même pour chaque objet que celle obtenue par l&#8217;offre de stockage, recalculée à la demande de l&#8217;audit</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first"><strong>Type</strong> : bloquant</p>
</li>
<li><dl class="first docutils">
<dt><strong>Statuts</strong> :</dt>
<dd><ul class="first last simple">
<li>OK : tous les objets de tous les groupes d&#8217;objet audités existent bien sur les offres de stockage et leurs empreintes sont identiques entre celles enregistrées en base de données et celles recalculées par les offres de stockage (AUDIT_CHECK_OBJECT.AUDIT_FILE_INTEGRITY.OK=Succès de l&#8217;audit de l&#8217;existence et de l&#8217;intégrité des objets)</li>
<li>KO : au moins un objet n&#8217;existe pas pour au moins un objet (AUDIT_CHECK_OBJECT.AUDIT_FILE_INTEGRITY.KO=Échec de l&#8217;audit de l&#8217;existence et de l&#8217;intégrité des objets)</li>
<li>Warning : il n&#8217;y a aucun objet à auditer (cas par exemple d&#8217;un producteur sans objets) (AUDIT_CHECK_OBJECT.AUDIT_FILE_INTEGRITY.WARNING=Avertissement lors de l&#8217;existence et de l&#8217;intégrité des objets)</li>
<li>FATAL : une erreur technique est survenue lors de l&#8217;audit de l&#8217;existence des fichiers (AUDIT_CHECK_OBJECT.AUDIT_FILE_INTEGRITY.FATAL=Erreur fatale lors de l&#8217;existence et de l&#8217;intégrité des objets)</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="figure align-center">
<img alt="../_images/workflow_audit_file_existing.png" src="../_images/workflow_audit_file_existing.png" />
</div>
</div>
</div>
</div>
<div class="section" id="processus-de-finalisation-de-l-audit-stp-finalise-audit">
<h2>Processus de finalisation de l&#8217;audit (STP_FINALISE_AUDIT)<a class="headerlink" href="#processus-de-finalisation-de-l-audit-stp-finalise-audit" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="notification-de-la-fin-d-audit-report-audit-generateauditreportactionhandler-java">
<h3>Notification de la fin d&#8217;audit (REPORT_AUDIT - GenerateAuditReportActionHandler.java)<a class="headerlink" href="#notification-de-la-fin-d-audit-report-audit-generateauditreportactionhandler-java" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p class="first"><strong>Règle</strong> : génération du rapport d&#8217;audit</p>
</li>
<li><p class="first"><strong>Type</strong> : bloquant</p>
</li>
<li><dl class="first docutils">
<dt><strong>Statuts</strong> :</dt>
<dd><ul class="first last simple">
<li>OK : le rapport a été créé avec succès (REPORT_AUDIT.OK=Succès de la notification de la fin de l&#8217;audit Detail)</li>
<li>FATAL : Une erreur technique est survenue lors de la création du rapport d&#8217;audit (REPORT_AUDIT.OK.FATAL=Erreur fatale lors de la notification de la fin de l&#8217;audit)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="rapportaudit.html" class="btn btn-neutral float-right" title="Rapport d’audit" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="workflow-check-traceability.html" class="btn btn-neutral" title="Workflow de contrôle d’intégrité d’un journal sécurisé" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>