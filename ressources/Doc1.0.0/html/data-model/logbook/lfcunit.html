

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3.3. Collection LogbookLifeCycleUnit &mdash; documentation VITAM - Modèle de données 1.0.0</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Recherche" href="../search.html"/>
    <link rel="top" title="documentation VITAM - Modèle de données 1.0.0" href="../index.html"/>
        <link rel="up" title="3. Base Logbook" href="_toc_logbook.html"/>
        <link rel="next" title="3.4. Collection LogbookLifeCycleObjectGroup" href="lfcgot.html"/>
        <link rel="prev" title="3.2. Collection LogbookOperation" href="operation.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> VITAM - Modèle de données
          

          
            
            <img src="../_static/logo_vitam.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../identity/_toc_identity.html">2. Base Identity</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="_toc_logbook.html">3. Base Logbook</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">3.1. Collections contenues dans la base</a></li>
<li class="toctree-l2"><a class="reference internal" href="operation.html">3.2. Collection LogbookOperation</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.3. Collection LogbookLifeCycleUnit</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#utilisation-de-la-collection-logbooklifecycleunit">3.3.1. Utilisation de la collection LogbookLifeCycleUnit</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exemple-de-json-stocke-en-base-comprenant-l-exhaustivite-des-champs-de-la-collection-logbooklifecycleunit">3.3.2. Exemple de JSON stocké en base comprenant l&#8217;exhaustivité des champs de la collection LogbookLifeCycleUnit</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detail-des-champs-du-json-stocke-en-base">3.3.3. Détail des champs du JSON stocké en base</a></li>
<li class="toctree-l3"><a class="reference internal" href="#champs-presents-dans-les-events">3.3.4. Champs présents dans les events</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detail-des-champs-du-json-stocke-en-base-specifiques-a-une-mise-a-jour">3.3.5. Détail des champs du JSON stocké en base spécifiques à une mise à jour</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="lfcgot.html">3.4. Collection LogbookLifeCycleObjectGroup</a></li>
<li class="toctree-l2"><a class="reference internal" href="offset.html">3.5. Collection Offset</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../metadata/_toc_metadata.html">4. Base MetaData</a></li>
<li class="toctree-l1"><a class="reference internal" href="../masterdata/_toc_masterdata.html">5. Base MasterData</a></li>
<li class="toctree-l1"><a class="reference internal" href="../annexes.html">6. Annexes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">VITAM - Modèle de données</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="_toc_logbook.html">3. Base Logbook</a> &raquo;</li>
      
    <li>3.3. Collection LogbookLifeCycleUnit</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/logbook/lfcunit.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="collection-logbooklifecycleunit">
<h1>3.3. Collection LogbookLifeCycleUnit<a class="headerlink" href="#collection-logbooklifecycleunit" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="utilisation-de-la-collection-logbooklifecycleunit">
<h2>3.3.1. Utilisation de la collection LogbookLifeCycleUnit<a class="headerlink" href="#utilisation-de-la-collection-logbooklifecycleunit" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le journal du cycle de vie d&#8217;une unité archivistique (ArchiveUnit) trace tous les événements qui impactent celle-ci dès sa prise en charge dans le système. Il doit être conservé aussi longtemps que l&#8217;unité d&#8217;archives est gérée par le système.</p>
<ul class="simple">
<li>dès la réception d&#8217;une unité d&#8217;archives, l&#8217;ensemble des opérations qui lui sont appliquées est tracé.</li>
<li>les journaux du cycle de vie sont &#8220;committés&#8221; une fois le stockage des objets et l&#8217;indexation des métadonnées effectués sans échec, avant l&#8217;envoi d&#8217;une notification au service versant</li>
</ul>
<p>Chaque unité archivistique possède une et une seule entrée dans la collection LogbookLifeCycleUnit.</p>
</div>
<div class="section" id="exemple-de-json-stocke-en-base-comprenant-l-exhaustivite-des-champs-de-la-collection-logbooklifecycleunit">
<h2>3.3.2. Exemple de JSON stocké en base comprenant l&#8217;exhaustivité des champs de la collection LogbookLifeCycleUnit<a class="headerlink" href="#exemple-de-json-stocke-en-base-comprenant-l-exhaustivite-des-champs-de-la-collection-logbooklifecycleunit" title="Lien permanent vers ce titre">¶</a></h2>
<p>Extrait d&#8217;un JSON correspondant à un journal de cycle du vie d&#8217;une unité archivistique.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;aeaqaaaaaehbl62nabqkwak3k7qg5tiaaaaq&quot;</span><span class="p">,</span>
  <span class="s2">&quot;evId&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaaghbl62nabqkwak3k7qg5tiaaabq&quot;</span><span class="p">,</span>
  <span class="s2">&quot;evParentId&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s2">&quot;evType&quot;</span><span class="p">:</span> <span class="s2">&quot;LFC.LFC_CREATION&quot;</span><span class="p">,</span>
  <span class="s2">&quot;evDateTime&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-04-10T12:39:37.933&quot;</span><span class="p">,</span>
  <span class="s2">&quot;evIdProc&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaaghe45hwabliwak3k7qg7kaaaaaq&quot;</span><span class="p">,</span>
  <span class="s2">&quot;evTypeProc&quot;</span><span class="p">:</span> <span class="s2">&quot;INGEST&quot;</span><span class="p">,</span>
  <span class="s2">&quot;outcome&quot;</span><span class="p">:</span> <span class="s2">&quot;STARTED&quot;</span><span class="p">,</span>
  <span class="s2">&quot;outDetail&quot;</span><span class="p">:</span> <span class="s2">&quot;LFC.LFC_CREATION.STARTED&quot;</span><span class="p">,</span>
  <span class="s2">&quot;outMessg&quot;</span><span class="p">:</span> <span class="s2">&quot;!LFC.LFC_CREATION.STARTED!&quot;</span><span class="p">,</span>
  <span class="s2">&quot;agId&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">Name</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">vitam-iaas-app-02</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">Role</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">worker</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">ServerId</span><span class="se">\&quot;</span><span class="s2">:1041627981,</span><span class="se">\&quot;</span><span class="s2">SiteId</span><span class="se">\&quot;</span><span class="s2">:1,</span><span class="se">\&quot;</span><span class="s2">GlobalPlatformId</span><span class="se">\&quot;</span><span class="s2">:236321613}&quot;</span><span class="p">,</span>
  <span class="s2">&quot;obId&quot;</span><span class="p">:</span> <span class="s2">&quot;aeaqaaaaaehbl62nabqkwak3k7qg5tiaaaaq&quot;</span><span class="p">,</span>
  <span class="s2">&quot;evDetData&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s2">&quot;events&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
          <span class="s2">&quot;evId&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaaghbl62nabqkwak3k7qg5tiaaabq&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evParentId&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
          <span class="s2">&quot;evType&quot;</span><span class="p">:</span> <span class="s2">&quot;LFC.CHECK_MANIFEST&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evDateTime&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-04-10T12:39:37.953&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evIdProc&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaaghe45hwabliwak3k7qg7kaaaaaq&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evTypeProc&quot;</span><span class="p">:</span> <span class="s2">&quot;INGEST&quot;</span><span class="p">,</span>
          <span class="s2">&quot;outcome&quot;</span><span class="p">:</span> <span class="s2">&quot;OK&quot;</span><span class="p">,</span>
          <span class="s2">&quot;outDetail&quot;</span><span class="p">:</span> <span class="s2">&quot;LFC.CHECK_MANIFEST.OK&quot;</span><span class="p">,</span>
          <span class="s2">&quot;outMessg&quot;</span><span class="p">:</span> <span class="s2">&quot;Succès de la vérification de la cohérence du bordereau&quot;</span><span class="p">,</span>
          <span class="s2">&quot;agId&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">Name</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">vitam-iaas-app-02</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">Role</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">worker</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">ServerId</span><span class="se">\&quot;</span><span class="s2">:1041627981,</span><span class="se">\&quot;</span><span class="s2">SiteId</span><span class="se">\&quot;</span><span class="s2">:1,</span><span class="se">\&quot;</span><span class="s2">GlobalPlatformId</span><span class="se">\&quot;</span><span class="s2">:236321613}&quot;</span><span class="p">,</span>
          <span class="s2">&quot;obId&quot;</span><span class="p">:</span> <span class="s2">&quot;aeaqaaaaaehbl62nabqkwak3k7qg5tiaaaaq&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evDetData&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="p">{</span>
          <span class="s2">&quot;evId&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaaghbl62n5g8ftak3k7qg5tiaaabq&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evParentId&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaaghbl62nabqkwak3k7qg5tiaaabq&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evType&quot;</span><span class="p">:</span> <span class="s2">&quot;LFC.CHECK_MANIFEST.LFC_CREATION&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evDateTime&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-04-10T12:39:37.953&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evIdProc&quot;</span><span class="p">:</span> <span class="s2">&quot;aedqaaaaaghe45hwabliwak3k7qg7kaaaaaq&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evTypeProc&quot;</span><span class="p">:</span> <span class="s2">&quot;INGEST&quot;</span><span class="p">,</span>
          <span class="s2">&quot;outcome&quot;</span><span class="p">:</span> <span class="s2">&quot;OK&quot;</span><span class="p">,</span>
          <span class="s2">&quot;outDetail&quot;</span><span class="p">:</span> <span class="s2">&quot;LFC.CHECK_MANIFEST.LFC_CREATION.OK&quot;</span><span class="p">,</span>
          <span class="s2">&quot;outMessg&quot;</span><span class="p">:</span> <span class="s2">&quot;Succès de la création du journal du cycle de vie&quot;</span><span class="p">,</span>
          <span class="s2">&quot;agId&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">Name</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">vitam-iaas-app-02</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">Role</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">worker</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">ServerId</span><span class="se">\&quot;</span><span class="s2">:1041627981,</span><span class="se">\&quot;</span><span class="s2">SiteId</span><span class="se">\&quot;</span><span class="s2">:1,</span><span class="se">\&quot;</span><span class="s2">GlobalPlatformId</span><span class="se">\&quot;</span><span class="s2">:236321613}&quot;</span><span class="p">,</span>
          <span class="s2">&quot;obId&quot;</span><span class="p">:</span> <span class="s2">&quot;aeaqaaaaaehbl62nabqkwak3k7qg5tiaaaaq&quot;</span><span class="p">,</span>
          <span class="s2">&quot;evDetData&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
      <span class="p">},{</span>

      <span class="p">[</span><span class="o">...</span><span class="p">]</span>

      <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&quot;_tenant&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s2">&quot;_v&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s2">&quot;_lastPersistedDate&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-04-10T12:39:37.953&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="detail-des-champs-du-json-stocke-en-base">
<h2>3.3.3. Détail des champs du JSON stocké en base<a class="headerlink" href="#detail-des-champs-du-json-stocke-en-base" title="Lien permanent vers ce titre">¶</a></h2>
<p><strong>&#8220;_id&#8221;:</strong> Identifiant donné par le système lors de l&#8217;initialisation du journal du cycle de vie.</p>
<blockquote>
<div><ul class="simple">
<li>Il est constitué d&#8217;une chaîne de 36 caractères correspondant à un GUID.</li>
<li>Cet identifiant constitue la clé primaire du journal du cycle de vie de l&#8217;unité archivistique. Il reprend la valeur du champ _id d&#8217;une unité archivistique enregistré dans la collection Unit.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe uniquement pour la structure incluante.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evId&#8221; (event Identifier):</strong> identifiant de l&#8217;événement.</p>
<blockquote>
<div><ul class="simple">
<li>Il est constitué d&#8217;une chaîne de 36 caractères correspondant à un GUID.</li>
<li>Il identifie l&#8217;événement de manière unique dans la base.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evParentId&#8221; (event Parent Identifier):</strong> identifiant de l&#8217;événement parent.</p>
<blockquote>
<div><ul class="simple">
<li>Il est constitué d&#8217;une chaîne de 36 caractères correspondant à un GUID.</li>
<li>Il identifie l&#8217;événement parent. Par exemple pour LFC.CHECK_MANIFEST.LFC_CREATION, ce champs fera référence au GUID de l&#8217;évènement LFC.CHECK_MANIFEST.</li>
<li>La valeur est toujours null pour la structure incluante et les tâches principales</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evType&#8221; (event Type):</strong> code du type d&#8217;événement.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>La liste des valeurs possibles pour ce champ se trouve en annexe. Seul le code est stocké dans ce champ, la traduction se fait via un fichier properties (vitam-logbook-message-fr.properties)</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evDateTime&#8221; (event DateTime):</strong> date de l&#8217;événement.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une date au format ISO8601 AAAA-MM-JJ+&#8221;T&#8221;+hh:mm:ss:[3digits de millisecondes]</li>
</ul>
<p><code class="docutils literal"><span class="pre">Exemple</span> <span class="pre">:</span> <span class="pre">&quot;2016-08-17T08:26:04.227&quot;</span></code></p>
<ul class="simple">
<li>Ce champ est positionné par le client LogBook.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evIdProc&#8221; (event Identifier Process):</strong> identifiant du processus.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de 36 caractères.</li>
<li>Toutes les mêmes entrées du journal du cycle de vie partagent la même valeur, qui est celle du champ &#8220;_id&#8221; d&#8217;une opération enregistrée dans la collection LogbookOperation</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evTypeProc&#8221; (event Type Process):</strong> type de processus.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>Nom du processus qui effectue l&#8217;action, parmi une liste de processus possibles fixée. Cette liste est disponible en annexe.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;outcome&#8221;:</strong> statut de l&#8217;événement.</p>
<blockquote>
<div><ul>
<li><p class="first">Il s&#8217;agit d&#8217;une chaîne de caractères devant correspondre à une valeur de la liste suivante :</p>
<blockquote>
<div><ul class="simple">
<li>STARTED (Début de l&#8217;événement)</li>
<li>OK (Succès de l&#8217;événement)</li>
<li>KO (Echec de l&#8217;événement)</li>
<li>WARNING (Succès de l&#8217;événement comportant des alertes)</li>
<li>FATAL (Erreur technique)</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Cardinalité : 1-1</p>
</li>
<li><p class="first">Ce champ existe pour les structures incluantes et incluses.</p>
</li>
</ul>
</div></blockquote>
<p><strong>&#8220;outDetail&#8221; (outcome Detail):</strong> code correspondant à l&#8217;erreur.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>Il contient le code fin de l&#8217;événement, incluant le statut. La liste des valeurs possibles pour ce champ se trouve en annexe. Seul le code est stocké dans ce champ, la traduction se fait via le fichier properties (vitam-logbook-message-fr.properties)</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;outMessg&#8221; (outcome Detail Message):</strong> détail du résultat de l&#8217;événement.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de caractères.</li>
<li>C&#8217;est un message intelligible destiné à être lu par un être humain en tant que détail de l&#8217;événement.</li>
<li>Traduction du code présent dans outDetail issue du fichier vitam-logbook-message-fr.properties.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;agId&#8221; (agent Identifier):</strong> identifiant de l&#8217;agent réalisant l&#8217;évènement.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit de plusieurs chaînes de caractères indiquant le nom, le rôle et le PID de l&#8217;agent. Ce champ est calculé par le journal à partir de ServerIdentifier.</li>
</ul>
<p><code class="docutils literal"><span class="pre">Exemple</span> <span class="pre">:</span> <span class="pre">{\&quot;name\&quot;:\&quot;ingest-internal_1\&quot;,\&quot;role\&quot;:\&quot;ingest-internal\&quot;,\&quot;pid\&quot;:425367}</span></code></p>
<ul class="simple">
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;obId&#8221; (object Identifier):</strong> identifiant de la solution logicielle Vitam correspondant au GUID de l&#8217;unité archivistique sur laquelle s&#8217;applique l&#8217;opération.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une chaîne de 36 caractères correspondant à un GUID.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe pour les structures incluantes et incluses</li>
</ul>
</div></blockquote>
<p><strong>&#8220;evDetData&#8221; (event Detail Data):</strong> détails des données de l&#8217;événement.</p>
<blockquote>
<div><ul>
<li><p class="first">Donne plus de détails sur l&#8217;événement.</p>
</li>
<li><p class="first">Par exemple, l&#8217;historisation de métadonnées lors d&#8217;une modification se fait dans ce champ. Dans la structure incluse correspondant à cet événement, il contient, par exemple, composé du champ suivant :</p>
<blockquote>
<div><ul class="simple">
<li>diff: contient la différence entre les métadonnées d&#8217;origine et les métadonnées modifiées. Chaîne de caractères.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">En outre, lors de l&#8217;historisation de la sauvegarde de l&#8217;unité archivistique sur les offres de stockage, on utilise ce champ pour tracer les informations sur le fichier sauvegardé. Il contient, ainsi, un JSON composé comme suit :</p>
<blockquote>
<div><ul class="simple">
<li>FileName : Identifiant du fichier. Il s&#8217;agit du nom du fichier sauvegardé sur les offres de stockage.</li>
<li>Algorithm : Algorithme de hachage. Il s&#8217;agit du nom de l&#8217;algorithme de hachage.</li>
<li>MessageDigest : Empreinte du fichier. Il s&#8217;agit d&#8217;une chaîne de caractères contenant l&#8217;empreinte du fichier.</li>
<li>Offers : Offres de stockage. Il s&#8217;agit des offres de stockage utilisées pour la sauvegarde du fichier.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Cardinalité : 1-1</p>
</li>
<li><p class="first">Ce champ existe pour les structures incluantes et incluses.</p>
</li>
</ul>
</div></blockquote>
<p><strong>&#8220;events&#8221;:</strong> tableau de structure.</p>
<blockquote>
<div><ul class="simple">
<li>Pour la structure incluante, le tableau contient n structures incluses dans l&#8217;ordre des événements (date)</li>
<li>Cardinalité : 1-1</li>
<li>S&#8217;agissant d&#8217;un tableau, les structures incluses ont pour cardinalité 1-n.</li>
<li>Ce champ existe uniquement pour la structure incluante.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;_tenant&#8221;:</strong> identifiant du tenant</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;un entier.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe uniquement pour la structure incluante.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;_v&#8221;:</strong> version de l&#8217;enregistrement décrit</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;un entier.</li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe uniquement pour la structure incluante.</li>
<li>0 correspond à l&#8217;enregistrement d&#8217;origine. Si le numéro est supérieur à 0, alors il s&#8217;agit du numéro de version de l&#8217;enregistrement.</li>
</ul>
</div></blockquote>
<p><strong>&#8220;_lastPersistedDate&#8221;:</strong> date technique de sauvegarde en base.</p>
<blockquote>
<div><ul class="simple">
<li>Il s&#8217;agit d&#8217;une date au format ISO8601 AAAA-MM-JJ+&#8221;T&#8221;+hh:mm:ss:[3digits de millisecondes]</li>
<li>Elle est renseignée par le serveur Logbook.
<code class="docutils literal"><span class="pre">Exemple</span> <span class="pre">:</span> <span class="pre">&quot;2016-08-17T08:26:04.227&quot;</span></code></li>
<li>Cardinalité : 1-1</li>
<li>Ce champ existe uniquement pour la structure incluante.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="champs-presents-dans-les-events">
<h2>3.3.4. Champs présents dans les events<a class="headerlink" href="#champs-presents-dans-les-events" title="Lien permanent vers ce titre">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>evId</li>
<li>evParentId</li>
<li>evType</li>
<li>evDateTime</li>
<li>evIdProc</li>
<li>evTypeProc</li>
<li>outcome</li>
<li>outDetail</li>
<li>outMessg</li>
<li>agId</li>
<li>obId</li>
<li>evDetData</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="detail-des-champs-du-json-stocke-en-base-specifiques-a-une-mise-a-jour">
<h2>3.3.5. Détail des champs du JSON stocké en base spécifiques à une mise à jour<a class="headerlink" href="#detail-des-champs-du-json-stocke-en-base-specifiques-a-une-mise-a-jour" title="Lien permanent vers ce titre">¶</a></h2>
<p>Exemple de données stockées :</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="s2">&quot;evDetData&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">diff</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">-  Title : Recommandation de 2012 du CCSDS for Space Data System Practices - Reference Model for an Open Archival Information System (OAIS)</span><span class="se">\\</span><span class="s2">n+  Title : Recommandation de 2012 du CCSDS for Space Data System Practices - Reference Model for an Open Archival Information System (OAIS) 222</span><span class="se">\\</span><span class="s2">n-  #operations : [ aedqaaaaacaam7mxabxecakz3jbfwpaaaaaq </span><span class="se">\\</span><span class="s2">n+  #operations : [ aedqaaaaacaam7mxabxecakz3jbfwpaaaaaq, aecaaaaaacaam7mxabjssak2dzsjniyaaaaq </span><span class="se">\&quot;</span><span class="s2">}&quot;</span>
</pre></div>
</div>
<p>Dans le cas d&#8217;une mise à jour de métadonnées d&#8217;une unité archivistique (ArchiveUnit), le champ <strong>&#8220;evDetData&#8221;</strong> de l&#8217;événement final est composé du champ suivant :</p>
<p><strong>&#8220;diff&#8221;:</strong> historisation des modifications de métadonnées.</p>
<blockquote>
<div><ul class="simple">
<li>Son contenu doit respecter la forme suivante : les anciennes valeurs sont précédées d&#8217;un &#8220;-&#8221; (<code class="docutils literal"><span class="pre">-champ1:</span> <span class="pre">valeur1</span></code>) et les nouvelles valeurs sont précédées d&#8217;un &#8220;+&#8221; (<code class="docutils literal"><span class="pre">+champ1:</span> <span class="pre">valeur2</span></code>)</li>
</ul>
<p><code class="docutils literal"><span class="pre">Exemple</span> <span class="pre">:</span>
<span class="pre">-Titre:</span> <span class="pre">Discours</span> <span class="pre">du</span> <span class="pre">Roi</span> <span class="pre">\n+Titre:</span> <span class="pre">Discours</span> <span class="pre">du</span> <span class="pre">Roi</span> <span class="pre">Louis</span> <span class="pre">XVI</span> <span class="pre">\n-Description:</span> <span class="pre">Etat</span> <span class="pre">Généraux</span> <span class="pre">du</span> <span class="pre">5</span> <span class="pre">mai</span> <span class="pre">1789</span> <span class="pre">\n+Description:</span> <span class="pre">Etat</span> <span class="pre">Généraux</span> <span class="pre">du</span> <span class="pre">5</span> <span class="pre">mai</span> <span class="pre">1789</span> <span class="pre">au</span> <span class="pre">Château</span> <span class="pre">de</span> <span class="pre">Versailles</span></code></p>
</div></blockquote>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="lfcgot.html" class="btn btn-neutral float-right" title="3.4. Collection LogbookLifeCycleObjectGroup" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="operation.html" class="btn btn-neutral" title="3.2. Collection LogbookOperation" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>