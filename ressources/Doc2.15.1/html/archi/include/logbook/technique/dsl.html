

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="fr" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="fr" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>7.9.2.2. DSL &mdash; Documentation VITAM - Architecture 2.15.1-1</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../../',
              VERSION:'2.15.1-1',
              LANGUAGE:'fr',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/translations.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Recherche" href="../../../search.html" />
    <link rel="next" title="7.9.2.3. Rest" href="rest.html" />
    <link rel="prev" title="7.9.2.1. Introduction" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> VITAM - Architecture
          

          
            
            <img src="../../../_static/logo_vitam.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.15.1-1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html#rappels">2. Rappels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/_toc.html">3. Vue d’ensemble</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../archi-applicative/_toc.html">4. Architecture applicative</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../archi-exploit-infra/_toc.html">5. Architecture technique / exploitation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../securite/_toc.html">6. Sécurité</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../_toc.html">7. Architecture détaillée</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../access/_toc.html">7.1. Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../batch-report/_toc.html">7.2. Batch-report</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../common/_toc.html">7.3. Common</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../functional-administration/_toc.html">7.4. Functional administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ihm-demo/_toc.html">7.5. IHM demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ihm-recette/_toc.html">7.6. IHM recette</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ingest/_toc.html">7.7. Ingest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../internal-security/_toc.html">7.8. Security-Internal</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../_toc.html">7.9. Logbook</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../fonctionnelle/index.html">7.9.1. Architecture Fonctionnelle</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">7.9.2. Architecture technique</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="introduction.html">7.9.2.1. Introduction</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">7.9.2.2. DSL</a></li>
<li class="toctree-l4"><a class="reference internal" href="rest.html">7.9.2.3. Rest</a></li>
<li class="toctree-l4"><a class="reference internal" href="common-client.html">7.9.2.4. Common-client</a></li>
<li class="toctree-l4"><a class="reference internal" href="common-server.html">7.9.2.5. Common-client</a></li>
<li class="toctree-l4"><a class="reference internal" href="common.html">7.9.2.6. Commons</a></li>
<li class="toctree-l4"><a class="reference internal" href="operation-client.html">7.9.2.7. Operation Client</a></li>
<li class="toctree-l4"><a class="reference internal" href="operation.html">7.9.2.8. Opération</a></li>
<li class="toctree-l4"><a class="reference internal" href="lifecycle-client.html">7.9.2.9. Lifecycle Client</a></li>
<li class="toctree-l4"><a class="reference internal" href="lifecycle.html">7.9.2.10. Lifecycle</a></li>
<li class="toctree-l4"><a class="reference internal" href="administration-client.html">7.9.2.11. Administration-client</a></li>
<li class="toctree-l4"><a class="reference internal" href="administration.html">7.9.2.12. Administration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../securite/index.html">7.9.3. Securite</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../metadata/_toc.html">7.10. Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../processing/_toc.html">7.11. Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../storage/_toc.html">7.12. Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../technical-administration/_toc.html">7.13. Technical administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../worker/_toc.html">7.14. Worker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../workspace/_toc.html">7.15. Workspace</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">VITAM - Architecture</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../_toc.html">7. Architecture détaillée</a> &raquo;</li>
        
          <li><a href="../_toc.html">7.9. Logbook</a> &raquo;</li>
        
          <li><a href="index.html">7.9.2. Architecture technique</a> &raquo;</li>
        
      <li>7.9.2.2. DSL</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/include/logbook/technique/dsl.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dsl">
<h1>7.9.2.2. DSL<a class="headerlink" href="#dsl" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="analyse">
<h2>7.9.2.2.1. Analyse<a class="headerlink" href="#analyse" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="presentation">
<h3>7.9.2.2.1.1. Présentation<a class="headerlink" href="#presentation" title="Lien permanent vers ce titre">¶</a></h3>
<div class="line-block">
<div class="line">L’objet de cette analyse est de chercher quel pourrait être le langage de requête pour le journal.</div>
<div class="line">A noter : les requêtes doivent disposer de quelques critères libres.</div>
<div class="line"><br /></div>
<div class="line">Plusieurs implémentations en ligne de mire possibles :</div>
</div>
<ul class="simple">
<li><dl class="first docutils">
<dt>Requêtes équivalentes à l’usage dans des collections REST classiques en URL, avec la contrainte VITAM (cela doit être dans le Body)</dt>
<dd><ul class="first last">
<li>Exemple Projection Google : ?fields=url,object(content, attachments/url)</li>
<li>Exemple de recherche classique : ?name=napoli&amp;type=chinese,japanese&amp;zipcode=75*&amp;sort=rating,name&amp;desc=rating&amp;range=0-9</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Requêtes dans le body permettant d’être un peu plus riche et notamment dans la composition :</dt>
<dd><ul class="first last">
<li>Des classes «&nbsp;Expression&nbsp;» permettent de gérer les différents cas de recherche : AND/OR, Property=value, opérateurs autres (IN, NE, GT, GTE…), NOT…</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Un exemple de classes «&nbsp;Expression&nbsp;» :</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>Interface Expression;</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Interface AExpression;</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Abstract LogicalExpression;</dt>
<dd><ul class="first last">
<li>Class AndExpression;</li>
<li>Class OrExpression;</li>
</ul>
</dd>
</dl>
</li>
<li>Class PropertyExpression;</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Interface BExpression;</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Abstract OperatorExpression;</dt>
<dd><ul class="first last">
<li>Class EqualExpression;</li>
<li>Class GreaterThanExpression;</li>
<li>…</li>
</ul>
</dd>
</dl>
</li>
<li>Class NotExpression;</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="explication">
<h3>7.9.2.2.1.2. Explication<a class="headerlink" href="#explication" title="Lien permanent vers ce titre">¶</a></h3>
<div class="line-block">
<div class="line">Une interface <strong>Expression</strong>.</div>
<div class="line">2 interfaces <strong>AExpression</strong> et <strong>BExpression</strong>.</div>
<div class="line"><br /></div>
<div class="line">Une classe abstract <strong>LogicalExpression</strong> permettant de gérer les expressions logiques AND et OR.</div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">LogicalExpression</span><span class="p">{</span>
  <span class="n">Operator</span> <span class="n">ope</span><span class="p">;</span><span class="c1">//(ENUM)</span>
  <span class="n">AExpression</span> <span class="n">exp</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Les 2 classes implémentées sont <em>AndExpression</em> et <em>OrExpression</em>.
La classe <strong>PropertyExpression</strong> permet de gérer les requetes sur les champs à proprement parler.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">PropertyExpression</span><span class="p">{</span>
  <span class="n">String</span> <span class="n">propertyName</span><span class="p">;</span>
  <span class="n">BExpression</span> <span class="n">exp</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Une classe abstract <strong>OperatorExpression</strong> permettant de gérer les opérateurs IN, NE, GT, GTE…</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">OperatorExpression</span><span class="p">{</span>
  <span class="n">Operator</span> <span class="n">ope</span><span class="p">;</span> <span class="c1">//(ENUM)</span>
  <span class="n">Scalar</span><span class="o">|</span><span class="n">Array</span> <span class="n">value</span><span class="p">;</span> <span class="c1">//(Int, String...)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Les classes implémentées sont entre autres <em>InExpression</em>, <em>GteExpression</em>….
La classe <strong>NotExpression</strong> permet de gérer les expressions NOT.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">NotExpression</span><span class="p">{</span>
  <span class="n">Operator</span> <span class="n">ope</span><span class="p">;</span> <span class="c1">//(ENUM -&gt; NOT)</span>
  <span class="n">BExpression</span> <span class="n">exp</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="utilisation">
<h3>7.9.2.2.1.3. Utilisation<a class="headerlink" href="#utilisation" title="Lien permanent vers ce titre">¶</a></h3>
<div class="line-block">
<div class="line">Classe Query pour y intégrer une expression</div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Query</span><span class="p">{</span>
  <span class="n">Expression</span> <span class="n">exp</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Classe SearchQuery pour y intégrer une liste de Query</div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">SearchQuery</span><span class="p">{</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">Query</span><span class="o">&gt;</span> <span class="n">queries</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="conclusion">
<h2>7.9.2.2.2. Conclusion<a class="headerlink" href="#conclusion" title="Lien permanent vers ce titre">¶</a></h2>
<div class="line-block">
<div class="line">Il apparait clairement que - même s’il est compliqué - le DSL Vitam existant est très proche de l’analyse effectuée. Il pourra donc être utilisé pour la recherche dans le logbook, en adaptant les classes Query et Request (ou en adaptant les Helpers associés).</div>
<div class="line"><br /></div>
<div class="line">La réutilisation du même DSL va aussi dans le sens de la simplification du point de vue de l’utilisateur des API par l’uniformisation des DSL utilisés.</div>
<div class="line"><br /></div>
<div class="line"><strong>La recommandation de l’étude porte donc sur la réutilisation du DSL Vitam destiné aux Units et ObjectGroups pour les Journaux.</strong></div>
<div class="line"><br /></div>
<div class="line">Néanmoins, il y aura quelques différences (pas de <strong>roots</strong>, ni de <strong>depth</strong>).</div>
<div class="line"><br /></div>
<div class="line">Additions IT18 : A ce jour, une implémentation du DSL en mode mono-query a été développée : la classe <strong>DBRequestSingle</strong>. Pour le moment il n’y a pas encore de mutualisation entre le DBRequestSingle et les requêtes Logbook car celles-ci sont encore trop spécifiques.</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="rest.html" class="btn btn-neutral float-right" title="7.9.2.3. Rest" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral float-left" title="7.9.2.1. Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>