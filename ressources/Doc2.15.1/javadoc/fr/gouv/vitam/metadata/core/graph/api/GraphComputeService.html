<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_232) on Wed Dec 11 11:12:54 CET 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>GraphComputeService (Vitam API Reference (2.15.1-1))</title>
<meta name="date" content="2019-12-11">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="GraphComputeService (Vitam API Reference (2.15.1-1))";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":18,"i5":6,"i6":18,"i7":18,"i8":18,"i9":18,"i10":6,"i11":18};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/GraphComputeService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?fr/gouv/vitam/metadata/core/graph/api/GraphComputeService.html" target="_top">Frames</a></li>
<li><a href="GraphComputeService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">fr.gouv.vitam.metadata.core.graph.api</div>
<h2 title="Interface GraphComputeService" class="title">Interface GraphComputeService</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a>, <a href="../../../../../../../fr/gouv/vitam/common/model/VitamAutoCloseable.html" title="interface in fr.gouv.vitam.common.model">VitamAutoCloseable</a>, <a href="../../../../../../../fr/gouv/vitam/common/cache/VitamCache.html" title="interface in fr.gouv.vitam.common.cache">VitamCache</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,org.bson.Document&gt;</dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/GraphComputeServiceImpl.html" title="class in fr.gouv.vitam.metadata.core.graph">GraphComputeServiceImpl</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">GraphComputeService</span>
extends <a href="../../../../../../../fr/gouv/vitam/common/cache/VitamCache.html" title="interface in fr.gouv.vitam.common.cache">VitamCache</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,org.bson.Document&gt;, <a href="../../../../../../../fr/gouv/vitam/common/model/VitamAutoCloseable.html" title="interface in fr.gouv.vitam.common.model">VitamAutoCloseable</a></pre>
<div class="block">This class get units where calculated data are modified
 Zip generated files and store the zipped file in the offer.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/api/GraphComputeService.html#Z:Z:D_INC">$_INC</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/api/GraphComputeService.html#Z:Z:D_SET">$_SET</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/api/GraphComputeService.html#Z:Z:D_UNSET">$_UNSET</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/api/GraphComputeService.html#concurrencyLevel">concurrencyLevel</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ExecutorService</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/api/GraphComputeService.html#executor">executor</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/api/GraphComputeService.html#START_DEPTH">START_DEPTH</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/api/GraphComputeService.html#bulkElasticsearch-fr.gouv.vitam.metadata.core.database.collections.MetadataCollections-java.util.List-">bulkElasticsearch</a></span>(<a href="../../../../../../../fr/gouv/vitam/metadata/core/database/collections/MetadataCollections.html" title="enum in fr.gouv.vitam.metadata.core.database.collections">MetadataCollections</a>&nbsp;metaDaCollection,
                 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.bson.Document&gt;&nbsp;collection)</code>
<div class="block">Bulk save in elasticsearch</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/api/GraphComputeService.html#bulkElasticsearch-fr.gouv.vitam.metadata.core.database.collections.MetadataCollections-java.util.Set-">bulkElasticsearch</a></span>(<a href="../../../../../../../fr/gouv/vitam/metadata/core/database/collections/MetadataCollections.html" title="enum in fr.gouv.vitam.metadata.core.database.collections">MetadataCollections</a>&nbsp;metaDaCollection,
                 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;collection)</code>
<div class="block">Bulk save in elasticsearch</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/api/GraphComputeService.html#bulkUpdateMongo-fr.gouv.vitam.metadata.core.database.collections.MetadataCollections-java.util.List-">bulkUpdateMongo</a></span>(<a href="../../../../../../../fr/gouv/vitam/metadata/core/database/collections/MetadataCollections.html" title="enum in fr.gouv.vitam.metadata.core.database.collections">MetadataCollections</a>&nbsp;metaDaCollection,
               <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;com.mongodb.client.model.WriteModel&lt;org.bson.Document&gt;&gt;&nbsp;collection)</code>
<div class="block">Bulk write in mongodb</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../fr/gouv/vitam/common/model/GraphComputeResponse.html" title="class in fr.gouv.vitam.common.model">GraphComputeResponse</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/api/GraphComputeService.html#computeGraph-com.fasterxml.jackson.databind.JsonNode-">computeGraph</a></span>(com.fasterxml.jackson.databind.JsonNode&nbsp;queryDSL)</code>
<div class="block">If workflow of compute graph in progress, do not execute this method
 Should be exposed in the API</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>default void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/api/GraphComputeService.html#computeGraph-fr.gouv.vitam.metadata.core.database.collections.MetadataCollections-java.util.List-boolean-">computeGraph</a></span>(<a href="../../../../../../../fr/gouv/vitam/metadata/core/database/collections/MetadataCollections.html" title="enum in fr.gouv.vitam.metadata.core.database.collections">MetadataCollections</a>&nbsp;metadataCollections,
            <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.bson.Document&gt;&nbsp;documents,
            boolean&nbsp;invalidateComputedInheritedRules)</code>
<div class="block">Generic method to calculate graph for unit and object group</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../fr/gouv/vitam/common/model/GraphComputeResponse.html" title="class in fr.gouv.vitam.common.model">GraphComputeResponse</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/api/GraphComputeService.html#computeGraph-fr.gouv.vitam.metadata.core.database.collections.MetadataCollections-java.util.Set-boolean-boolean-">computeGraph</a></span>(<a href="../../../../../../../fr/gouv/vitam/metadata/core/database/collections/MetadataCollections.html" title="enum in fr.gouv.vitam.metadata.core.database.collections">MetadataCollections</a>&nbsp;metadataCollections,
            <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;unitsId,
            boolean&nbsp;computeObjectGroupGraph,
            boolean&nbsp;invalidateComputedInheritedRules)</code>
<div class="block">Compute graph for unit/got from all parents</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>default com.mongodb.client.model.UpdateOneModel&lt;org.bson.Document&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/api/GraphComputeService.html#computeObjectGroupGraph-org.bson.Document-">computeObjectGroupGraph</a></span>(org.bson.Document&nbsp;document)</code>
<div class="block">Create update model for ObjectGroup</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>default void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/api/GraphComputeService.html#computeObjectGroupGraph-java.util.Set-java.util.Set-java.util.List-">computeObjectGroupGraph</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;originatingAgencies,
                       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;unitParents,
                       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;up)</code>
<div class="block">For ObjectGroup, we only get graph data (sps) from only unit represents (up)
 We do not loop over all parent of parent until root units
 As not concurrence expected, no problem of inconsistency,
 Else, if parallel compute is needed, then, we have to loop over all units (until root units) or to implements optimistic lock on _glpd</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>default com.mongodb.client.model.UpdateOneModel&lt;org.bson.Document&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/api/GraphComputeService.html#computeUnitGraph-org.bson.Document-boolean-">computeUnitGraph</a></span>(org.bson.Document&nbsp;document,
                boolean&nbsp;invalidateComputedInheritedRules)</code>
<div class="block">Create update model for Unit</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>default void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/api/GraphComputeService.html#computeUnitGraphUsingDirectParents-java.util.List-java.lang.String-java.util.List-int-">computeUnitGraphUsingDirectParents</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/GraphRelation.html" title="class in fr.gouv.vitam.metadata.core.graph">GraphRelation</a>&gt;&nbsp;graphRels,
                                  <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;unitId,
                                  <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;up,
                                  int&nbsp;currentDepth)</code>
<div class="block">Recursive method that compute graph using only _up
 With global (by reference variable graphRels, we get all needed informations from all parent of the given unit unitId.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/api/GraphComputeService.html#isInProgress--">isInProgress</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>default void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/api/GraphComputeService.html#preLoadCache-java.util.List-">preLoadCache</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.bson.Document&gt;&nbsp;documents)</code>
<div class="block">Get data from database and pre-populate unitCache</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.fr.gouv.vitam.common.cache.VitamCache">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;fr.gouv.vitam.common.cache.<a href="../../../../../../../fr/gouv/vitam/common/cache/VitamCache.html" title="interface in fr.gouv.vitam.common.cache">VitamCache</a></h3>
<code><a href="../../../../../../../fr/gouv/vitam/common/cache/VitamCache.html#getCache--">getCache</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.fr.gouv.vitam.common.model.VitamAutoCloseable">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;fr.gouv.vitam.common.model.<a href="../../../../../../../fr/gouv/vitam/common/model/VitamAutoCloseable.html" title="interface in fr.gouv.vitam.common.model">VitamAutoCloseable</a></h3>
<code><a href="../../../../../../../fr/gouv/vitam/common/model/VitamAutoCloseable.html#close--">close</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="Z:Z:D_SET">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>$_SET</h4>
<pre>static final&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> $_SET</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#fr.gouv.vitam.metadata.core.graph.api.GraphComputeService.$_SET">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="Z:Z:D_INC">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>$_INC</h4>
<pre>static final&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> $_INC</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#fr.gouv.vitam.metadata.core.graph.api.GraphComputeService.$_INC">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="Z:Z:D_UNSET">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>$_UNSET</h4>
<pre>static final&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> $_UNSET</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#fr.gouv.vitam.metadata.core.graph.api.GraphComputeService.$_UNSET">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="START_DEPTH">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>START_DEPTH</h4>
<pre>static final&nbsp;int START_DEPTH</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#fr.gouv.vitam.metadata.core.graph.api.GraphComputeService.START_DEPTH">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="concurrencyLevel">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>concurrencyLevel</h4>
<pre>static final&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a> concurrencyLevel</pre>
</li>
</ul>
<a name="executor">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>executor</h4>
<pre>static final&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ExecutorService</a> executor</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="computeGraph-com.fasterxml.jackson.databind.JsonNode-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeGraph</h4>
<pre><a href="../../../../../../../fr/gouv/vitam/common/model/GraphComputeResponse.html" title="class in fr.gouv.vitam.common.model">GraphComputeResponse</a>&nbsp;computeGraph(com.fasterxml.jackson.databind.JsonNode&nbsp;queryDSL)
                           throws <a href="../../../../../../../fr/gouv/vitam/metadata/api/exception/MetaDataException.html" title="class in fr.gouv.vitam.metadata.api.exception">MetaDataException</a></pre>
<div class="block">If workflow of compute graph in progress, do not execute this method
 Should be exposed in the API</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the map of collection:number of treated documents</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../fr/gouv/vitam/metadata/api/exception/MetaDataException.html" title="class in fr.gouv.vitam.metadata.api.exception">MetaDataException</a></code></dd>
</dl>
</li>
</ul>
<a name="computeGraph-fr.gouv.vitam.metadata.core.database.collections.MetadataCollections-java.util.Set-boolean-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeGraph</h4>
<pre><a href="../../../../../../../fr/gouv/vitam/common/model/GraphComputeResponse.html" title="class in fr.gouv.vitam.common.model">GraphComputeResponse</a>&nbsp;computeGraph(<a href="../../../../../../../fr/gouv/vitam/metadata/core/database/collections/MetadataCollections.html" title="enum in fr.gouv.vitam.metadata.core.database.collections">MetadataCollections</a>&nbsp;metadataCollections,
                                  <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;unitsId,
                                  boolean&nbsp;computeObjectGroupGraph,
                                  boolean&nbsp;invalidateComputedInheritedRules)</pre>
<div class="block">Compute graph for unit/got from all parents</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>metadataCollections</code> - the collection concerned by the build of the graph</dd>
<dd><code>unitsId</code> - the collection of units subject of computing graph</dd>
<dd><code>computeObjectGroupGraph</code> - true mean compute graph</dd>
<dd><code>invalidateComputedInheritedRules</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The collection of object group treated or to be treated bu an other process.
 This collection contains got's id of concerning units.
 Empty collection is returned if computeGraph of object group.</dd>
</dl>
</li>
</ul>
<a name="preLoadCache-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>preLoadCache</h4>
<pre>default&nbsp;void&nbsp;preLoadCache(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.bson.Document&gt;&nbsp;documents)
                   throws <a href="../../../../../../../fr/gouv/vitam/metadata/api/exception/MetaDataException.html" title="class in fr.gouv.vitam.metadata.api.exception">MetaDataException</a></pre>
<div class="block">Get data from database and pre-populate unitCache</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>documents</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../fr/gouv/vitam/metadata/api/exception/MetaDataException.html" title="class in fr.gouv.vitam.metadata.api.exception">MetaDataException</a></code></dd>
</dl>
</li>
</ul>
<a name="computeGraph-fr.gouv.vitam.metadata.core.database.collections.MetadataCollections-java.util.List-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeGraph</h4>
<pre>default&nbsp;void&nbsp;computeGraph(<a href="../../../../../../../fr/gouv/vitam/metadata/core/database/collections/MetadataCollections.html" title="enum in fr.gouv.vitam.metadata.core.database.collections">MetadataCollections</a>&nbsp;metadataCollections,
                          <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.bson.Document&gt;&nbsp;documents,
                          boolean&nbsp;invalidateComputedInheritedRules)
                   throws <a href="../../../../../../../fr/gouv/vitam/metadata/api/exception/MetaDataException.html" title="class in fr.gouv.vitam.metadata.api.exception">MetaDataException</a></pre>
<div class="block">Generic method to calculate graph for unit and object group</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>metadataCollections</code> - the type the collection (Unit or ObjectGroup)</dd>
<dd><code>documents</code> - the concerning collection of documents</dd>
<dd><code>invalidateComputedInheritedRules</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../fr/gouv/vitam/metadata/api/exception/MetaDataException.html" title="class in fr.gouv.vitam.metadata.api.exception">MetaDataException</a></code></dd>
</dl>
</li>
</ul>
<a name="computeUnitGraph-org.bson.Document-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeUnitGraph</h4>
<pre>default&nbsp;com.mongodb.client.model.UpdateOneModel&lt;org.bson.Document&gt;&nbsp;computeUnitGraph(org.bson.Document&nbsp;document,
                                                                                    boolean&nbsp;invalidateComputedInheritedRules)
                                                                             throws <a href="../../../../../../../fr/gouv/vitam/common/exception/VitamRuntimeException.html" title="class in fr.gouv.vitam.common.exception">VitamRuntimeException</a></pre>
<div class="block">Create update model for Unit</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>document</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>UpdateOneModel for Unit</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../fr/gouv/vitam/metadata/api/exception/MetaDataException.html" title="class in fr.gouv.vitam.metadata.api.exception">MetaDataException</a></code></dd>
<dd><code><a href="../../../../../../../fr/gouv/vitam/common/exception/VitamRuntimeException.html" title="class in fr.gouv.vitam.common.exception">VitamRuntimeException</a></code></dd>
</dl>
</li>
</ul>
<a name="computeObjectGroupGraph-org.bson.Document-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeObjectGroupGraph</h4>
<pre>default&nbsp;com.mongodb.client.model.UpdateOneModel&lt;org.bson.Document&gt;&nbsp;computeObjectGroupGraph(org.bson.Document&nbsp;document)
                                                                                    throws <a href="../../../../../../../fr/gouv/vitam/common/exception/VitamRuntimeException.html" title="class in fr.gouv.vitam.common.exception">VitamRuntimeException</a></pre>
<div class="block">Create update model for ObjectGroup</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>document</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>UpdateOneModel for ObjectGroup</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../fr/gouv/vitam/metadata/api/exception/MetaDataException.html" title="class in fr.gouv.vitam.metadata.api.exception">MetaDataException</a></code></dd>
<dd><code><a href="../../../../../../../fr/gouv/vitam/common/exception/VitamRuntimeException.html" title="class in fr.gouv.vitam.common.exception">VitamRuntimeException</a></code></dd>
</dl>
</li>
</ul>
<a name="computeUnitGraphUsingDirectParents-java.util.List-java.lang.String-java.util.List-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeUnitGraphUsingDirectParents</h4>
<pre>default&nbsp;void&nbsp;computeUnitGraphUsingDirectParents(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../fr/gouv/vitam/metadata/core/graph/GraphRelation.html" title="class in fr.gouv.vitam.metadata.core.graph">GraphRelation</a>&gt;&nbsp;graphRels,
                                                <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;unitId,
                                                <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;up,
                                                int&nbsp;currentDepth)
                                         throws <a href="../../../../../../../fr/gouv/vitam/common/exception/VitamRuntimeException.html" title="class in fr.gouv.vitam.common.exception">VitamRuntimeException</a></pre>
<div class="block">Recursive method that compute graph using only _up
 With global (by reference variable graphRels, we get all needed informations from all parent of the given unit unitId.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>graphRels</code> - </dd>
<dd><code>unitId</code> - </dd>
<dd><code>up</code> - </dd>
<dd><code>currentDepth</code> - the current depth, initially equals to 1</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutionException.html?is-external=true" title="class or interface in java.util.concurrent">ExecutionException</a></code></dd>
<dd><code><a href="../../../../../../../fr/gouv/vitam/common/exception/VitamRuntimeException.html" title="class in fr.gouv.vitam.common.exception">VitamRuntimeException</a></code></dd>
</dl>
</li>
</ul>
<a name="computeObjectGroupGraph-java.util.Set-java.util.Set-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeObjectGroupGraph</h4>
<pre>default&nbsp;void&nbsp;computeObjectGroupGraph(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;originatingAgencies,
                                     <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;unitParents,
                                     <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;up)
                              throws <a href="../../../../../../../fr/gouv/vitam/common/exception/VitamRuntimeException.html" title="class in fr.gouv.vitam.common.exception">VitamRuntimeException</a></pre>
<div class="block">For ObjectGroup, we only get graph data (sps) from only unit represents (up)
 We do not loop over all parent of parent until root units
 As not concurrence expected, no problem of inconsistency,
 Else, if parallel compute is needed, then, we have to loop over all units (until root units) or to implements optimistic lock on _glpd</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>originatingAgencies</code> - </dd>
<dd><code>unitParents</code> - </dd>
<dd><code>up</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../fr/gouv/vitam/common/exception/VitamRuntimeException.html" title="class in fr.gouv.vitam.common.exception">VitamRuntimeException</a></code></dd>
</dl>
</li>
</ul>
<a name="bulkUpdateMongo-fr.gouv.vitam.metadata.core.database.collections.MetadataCollections-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bulkUpdateMongo</h4>
<pre>void&nbsp;bulkUpdateMongo(<a href="../../../../../../../fr/gouv/vitam/metadata/core/database/collections/MetadataCollections.html" title="enum in fr.gouv.vitam.metadata.core.database.collections">MetadataCollections</a>&nbsp;metaDaCollection,
                     <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;com.mongodb.client.model.WriteModel&lt;org.bson.Document&gt;&gt;&nbsp;collection)
              throws <a href="../../../../../../../fr/gouv/vitam/common/exception/DatabaseException.html" title="class in fr.gouv.vitam.common.exception">DatabaseException</a></pre>
<div class="block">Bulk write in mongodb</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>metaDaCollection</code> - </dd>
<dd><code>collection</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../fr/gouv/vitam/common/exception/DatabaseException.html" title="class in fr.gouv.vitam.common.exception">DatabaseException</a></code></dd>
</dl>
</li>
</ul>
<a name="bulkElasticsearch-fr.gouv.vitam.metadata.core.database.collections.MetadataCollections-java.util.Set-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bulkElasticsearch</h4>
<pre>void&nbsp;bulkElasticsearch(<a href="../../../../../../../fr/gouv/vitam/metadata/core/database/collections/MetadataCollections.html" title="enum in fr.gouv.vitam.metadata.core.database.collections">MetadataCollections</a>&nbsp;metaDaCollection,
                       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;collection)
                throws <a href="../../../../../../../fr/gouv/vitam/common/exception/DatabaseException.html" title="class in fr.gouv.vitam.common.exception">DatabaseException</a></pre>
<div class="block">Bulk save in elasticsearch</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>metaDaCollection</code> - </dd>
<dd><code>collection</code> - of id of documents</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../fr/gouv/vitam/common/exception/DatabaseException.html" title="class in fr.gouv.vitam.common.exception">DatabaseException</a></code></dd>
</dl>
</li>
</ul>
<a name="bulkElasticsearch-fr.gouv.vitam.metadata.core.database.collections.MetadataCollections-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bulkElasticsearch</h4>
<pre>void&nbsp;bulkElasticsearch(<a href="../../../../../../../fr/gouv/vitam/metadata/core/database/collections/MetadataCollections.html" title="enum in fr.gouv.vitam.metadata.core.database.collections">MetadataCollections</a>&nbsp;metaDaCollection,
                       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.bson.Document&gt;&nbsp;collection)
                throws <a href="../../../../../../../fr/gouv/vitam/common/exception/DatabaseException.html" title="class in fr.gouv.vitam.common.exception">DatabaseException</a></pre>
<div class="block">Bulk save in elasticsearch</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>metaDaCollection</code> - </dd>
<dd><code>collection</code> - of documents</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../fr/gouv/vitam/common/exception/DatabaseException.html" title="class in fr.gouv.vitam.common.exception">DatabaseException</a></code></dd>
</dl>
</li>
</ul>
<a name="isInProgress--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isInProgress</h4>
<pre>boolean&nbsp;isInProgress()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/GraphComputeService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?fr/gouv/vitam/metadata/core/graph/api/GraphComputeService.html" target="_top">Frames</a></li>
<li><a href="GraphComputeService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2019 Vitam. All rights reserved.</small></p>
</body>
</html>
