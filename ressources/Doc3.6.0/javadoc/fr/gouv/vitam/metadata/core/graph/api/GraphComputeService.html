<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.6) on Fri Mar 20 18:51:03 CET 2020 -->
<title>GraphComputeService (Vitam API Reference (3.0.1))</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2020-03-20">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="GraphComputeService (Vitam API Reference (3.0.1))";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":18,"i5":6,"i6":18,"i7":18,"i8":18,"i9":18,"i10":6,"i11":18};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/GraphComputeService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">fr.gouv.vitam.metadata.core.graph.api</a></div>
<h2 title="Interface GraphComputeService" class="title">Interface GraphComputeService</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><code>java.lang.AutoCloseable</code>, <code><a href="../../../../common/model/VitamAutoCloseable.html" title="interface in fr.gouv.vitam.common.model">VitamAutoCloseable</a></code>, <code><a href="../../../../common/cache/VitamCache.html" title="interface in fr.gouv.vitam.common.cache">VitamCache</a>&lt;java.lang.String,&#8203;org.bson.Document&gt;</code></dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="../GraphComputeServiceImpl.html" title="class in fr.gouv.vitam.metadata.core.graph">GraphComputeServiceImpl</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">GraphComputeService</span>
extends <a href="../../../../common/cache/VitamCache.html" title="interface in fr.gouv.vitam.common.cache">VitamCache</a>&lt;java.lang.String,&#8203;org.bson.Document&gt;, <a href="../../../../common/model/VitamAutoCloseable.html" title="interface in fr.gouv.vitam.common.model">VitamAutoCloseable</a></pre>
<div class="block">This class get units where calculated data are modified
 Zip generated files and store the zipped file in the offer.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#$_INC">$_INC</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#$_SET">$_SET</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#$_UNSET">$_UNSET</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.Integer</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#concurrencyLevel">concurrencyLevel</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.util.concurrent.ExecutorService</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#executor">executor</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#START_DEPTH">START_DEPTH</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#bulkElasticsearch(fr.gouv.vitam.metadata.core.database.collections.MetadataCollections,java.util.List)">bulkElasticsearch</a></span>&#8203;(<a href="../../database/collections/MetadataCollections.html" title="enum in fr.gouv.vitam.metadata.core.database.collections">MetadataCollections</a>&nbsp;metaDaCollection,
                 java.util.List&lt;org.bson.Document&gt;&nbsp;collection)</code></th>
<td class="colLast">
<div class="block">Bulk save in elasticsearch</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#bulkElasticsearch(fr.gouv.vitam.metadata.core.database.collections.MetadataCollections,java.util.Set)">bulkElasticsearch</a></span>&#8203;(<a href="../../database/collections/MetadataCollections.html" title="enum in fr.gouv.vitam.metadata.core.database.collections">MetadataCollections</a>&nbsp;metaDaCollection,
                 java.util.Set&lt;java.lang.String&gt;&nbsp;collection)</code></th>
<td class="colLast">
<div class="block">Bulk save in elasticsearch</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#bulkUpdateMongo(fr.gouv.vitam.metadata.core.database.collections.MetadataCollections,java.util.List)">bulkUpdateMongo</a></span>&#8203;(<a href="../../database/collections/MetadataCollections.html" title="enum in fr.gouv.vitam.metadata.core.database.collections">MetadataCollections</a>&nbsp;metaDaCollection,
               java.util.List&lt;com.mongodb.client.model.WriteModel&lt;org.bson.Document&gt;&gt;&nbsp;collection)</code></th>
<td class="colLast">
<div class="block">Bulk write in mongodb</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../../common/model/GraphComputeResponse.html" title="class in fr.gouv.vitam.common.model">GraphComputeResponse</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#computeGraph(com.fasterxml.jackson.databind.JsonNode)">computeGraph</a></span>&#8203;(com.fasterxml.jackson.databind.JsonNode&nbsp;queryDSL)</code></th>
<td class="colLast">
<div class="block">If workflow of compute graph in progress, do not execute this method
 Should be exposed in the API</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#computeGraph(fr.gouv.vitam.metadata.core.database.collections.MetadataCollections,java.util.List,boolean)">computeGraph</a></span>&#8203;(<a href="../../database/collections/MetadataCollections.html" title="enum in fr.gouv.vitam.metadata.core.database.collections">MetadataCollections</a>&nbsp;metadataCollections,
            java.util.List&lt;org.bson.Document&gt;&nbsp;documents,
            boolean&nbsp;invalidateComputedInheritedRules)</code></th>
<td class="colLast">
<div class="block">Generic method to calculate graph for unit and object group</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../common/model/GraphComputeResponse.html" title="class in fr.gouv.vitam.common.model">GraphComputeResponse</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#computeGraph(fr.gouv.vitam.metadata.core.database.collections.MetadataCollections,java.util.Set,boolean,boolean)">computeGraph</a></span>&#8203;(<a href="../../database/collections/MetadataCollections.html" title="enum in fr.gouv.vitam.metadata.core.database.collections">MetadataCollections</a>&nbsp;metadataCollections,
            java.util.Set&lt;java.lang.String&gt;&nbsp;unitsId,
            boolean&nbsp;computeObjectGroupGraph,
            boolean&nbsp;invalidateComputedInheritedRules)</code></th>
<td class="colLast">
<div class="block">Compute graph for unit/got from all parents</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#computeObjectGroupGraph(java.util.Set,java.util.Set,java.util.List)">computeObjectGroupGraph</a></span>&#8203;(java.util.Set&lt;java.lang.String&gt;&nbsp;originatingAgencies,
                       java.util.Set&lt;java.lang.String&gt;&nbsp;unitParents,
                       java.util.List&lt;java.lang.String&gt;&nbsp;up)</code></th>
<td class="colLast">
<div class="block">For ObjectGroup, we only get graph data (sps) from only unit represents (up)
 We do not loop over all parent of parent until root units
 As not concurrence expected, no problem of inconsistency,
 Else, if parallel compute is needed, then, we have to loop over all units (until root units) or to implements optimistic lock on _glpd</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>default com.mongodb.client.model.UpdateOneModel&lt;org.bson.Document&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#computeObjectGroupGraph(org.bson.Document)">computeObjectGroupGraph</a></span>&#8203;(org.bson.Document&nbsp;document)</code></th>
<td class="colLast">
<div class="block">Create update model for ObjectGroup</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>default com.mongodb.client.model.UpdateOneModel&lt;org.bson.Document&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#computeUnitGraph(org.bson.Document,boolean)">computeUnitGraph</a></span>&#8203;(org.bson.Document&nbsp;document,
                boolean&nbsp;invalidateComputedInheritedRules)</code></th>
<td class="colLast">
<div class="block">Create update model for Unit</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#computeUnitGraphUsingDirectParents(java.util.List,java.lang.String,java.util.List,int)">computeUnitGraphUsingDirectParents</a></span>&#8203;(java.util.List&lt;<a href="../GraphRelation.html" title="class in fr.gouv.vitam.metadata.core.graph">GraphRelation</a>&gt;&nbsp;graphRels,
                                  java.lang.String&nbsp;unitId,
                                  java.util.List&lt;java.lang.String&gt;&nbsp;up,
                                  int&nbsp;currentDepth)</code></th>
<td class="colLast">
<div class="block">Recursive method that compute graph using only _up
 With global (by reference variable graphRels, we get all needed informations from all parent of the given unit unitId.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isInProgress()">isInProgress</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#preLoadCache(java.util.List)">preLoadCache</a></span>&#8203;(java.util.List&lt;org.bson.Document&gt;&nbsp;documents)</code></th>
<td class="colLast">
<div class="block">Get data from database and pre-populate unitCache</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.fr.gouv.vitam.common.model.VitamAutoCloseable">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;fr.gouv.vitam.common.model.<a href="../../../../common/model/VitamAutoCloseable.html" title="interface in fr.gouv.vitam.common.model">VitamAutoCloseable</a></h3>
<code><a href="../../../../common/model/VitamAutoCloseable.html#close()">close</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.fr.gouv.vitam.common.cache.VitamCache">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;fr.gouv.vitam.common.cache.<a href="../../../../common/cache/VitamCache.html" title="interface in fr.gouv.vitam.common.cache">VitamCache</a></h3>
<code><a href="../../../../common/cache/VitamCache.html#getCache()">getCache</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="$_SET">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>$_SET</h4>
<pre>static final&nbsp;java.lang.String $_SET</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#fr.gouv.vitam.metadata.core.graph.api.GraphComputeService.$_SET">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="$_INC">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>$_INC</h4>
<pre>static final&nbsp;java.lang.String $_INC</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#fr.gouv.vitam.metadata.core.graph.api.GraphComputeService.$_INC">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="$_UNSET">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>$_UNSET</h4>
<pre>static final&nbsp;java.lang.String $_UNSET</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#fr.gouv.vitam.metadata.core.graph.api.GraphComputeService.$_UNSET">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="START_DEPTH">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>START_DEPTH</h4>
<pre>static final&nbsp;int START_DEPTH</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#fr.gouv.vitam.metadata.core.graph.api.GraphComputeService.START_DEPTH">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="concurrencyLevel">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>concurrencyLevel</h4>
<pre>static final&nbsp;java.lang.Integer concurrencyLevel</pre>
</li>
</ul>
<a id="executor">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>executor</h4>
<pre>static final&nbsp;java.util.concurrent.ExecutorService executor</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="computeGraph(com.fasterxml.jackson.databind.JsonNode)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeGraph</h4>
<pre class="methodSignature"><a href="../../../../common/model/GraphComputeResponse.html" title="class in fr.gouv.vitam.common.model">GraphComputeResponse</a>&nbsp;computeGraph&#8203;(com.fasterxml.jackson.databind.JsonNode&nbsp;queryDSL)
                           throws <a href="../../../api/exception/MetaDataException.html" title="class in fr.gouv.vitam.metadata.api.exception">MetaDataException</a></pre>
<div class="block">If workflow of compute graph in progress, do not execute this method
 Should be exposed in the API</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the map of collection:number of treated documents</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../api/exception/MetaDataException.html" title="class in fr.gouv.vitam.metadata.api.exception">MetaDataException</a></code></dd>
</dl>
</li>
</ul>
<a id="computeGraph(fr.gouv.vitam.metadata.core.database.collections.MetadataCollections,java.util.Set,boolean,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeGraph</h4>
<pre class="methodSignature"><a href="../../../../common/model/GraphComputeResponse.html" title="class in fr.gouv.vitam.common.model">GraphComputeResponse</a>&nbsp;computeGraph&#8203;(<a href="../../database/collections/MetadataCollections.html" title="enum in fr.gouv.vitam.metadata.core.database.collections">MetadataCollections</a>&nbsp;metadataCollections,
                                  java.util.Set&lt;java.lang.String&gt;&nbsp;unitsId,
                                  boolean&nbsp;computeObjectGroupGraph,
                                  boolean&nbsp;invalidateComputedInheritedRules)</pre>
<div class="block">Compute graph for unit/got from all parents</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>metadataCollections</code> - the collection concerned by the build of the graph</dd>
<dd><code>unitsId</code> - the collection of units subject of computing graph</dd>
<dd><code>computeObjectGroupGraph</code> - true mean compute graph</dd>
<dd><code>invalidateComputedInheritedRules</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The collection of object group treated or to be treated bu an other process.
 This collection contains got's id of concerning units.
 Empty collection is returned if computeGraph of object group.</dd>
</dl>
</li>
</ul>
<a id="preLoadCache(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>preLoadCache</h4>
<pre class="methodSignature">default&nbsp;void&nbsp;preLoadCache&#8203;(java.util.List&lt;org.bson.Document&gt;&nbsp;documents)
                   throws <a href="../../../api/exception/MetaDataException.html" title="class in fr.gouv.vitam.metadata.api.exception">MetaDataException</a></pre>
<div class="block">Get data from database and pre-populate unitCache</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>documents</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../api/exception/MetaDataException.html" title="class in fr.gouv.vitam.metadata.api.exception">MetaDataException</a></code></dd>
</dl>
</li>
</ul>
<a id="computeGraph(fr.gouv.vitam.metadata.core.database.collections.MetadataCollections,java.util.List,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeGraph</h4>
<pre class="methodSignature">default&nbsp;void&nbsp;computeGraph&#8203;(<a href="../../database/collections/MetadataCollections.html" title="enum in fr.gouv.vitam.metadata.core.database.collections">MetadataCollections</a>&nbsp;metadataCollections,
                          java.util.List&lt;org.bson.Document&gt;&nbsp;documents,
                          boolean&nbsp;invalidateComputedInheritedRules)
                   throws <a href="../../../api/exception/MetaDataException.html" title="class in fr.gouv.vitam.metadata.api.exception">MetaDataException</a></pre>
<div class="block">Generic method to calculate graph for unit and object group</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>metadataCollections</code> - the type the collection (Unit or ObjectGroup)</dd>
<dd><code>documents</code> - the concerning collection of documents</dd>
<dd><code>invalidateComputedInheritedRules</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../api/exception/MetaDataException.html" title="class in fr.gouv.vitam.metadata.api.exception">MetaDataException</a></code></dd>
</dl>
</li>
</ul>
<a id="computeUnitGraph(org.bson.Document,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeUnitGraph</h4>
<pre class="methodSignature">default&nbsp;com.mongodb.client.model.UpdateOneModel&lt;org.bson.Document&gt;&nbsp;computeUnitGraph&#8203;(org.bson.Document&nbsp;document,
                                                                                    boolean&nbsp;invalidateComputedInheritedRules)
                                                                             throws <a href="../../../../common/exception/VitamRuntimeException.html" title="class in fr.gouv.vitam.common.exception">VitamRuntimeException</a></pre>
<div class="block">Create update model for Unit</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>document</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>UpdateOneModel for Unit</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../api/exception/MetaDataException.html" title="class in fr.gouv.vitam.metadata.api.exception">MetaDataException</a></code></dd>
<dd><code><a href="../../../../common/exception/VitamRuntimeException.html" title="class in fr.gouv.vitam.common.exception">VitamRuntimeException</a></code></dd>
</dl>
</li>
</ul>
<a id="computeObjectGroupGraph(org.bson.Document)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeObjectGroupGraph</h4>
<pre class="methodSignature">default&nbsp;com.mongodb.client.model.UpdateOneModel&lt;org.bson.Document&gt;&nbsp;computeObjectGroupGraph&#8203;(org.bson.Document&nbsp;document)
                                                                                    throws <a href="../../../../common/exception/VitamRuntimeException.html" title="class in fr.gouv.vitam.common.exception">VitamRuntimeException</a></pre>
<div class="block">Create update model for ObjectGroup</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>document</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>UpdateOneModel for ObjectGroup</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../api/exception/MetaDataException.html" title="class in fr.gouv.vitam.metadata.api.exception">MetaDataException</a></code></dd>
<dd><code><a href="../../../../common/exception/VitamRuntimeException.html" title="class in fr.gouv.vitam.common.exception">VitamRuntimeException</a></code></dd>
</dl>
</li>
</ul>
<a id="computeUnitGraphUsingDirectParents(java.util.List,java.lang.String,java.util.List,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeUnitGraphUsingDirectParents</h4>
<pre class="methodSignature">default&nbsp;void&nbsp;computeUnitGraphUsingDirectParents&#8203;(java.util.List&lt;<a href="../GraphRelation.html" title="class in fr.gouv.vitam.metadata.core.graph">GraphRelation</a>&gt;&nbsp;graphRels,
                                                java.lang.String&nbsp;unitId,
                                                java.util.List&lt;java.lang.String&gt;&nbsp;up,
                                                int&nbsp;currentDepth)
                                         throws <a href="../../../../common/exception/VitamRuntimeException.html" title="class in fr.gouv.vitam.common.exception">VitamRuntimeException</a></pre>
<div class="block">Recursive method that compute graph using only _up
 With global (by reference variable graphRels, we get all needed informations from all parent of the given unit unitId.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>graphRels</code> - </dd>
<dd><code>unitId</code> - </dd>
<dd><code>up</code> - </dd>
<dd><code>currentDepth</code> - the current depth, initially equals to 1</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.util.concurrent.ExecutionException</code></dd>
<dd><code><a href="../../../../common/exception/VitamRuntimeException.html" title="class in fr.gouv.vitam.common.exception">VitamRuntimeException</a></code></dd>
</dl>
</li>
</ul>
<a id="computeObjectGroupGraph(java.util.Set,java.util.Set,java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeObjectGroupGraph</h4>
<pre class="methodSignature">default&nbsp;void&nbsp;computeObjectGroupGraph&#8203;(java.util.Set&lt;java.lang.String&gt;&nbsp;originatingAgencies,
                                     java.util.Set&lt;java.lang.String&gt;&nbsp;unitParents,
                                     java.util.List&lt;java.lang.String&gt;&nbsp;up)
                              throws <a href="../../../../common/exception/VitamRuntimeException.html" title="class in fr.gouv.vitam.common.exception">VitamRuntimeException</a></pre>
<div class="block">For ObjectGroup, we only get graph data (sps) from only unit represents (up)
 We do not loop over all parent of parent until root units
 As not concurrence expected, no problem of inconsistency,
 Else, if parallel compute is needed, then, we have to loop over all units (until root units) or to implements optimistic lock on _glpd</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>originatingAgencies</code> - </dd>
<dd><code>unitParents</code> - </dd>
<dd><code>up</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../common/exception/VitamRuntimeException.html" title="class in fr.gouv.vitam.common.exception">VitamRuntimeException</a></code></dd>
</dl>
</li>
</ul>
<a id="bulkUpdateMongo(fr.gouv.vitam.metadata.core.database.collections.MetadataCollections,java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bulkUpdateMongo</h4>
<pre class="methodSignature">void&nbsp;bulkUpdateMongo&#8203;(<a href="../../database/collections/MetadataCollections.html" title="enum in fr.gouv.vitam.metadata.core.database.collections">MetadataCollections</a>&nbsp;metaDaCollection,
                     java.util.List&lt;com.mongodb.client.model.WriteModel&lt;org.bson.Document&gt;&gt;&nbsp;collection)
              throws <a href="../../../../common/exception/DatabaseException.html" title="class in fr.gouv.vitam.common.exception">DatabaseException</a></pre>
<div class="block">Bulk write in mongodb</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>metaDaCollection</code> - </dd>
<dd><code>collection</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../common/exception/DatabaseException.html" title="class in fr.gouv.vitam.common.exception">DatabaseException</a></code></dd>
</dl>
</li>
</ul>
<a id="bulkElasticsearch(fr.gouv.vitam.metadata.core.database.collections.MetadataCollections,java.util.Set)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bulkElasticsearch</h4>
<pre class="methodSignature">void&nbsp;bulkElasticsearch&#8203;(<a href="../../database/collections/MetadataCollections.html" title="enum in fr.gouv.vitam.metadata.core.database.collections">MetadataCollections</a>&nbsp;metaDaCollection,
                       java.util.Set&lt;java.lang.String&gt;&nbsp;collection)
                throws <a href="../../../../common/exception/DatabaseException.html" title="class in fr.gouv.vitam.common.exception">DatabaseException</a></pre>
<div class="block">Bulk save in elasticsearch</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>metaDaCollection</code> - </dd>
<dd><code>collection</code> - of id of documents</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../common/exception/DatabaseException.html" title="class in fr.gouv.vitam.common.exception">DatabaseException</a></code></dd>
</dl>
</li>
</ul>
<a id="bulkElasticsearch(fr.gouv.vitam.metadata.core.database.collections.MetadataCollections,java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bulkElasticsearch</h4>
<pre class="methodSignature">void&nbsp;bulkElasticsearch&#8203;(<a href="../../database/collections/MetadataCollections.html" title="enum in fr.gouv.vitam.metadata.core.database.collections">MetadataCollections</a>&nbsp;metaDaCollection,
                       java.util.List&lt;org.bson.Document&gt;&nbsp;collection)
                throws <a href="../../../../common/exception/DatabaseException.html" title="class in fr.gouv.vitam.common.exception">DatabaseException</a></pre>
<div class="block">Bulk save in elasticsearch</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>metaDaCollection</code> - </dd>
<dd><code>collection</code> - of documents</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../common/exception/DatabaseException.html" title="class in fr.gouv.vitam.common.exception">DatabaseException</a></code></dd>
</dl>
</li>
</ul>
<a id="isInProgress()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isInProgress</h4>
<pre class="methodSignature">boolean&nbsp;isInProgress()</pre>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/GraphComputeService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2020 Vitam. All rights reserved.</small></p>
</footer>
</body>
</html>
