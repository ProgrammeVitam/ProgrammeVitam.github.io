

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4.5. Packaging &mdash; documentation VITAM - Architecture 0.15.1</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="..\_static\css\theme.css" type="text/css">
  

  

  
        <link rel="index" title="Index" href="..\genindex.htm">
        <link rel="search" title="Recherche" href="..\search.htm">
    <link rel="top" title="documentation VITAM - Architecture 0.15.1" href="..\index.htm">
        <link rel="up" title="4. Architecture d’exploitation" href="_toc.htm">
        <link rel="next" title="4.6. Déploiement de la solution" href="30-principles-deployment.htm">
        <link rel="prev" title="4.4. Principes sur les communications inter-services et le clustering" href="10-principles-networking.htm"> 

  
  <script src="..\_static\js\modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="..\index.htm" class="icon icon-home"> VITAM - Architecture
          

          
            
            <img src="..\_static\LogoVitamGrand2.png" class="logo">
          
          </a>

          
            
            
              <div class="version">
                0.15.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs">
    <input type="hidden" name="check_keywords" value="yes">
    <input type="hidden" name="area" value="default">
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="..\introduction.htm">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="..\introduction.htm#rappels">2. Rappels</a></li>
<li class="toctree-l1"><a class="reference internal" href="..\fonctionnelle-archivistes\_toc.htm">3. Architecture fonctionnelle</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="_toc.htm">4. Architecture d&#8217;exploitation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="00-principles-services.htm">4.1. Principes communs et environnement des services</a></li>
<li class="toctree-l2"><a class="reference internal" href="01-services-techniques.htm">4.2. Services techniques</a></li>
<li class="toctree-l2"><a class="reference internal" href="02-principles-users-rights.htm">4.3. Utilisateurs, dossiers &amp; droits</a></li>
<li class="toctree-l2"><a class="reference internal" href="10-principles-networking.htm">4.4. Principes sur les communications inter-services et le clustering</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4.5. Packaging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#principes-communs">4.5.1. Principes communs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#packaging-rpm">4.5.2. Packaging RPM</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#depots">4.5.2.1. Dépôts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration-rpm">4.5.2.2. Configuration RPM</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="30-principles-deployment.htm">4.6. Déploiement de la solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="40-principles-monitoring.htm">4.7. Suivi de l&#8217;état du système</a></li>
<li class="toctree-l2"><a class="reference internal" href="50-principles-technical-administration.htm">4.8. Administration technique</a></li>
<li class="toctree-l2"><a class="reference internal" href="60-data-management.htm">4.9. Gestion des données du système</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="..\technique\_toc.htm">5. Architecture technique</a></li>
<li class="toctree-l1"><a class="reference internal" href="..\securite\_toc.htm">6. Securite</a></li>
<li class="toctree-l1"><a class="reference internal" href="..\include\_toc.htm">7. Architecture détaillée</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..\index.htm">VITAM - Architecture</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..\index.htm">Docs</a> &raquo;</li>
      
          <li><a href="_toc.htm">4. Architecture d&#8217;exploitation</a> &raquo;</li>
      
    <li>4.5. Packaging</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="..\_sources\fonctionnelle-exploitation\20-principles-packaging.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="packaging">
<h1>4.5. Packaging<a class="headerlink" href="#packaging" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="principes-communs">
<h2>4.5.1. Principes communs<a class="headerlink" href="#principes-communs" title="Lien permanent vers ce titre">¶</a></h2>
<p>Tout package doit respecter les principes suivants :</p>
<ul class="simple">
<li>Nom des packages : <code class="docutils literal"><span class="pre">vitam-&lt;id&gt;</span></code> du package</li>
<li>Version du package : Numéro de &#8220;release&#8221; du projet Vitam</li>
</ul>
<p>Les dossiers (ainsi que les droits associés) compris dans les packages doivent respecter les principes dictés dans <a class="reference internal" href="02-principles-users-rights.htm"><span class="doc">la section dédiée</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Les limitations associés à un packaging RPM sont :</p>
<ul class="last simple">
<li>L&#8217;instanciation d&#8217;une seule instance d&#8217;un même moteur par machine (il n&#8217;est ainsi pas possible d&#8217;installer 2 moteurs d&#8217;exécution sur le même OS) ;</li>
<li>La redondance de certains contenus dans les packages (ex: les librairies Java sont embarquées dans les packages, et non tirées dans les dépendances de package)</li>
</ul>
</div>
<p>Les fichiers de configuration sont gérés par l&#8217;outil de déploiement de manière externe aux packages ; ils ne sont pas inclus dans les packages.</p>
</div>
<div class="section" id="packaging-rpm">
<h2>4.5.2. Packaging RPM<a class="headerlink" href="#packaging-rpm" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les composants de la solution VITAM sont tous disponibles sous forme de packages RPM compatibles CentOS 7 ; ceci inclut notamment :</p>
<ul class="simple">
<li>L&#8217;usage des pré-requis (au sens Require) associés à Centos 7</li>
<li>L&#8217;arborescence des répertoires OS de Centos</li>
<li>L&#8217;usage du système de démarrage systemd</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Seuls les RPMs cibles sont disponibles ; les RPM Sources (SRPM) ne seront pas fournis. (les sources étant livrées sous un autre format)</p>
</div>
<div class="section" id="depots">
<h3>4.5.2.1. Dépôts<a class="headerlink" href="#depots" title="Lien permanent vers ce titre">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">La typologique des dépôts présentée ci-dessous a notamment pour but de permettre l&#8217;installation de VITAM sur des environnements présentant un accès restreint à Internet (i.e. limité aux miroirs des dépôts d&#8217;update standard des distributions linux). Par conséquent, aucun dépôt externe autre que les dépôts natifs des distributions Linux n&#8217;est requis.</p>
</div>
<p>VITAM s&#8217;appuie sur les dépôts suivants :</p>
<ul>
<li><p class="first">Concernant les dépôts externes nécessaires pour le bon fonctionnement du déploiement, il faut noter :</p>
<blockquote>
<div><ul class="simple">
<li>Centos 7 (Base, Extras) : il s&#8217;agit des dépôts standard de la distribution</li>
<li>EPEL 7 (Extra Packages for Enterprise Linux) : il s&#8217;agit d&#8217;un dépôt maintenu par Fedora et fournissant un ensemble de packages complétant ceux de RHEL/Centos</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Concernant les dépôts internes de Vitam, 2 dépôts différents sont attendus et sont présents dans les livraisons :</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">vitam-produit</span></code> : ce dépôt hégerge les packages des logiciels développés dans le cadre de VITAM ; ces packages sont maintenus par VITAM, et les licenses d&#8217;utilisations associées sont celles de VITAM.</li>
<li><code class="docutils literal"><span class="pre">vitam-externe</span></code> : ce dépôt héberge les packages des logiciels requis par l&#8217;installation de VITAM mais non présents dans les dépôts natifs de la distribution. Ces packages sont fournis par VITAM, mais sont redistribués sans modifications de la part de VITAM. Ils ne sont en particulier pas maintenus par VITAM, et les licenses d&#8217;utilisation restent celles des packages originaux.</li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">La création, configuration et initialisation des dépôts internes à partir des packages livrés est un pré-requis à l&#8217;installation de VITAM.</p>
</div>
</div>
<div class="section" id="configuration-rpm">
<h3>4.5.2.2. Configuration RPM<a class="headerlink" href="#configuration-rpm" title="Lien permanent vers ce titre">¶</a></h3>
<p>Conformément aux usages RPM de Centos/RHEL, les packages ne contiennent pas dans les pré/post action d&#8217;arrêt/démarrage/redémarrage de services.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">La configuration de démarrage des services et leur démarrage (a minima initial) est de la responsabilité de l&#8217;outillage de déploiement.</p>
</div>
<p>Contrairement aux usages de RPM, les fichiers de configuration ne seront pas gérés dans RPM . En effet, les fichiers de configuration seront instanciés par l&#8217;outil de déploiement. Pour éviter la génération de fichier .rpmnew ou .rpmsave, il ne sera pas utilisé la directive %config.</p>
<div class="admonition caution">
<p class="first admonition-title">Prudence</p>
<p class="last">A ce jour, les fichiers de configuration ne sont pas listés dans les fichiers de configuration des fichiers RPM ; par conséquent, ils n&#8217;apparaissent pas dans le résultats de commandes telles que <code class="docutils literal"><span class="pre">rpm</span> <span class="pre">-ql</span></code>.</p>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="30-principles-deployment.htm" class="btn btn-neutral float-right" title="4.6. Déploiement de la solution" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="10-principles-networking.htm" class="btn btn-neutral" title="4.4. Principes sur les communications inter-services et le clustering" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr>

  <div role="contentinfo">
    <p>
        &copy; Copyright Ce document est distribué sous les termes de la licence Creative Commons Attribution - Partage dans les Mêmes Conditions 3.0 France (CC BY-SA 3.0 FR).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.15.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="..\_static\jquery.js"></script>
      <script type="text/javascript" src="..\_static\underscore.js"></script>
      <script type="text/javascript" src="..\_static\doctools.js"></script>
      <script type="text/javascript" src="..\_static\translations.js"></script>

  

  
  
    <script type="text/javascript" src="..\_static\js\theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>