<!DOCTYPE html>
<html class="writer-html4" lang="fr" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.2. Pré-requis plate-forme &mdash; Documentation VITAM - Documentation d&#39;installation 8.0.0</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="3.3. Questions préparatoires" href="20-questions-preliminaires.html" />
    <link rel="prev" title="3.1. Expertises requises" href="01-prerequis-competences-link.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            VITAM - Documentation d'installation
              <img src="../_static/logo_vitam.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                8.0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html#rappels">2. Rappels</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="_toc.html">3. Prérequis à l’installation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="01-prerequis-competences-link.html">3.1. Expertises requises</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.2. Pré-requis plate-forme</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#base-commune">3.2.1. Base commune</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pki">3.2.2. PKI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#systemes-d-exploitation">3.2.3. Systèmes d’exploitation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#deploiement-sur-environnement-almalinux">3.2.3.1. Déploiement sur environnement AlmaLinux</a></li>
<li class="toctree-l4"><a class="reference internal" href="#deploiement-sur-environnement-debian">3.2.3.2. Déploiement sur environnement Debian</a></li>
<li class="toctree-l4"><a class="reference internal" href="#presence-d-un-agent-antiviral">3.2.3.3. Présence d’un agent antiviral</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#materiel">3.2.4. Matériel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#librairie-de-cartouches-pour-offre-froide">3.2.5. Librairie de cartouches pour offre froide</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="20-questions-preliminaires.html">3.3. Questions préparatoires</a></li>
<li class="toctree-l2"><a class="reference internal" href="31-get_version.html">3.4. Récupération de la version</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../installation/_toc.html">4. Procédures d’installation / mise à jour</a></li>
<li class="toctree-l1"><a class="reference internal" href="../update/_toc.html">5. Procédures de mise à jour de la configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../post_install/_toc.html">6. Post installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade/_toc.html">7. Montée de version</a></li>
<li class="toctree-l1"><a class="reference internal" href="../annexes/_toc.html">8. Annexes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">VITAM - Documentation d'installation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="_toc.html">3. Prérequis à l’installation</a></li>
      <li class="breadcrumb-item active">3.2. Pré-requis plate-forme</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/pre_install/10-prerequis.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="pre-requis-plate-forme">
<h1>3.2. Pré-requis plate-forme<a class="headerlink" href="#pre-requis-plate-forme" title="Lien permanent vers ce titre">¶</a></h1>
<p>Les pré-requis suivants sont nécessaires :</p>
<div class="section" id="base-commune">
<h2>3.2.1. Base commune<a class="headerlink" href="#base-commune" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li>Tous les serveurs hébergeant la solution logicielle <a class="reference internal" href="../introduction.html#term-vitam"><span class="xref std std-term">VITAM</span></a> doivent êre synchronisés sur un serveur de temps (protocole <a class="reference internal" href="../introduction.html#term-ntp"><span class="xref std std-term">NTP</span></a>, pas de <em>stratum</em> 10)</li>
<li>Disposer de la solution de déploiement basée sur ansible</li>
</ul>
<p>Le déploiement est orchestré depuis un poste ou serveur d’administration ; les pré-requis suivants doivent y être présents :</p>
<ul class="simple">
<li>packages nécessaires :<ul>
<li><strong>ansible</strong> (version <strong>2.9</strong> minimale et conseillée ; se référer à la <a class="reference external" href="http://docs.ansible.com/ansible/latest/intro_installation.html">documentation ansible</a> pour la procédure d’installation)</li>
<li><strong>openssh-client</strong> (client SSH utilisé par ansible)</li>
<li><strong>JRE OpenJDK 11</strong> et <strong>openssl</strong> (du fait de la génération de certificats / <em>stores</em>, l’utilitaire <code class="docutils literal notranslate"><span class="pre">keytool</span></code> est nécessaire)</li>
</ul>
</li>
<li>un accès ssh vers un utilisateur d’administration avec élévation de privilèges vers les droits <code class="docutils literal notranslate"><span class="pre">root</span></code>, <code class="docutils literal notranslate"><span class="pre">vitam</span></code>, <code class="docutils literal notranslate"><span class="pre">vitamdb</span></code> (les comptes <code class="docutils literal notranslate"><span class="pre">vitam</span></code> et <code class="docutils literal notranslate"><span class="pre">vitamdb</span></code> sont créés durant le déploiement) sur les serveurs cibles.</li>
<li>Le compte utilisé sur le serveur d’administration doit avoir confiance dans les serveurs sur lesquels la solution logicielle <a class="reference internal" href="../introduction.html#term-vitam"><span class="xref std std-term">VITAM</span></a> doit être installée (fichier <code class="docutils literal notranslate"><span class="pre">~/.ssh/known_hosts</span></code> correctement renseigné)</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Se référer à la <a class="reference external" href="http://docs.ansible.com/ansible/latest/intro_getting_started.html">documentation d’usage</a> pour les procédures de connexion aux machines-cibles depuis le serveur ansible.</p>
</div>
<div class="admonition caution">
<p class="first admonition-title">Prudence</p>
<p class="last">Les adresses <a class="reference internal" href="../introduction.html#term-ip"><span class="xref std std-term">IP</span></a> des machines sur lesquelles la solution logicielle <a class="reference internal" href="../introduction.html#term-vitam"><span class="xref std std-term">VITAM</span></a> sera installée ne doivent pas changer d’adresse IP au cours du temps. En cas de changement d’adresse IP, la plateforme ne pourra plus fonctionner.</p>
</div>
<div class="admonition caution">
<p class="first admonition-title">Prudence</p>
<p class="last">Aucune version pré-installée de la JRE OpenJDK ne doit être présente sur les machines cibles où sera installé <a class="reference internal" href="../introduction.html#term-vitam"><span class="xref std std-term">VITAM</span></a>.</p>
</div>
<div class="admonition caution">
<p class="first admonition-title">Prudence</p>
<p class="last">La solution <a class="reference internal" href="../introduction.html#term-vitam"><span class="xref std std-term">VITAM</span></a> ne tolère qu’une très courte désynchronisation de temps entre les machines (par défaut, 10 secondes). La configuration NTP doit être finement monitorée. Idéalement une synchronisation doit être planifiée chaque 5/10 minutes.</p>
</div>
<div class="admonition caution">
<p class="first admonition-title">Prudence</p>
<p class="last">Dans le cadre de l’installation des packages «&nbsp;extra&nbsp;», il est nécessaire, pour les partitions hébergeant des containeurs docker (mongo-express, head), qu’elles aient un accès internet (installation du paquet officiel <code class="docutils literal notranslate"><span class="pre">docker</span></code>, récupération des images).</p>
</div>
<div class="admonition caution">
<p class="first admonition-title">Prudence</p>
<p class="last">Dans le cadre de l’installation des packages «&nbsp;extra&nbsp;», il est nécessaire, pour les partitions hébergeant le composant <code class="docutils literal notranslate"><span class="pre">ihm-recette</span></code>, qu’elles aient un accès internet (installation du <cite>repository</cite> et installation du <cite>package</cite> <code class="docutils literal notranslate"><span class="pre">git-lfs</span></code> ; récupération des <a class="reference internal" href="../introduction.html#term-tnr"><span class="xref std std-term">TNR</span></a> depuis un dépôt git).</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p class="last">Dans le cas d’une installation du composant <code class="docutils literal notranslate"><span class="pre">vitam-offer</span></code> en <code class="docutils literal notranslate"><span class="pre">filesystem-hash</span></code>, il est fortement recommandé d’employer un système de fichiers <code class="docutils literal notranslate"><span class="pre">xfs</span></code> pour le stockage des données. Se référer au <a class="reference internal" href="../introduction.html#term-dat"><span class="xref std std-term">DAT</span></a> pour connaître la structuration des <em>filesystems</em> dans la solution logicielle <a class="reference internal" href="../introduction.html#term-vitam"><span class="xref std std-term">VITAM</span></a>. En cas d’utilisation d’un autre type, s’assurer que le filesystem possède/gère bien l’option <code class="docutils literal notranslate"><span class="pre">user_xattr</span></code>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p class="last">Dans le cas d’une installation du composant <code class="docutils literal notranslate"><span class="pre">vitam-offer</span></code> en <code class="docutils literal notranslate"><span class="pre">tape-library</span></code>, il est fortement recommandé d’installer au préalable sur les machines cible associées les paquets pour les commandes <code class="docutils literal notranslate"><span class="pre">mt</span></code>, <code class="docutils literal notranslate"><span class="pre">mtx</span></code> et <code class="docutils literal notranslate"><span class="pre">dd</span></code>. Ces composants doivent également apporter le groupe système <code class="docutils literal notranslate"><span class="pre">tape</span></code>. Se reporter également à <span class="xref std std-ref">prerequisoffrefroide</span>.</p>
</div>
</div>
<div class="section" id="pki">
<h2>3.2.2. PKI<a class="headerlink" href="#pki" title="Lien permanent vers ce titre">¶</a></h2>
<p>La solution logicielle <a class="reference internal" href="../introduction.html#term-vitam"><span class="xref std std-term">VITAM</span></a> nécessite des certificats pour son bon fonctionnement (cf. <a class="reference internal" href="../introduction.html#term-dat"><span class="xref std std-term">DAT</span></a> pour la liste des secrets et <a class="reference internal" href="../annexes/10-overview_certificats.html"><span class="doc">Vue d’ensemble de la gestion des certificats</span></a> pour une vue d’ensemble de leur usage.) La gestion de ces certificats, par le biais d’une ou plusieurs <a class="reference internal" href="../introduction.html#term-pki"><span class="xref std std-term">PKI</span></a>, est à charge de l’équipe d’exploitation. La mise à disposition des certificats et des chaînes de validation <a class="reference internal" href="../introduction.html#term-ca"><span class="xref std std-term">CA</span></a>, placés dans les répertoires de déploiement adéquats, est un pré-requis à tout déploiement en production de la solution logicielle <a class="reference internal" href="../introduction.html#term-vitam"><span class="xref std std-term">VITAM</span></a>.</p>
<div class="admonition seealso">
<p class="first admonition-title">Voir aussi</p>
<p class="last">Veuillez vous référer à la section <a class="reference internal" href="../annexes/10-overview_certificats.html"><span class="doc">Vue d’ensemble de la gestion des certificats</span></a> pour la liste des certificats nécessaires au déploiement de la solution VITAM, ainsi que pour leurs répertoires de déploiement.</p>
</div>
</div>
<div class="section" id="systemes-d-exploitation">
<h2>3.2.3. Systèmes d’exploitation<a class="headerlink" href="#systemes-d-exploitation" title="Lien permanent vers ce titre">¶</a></h2>
<p>Seules deux distributions Linux suivantes sont supportées à ce jour :</p>
<ul class="simple">
<li>AlmaLinux 9</li>
<li>Debian 12 (bookworm)</li>
</ul>
<p>SELinux doit être configuré en mode <code class="docutils literal notranslate"><span class="pre">permissive</span></code> ou <code class="docutils literal notranslate"><span class="pre">disabled</span></code>. Toutefois depuis la release R13, la solution logicielle <a class="reference internal" href="../introduction.html#term-vitam"><span class="xref std std-term">VITAM</span></a> prend désormais en charge l’activation de SELinux sur le périmètre du composant worker et des processus associés aux <em>griffins</em> (greffons de préservation).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">En cas de changement de mode SELinux, redémarrer les machines pour la bonne prise en compte de la modification avant de lancer le déploiement.</p>
</div>
<div class="admonition caution">
<p class="first admonition-title">Prudence</p>
<p class="last">En cas d’installation initiale, les utilisateurs et groupes systèmes (noms et <a class="reference internal" href="../introduction.html#term-uid"><span class="xref std std-term">UID</span></a>) utilisés par VITAM (et listés dans le <a class="reference internal" href="../introduction.html#term-dat"><span class="xref std std-term">DAT</span></a>) ne doivent pas être présents sur les serveurs cible. Ces comptes sont créés lors de l’installation de VITAM et gérés par VITAM.</p>
</div>
<div class="section" id="deploiement-sur-environnement-almalinux">
<h3>3.2.3.1. Déploiement sur environnement AlmaLinux<a class="headerlink" href="#deploiement-sur-environnement-almalinux" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li>Disposer d’une plate-forme Linux AlmaLinux 9 installée selon la répartition des services souhaités. En particulier, ces serveurs doivent avoir :<ul>
<li>une configuration de temps synchronisée (ex: en récupérant le temps à un serveur centralisé)</li>
<li>Des autorisations de flux conformément aux besoins décrits dans le <a class="reference internal" href="../introduction.html#term-dat"><span class="xref std std-term">DAT</span></a></li>
<li>une configuration des serveurs de noms correcte (cette configuration sera surchargée lors de l’installation)</li>
<li>un accès à un dépôt (ou son miroir) AlmaLinux 9 (base et extras) et EPEL 9</li>
</ul>
</li>
<li>Disposer des binaires VITAM : paquets <a class="reference internal" href="../introduction.html#term-rpm"><span class="xref std std-term">RPM</span></a> de VITAM (vitam-product) ainsi que les paquets d’éditeurs tiers livrés avec VITAM (vitam-external)</li>
<li>Disposer, si besoin, des binaires pour l’installation des <em>griffins</em></li>
</ul>
</div>
<div class="section" id="deploiement-sur-environnement-debian">
<h3>3.2.3.2. Déploiement sur environnement Debian<a class="headerlink" href="#deploiement-sur-environnement-debian" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li>Disposer d’une plate-forme Linux Debian «&nbsp;bookworm&nbsp;» installée selon la répartition des services souhaitée. En particulier, ces serveurs doivent avoir :<ul>
<li>une configuration de temps synchronisée (ex: en récupérant le temps à un serveur centralisé)</li>
<li>Des autorisations de flux conformément aux besoins décrits dans le <a class="reference internal" href="../introduction.html#term-dat"><span class="xref std std-term">DAT</span></a></li>
<li>une configuration des serveurs de noms correcte (cette configuration sera surchargée lors de l’installation)</li>
<li>un accès à un dépôt (ou son miroir) Debian (base et extras) et bookworm-backports</li>
<li>un accès internet, car le dépôt docker sera ajouté</li>
</ul>
</li>
<li>Disposer des binaires VITAM : paquets deb de VITAM (vitam-product) ainsi que les paquets d’éditeurs tiers livrés avec VITAM (vitam-external)</li>
<li>Disposer, si besoin, des binaires pour l’installation des <em>griffins</em></li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p class="last">Pour l’installation des <em>packages</em> mongoDB, il est nécessaire de mettre à disposition le <em>package</em> <code class="docutils literal notranslate"><span class="pre">libcurl3</span></code> présent en <em>stretch</em> uniquement (le <em>package</em> <code class="docutils literal notranslate"><span class="pre">libcurl4</span></code> sera désinstallé).</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p class="last">Le <em>package</em> <code class="docutils literal notranslate"><span class="pre">curl</span></code> est installé depuis les dépôts <code class="docutils literal notranslate"><span class="pre">stretch</span></code>.</p>
</div>
</div>
<div class="section" id="presence-d-un-agent-antiviral">
<h3>3.2.3.3. Présence d’un agent antiviral<a class="headerlink" href="#presence-d-un-agent-antiviral" title="Lien permanent vers ce titre">¶</a></h3>
<p>Dans le cas de partitions sur lesquelles un agent antiviral est déjà configuré (typiquement, <em>golden image</em>), il est recommandé de positionner une exception sur l’arborescence <code class="docutils literal notranslate"><span class="pre">/vitam</span></code> et les sous-arborescences, hormis la partition hébergeant le composant <code class="docutils literal notranslate"><span class="pre">ingest-exteral</span></code> (emploi d’un agent antiviral en prérequis des <em>ingest</em> ; se reporter à <a class="reference internal" href="../installation/21-addons.html#confantivirus"><span class="std std-ref">Paramétrage de l’antivirus (ingest-external)</span></a>).</p>
</div>
</div>
<div class="section" id="materiel">
<h2>3.2.4. Matériel<a class="headerlink" href="#materiel" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les prérequis matériel sont définis dans le <a class="reference internal" href="../introduction.html#term-dat"><span class="xref std std-term">DAT</span></a> ; à l’heure actuelle, le minimum recommandé pour la solution Vitam est 2 CPUs. Il également est recommandé de prévoir (paramétrage par défaut à l’installation) 512Mo de RAM disponible par composant applicatif <a class="reference internal" href="../introduction.html#term-vitam"><span class="xref std std-term">VITAM</span></a> installé sur chaque machine (hors elasticsearch et mongo).</p>
<p>Concernant l’espace disque, à l’heure actuelle, aucun pré-requis n’a été défini ; cependant, sont à prévoir par la suite des espaces de stockage conséquents pour les composants suivants :</p>
<ul class="simple">
<li>offer</li>
<li>solution de centralisation des logs (<cite>cluster</cite> elasticsearch de log)</li>
<li>workspace</li>
<li>worker (temporairement, lors du traitement de chaque fichier à traiter)</li>
<li><cite>cluster</cite> elasticsearch et mongodb des données <a class="reference internal" href="../introduction.html#term-vitam"><span class="xref std std-term">VITAM</span></a></li>
</ul>
<p>L’arborescence associée sur les partitions associées est : <code class="docutils literal notranslate"><span class="pre">/vitam/data/&lt;composant&gt;</span></code></p>
</div>
<div class="section" id="librairie-de-cartouches-pour-offre-froide">
<h2>3.2.5. Librairie de cartouches pour offre froide<a class="headerlink" href="#librairie-de-cartouches-pour-offre-froide" title="Lien permanent vers ce titre">¶</a></h2>
<p>Des prérequis sont à réunir pour utiliser l’offre froide de stockage «&nbsp;tape-library&nbsp;» définie dans le <a class="reference internal" href="../introduction.html#term-dat"><span class="xref std std-term">DAT</span></a>.</p>
<ul class="simple">
<li>La librairie de cartouches doit être opérationnelle et chargée en cartouches.</li>
<li>La librairie et les lecteurs doivent déjà être configurés sur la machine devant supporter une instance de ce composant. La commande <code class="docutils literal notranslate"><span class="pre">lsscsi</span> <span class="pre">-g</span></code> peut permettre de vérifier si des périphériques sont détectés.</li>
<li>Le dossier <code class="docutils literal notranslate"><span class="pre">/vitam/data/offer/</span></code> doit correspondre à une seule partition de système de fichiers (i.e. tout le contenu du dossier <code class="docutils literal notranslate"><span class="pre">/vitam/data/offer</span></code> doit appartenir au même point de montage). Le système de fichiers doit supporter les opérations de atomiques (type atomic rename / move) et la création de liens symboliques (ex. XFS, EXT4…)</li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="01-prerequis-competences-link.html" class="btn btn-neutral float-left" title="3.1. Expertises requises" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="20-questions-preliminaires.html" class="btn btn-neutral float-right" title="3.3. Questions préparatoires" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Ce document est distribué sous les termes de la Licence Ouverte V2.0.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>