<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation du poste de développement &mdash; Vitam-UI documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
            <a href="index.html">
            <img src="_static/Vitam_Logo-CMJN.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sections/intro_objectifs.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="sections/orientations_techniques.html">2. Orientations techniques</a></li>
<li class="toctree-l1"><a class="reference internal" href="sections/architecture.html">3. Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="sections/implementation.html">4. Implémentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="sections/gestion.html">5. Gestion du système</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Vitam-UI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Installation du poste de développement</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/Installation_poste_de_dev.md.txt" rel="nofollow"> Afficher la source de la page</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="installation-du-poste-de-developpement">
<h1>Installation du poste de développement<a class="headerlink" href="#installation-du-poste-de-developpement" title="Lien permanent vers cette rubrique"></a></h1>
<p>!!! info
Vous retrouverez tous les scripts cités dans cette documentation dans le dossier scripts</p>
<section id="installation-java">
<h2>Installation Java<a class="headerlink" href="#installation-java" title="Lien permanent vers cette rubrique"></a></h2>
<p>Lancer la commande : sudo sh jdk8u171.sh
Tester sur un nouveau terminal la commande : java -version</p>
<p>L’information suivante doit s’afficher :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">java version &quot;1.8.0_171&quot;</span>
<span class="go">Java(TM) SE Runtime Environment (build 1.8.0_171-b11)</span>
<span class="go">Java HotSpot(TM) 64-Bit Server VM (build 25.171-b11, mixed mode)</span>
</pre></div>
</div>
</section>
<section id="installation-maven">
<h2>Installation Maven<a class="headerlink" href="#installation-maven" title="Lien permanent vers cette rubrique"></a></h2>
<p>Lancer la commande :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo sh maven.sh</span>
</pre></div>
</div>
<p>Relancer votre terminal pour que l’ajout des binaires maven au PATH soit pris en compte.
Tester sur un nouveau terminal la commande : <code class="docutils literal notranslate"><span class="pre">mvn</span> <span class="pre">--version</span></code></p>
<p>L’information suivante doit s’afficher :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Apache Maven 3.5.2 (138edd61fd100ec658bfa2d307c43b76940a5d7d; 2017-10-18T09:58:13+02:00)</span>
<span class="go">Maven home: /usr/local/apache-maven</span>
<span class="go">Java version: 1.8.0_161, vendor: Oracle Corporation</span>
<span class="go">Java home: /usr/local/jdk1.8.0_161/jre</span>
<span class="go">Default locale: en_US, platform encoding: UTF-8</span>
<span class="go">OS name: &quot;linux&quot;, version: &quot;4.13.0-36-generic&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;</span>
</pre></div>
</div>
<p>Renommer le fichier settings.xml qui se trouve dans /usr/local/apache-maven/conf en settings.xml.old
Mettre le fichier settings.xml qui se trouve dans Poste Dev dans /usr/local/apache-maven/conf
Modifier dans le fichier settings.xml, la balise localRepository pour mettre le dossier correspondant à votre machine.
Installation Eclipse</p>
</section>
<section id="installation-eclipse">
<h2>Installation Eclipse<a class="headerlink" href="#installation-eclipse" title="Lien permanent vers cette rubrique"></a></h2>
<p>Lancer la commande : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">sh</span> <span class="pre">eclipse.sh</span></code>
Tester sur un nouveau terminal la commande : <code class="docutils literal notranslate"><span class="pre">eclipse</span></code></p>
<p>Eclipse doit se lancer.</p>
<p>Depuis <strong>Eclipse Marketplace</strong>, installer :</p>
<ul class="simple">
<li><p>Eclipse Checkstyle 8.8.0</p></li>
<li><p>Eclipse-pmd 1.10</p></li>
<li><p>Spring Tools 3.9.2</p></li>
<li><p>YEdit</p></li>
<li><p>FindBugs : installation depuis <a class="reference external" href="http://findbugs.cs.umd.edu/eclipse/">http://findbugs.cs.umd.edu/eclipse/</a></p></li>
<li><p>Lombok : télécharger Lombok via <a class="reference external" href="https://projectlombok.org/download">https://projectlombok.org/download</a> et suivre les instructions depuis <a class="reference external" href="https://projectlombok.org/setup/eclipse">https://projectlombok.org/setup/eclipse</a></p></li>
<li><p>PMD : installation en suivant les instructions de  <a class="reference external" href="https://sourceforge.net/projects/pmd/files/pmd-eclipse/update-site/">https://sourceforge.net/projects/pmd/files/pmd-eclipse/update-site/</a></p></li>
</ul>
<p>A partir du dossier eclipse, installer les différents éléments du formatter.</p>
</section>
<section id="installation-docker3">
<h2>Installation Docker3<a class="headerlink" href="#installation-docker3" title="Lien permanent vers cette rubrique"></a></h2>
<p>Lancer la commande : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">sh</span> <span class="pre">docker.sh</span></code>
L’information suivante doit s’afficher :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Hello from Docker!</span>
<span class="go">This message shows that your installation appears to be working correctly.</span>

<span class="go">To generate this message, Docker took the following steps:</span>
<span class="go"> 1. The Docker client contacted the Docker daemon.</span>
<span class="go"> 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.</span>
<span class="go">    (amd64)</span>
<span class="go"> 3. The Docker daemon created a new container from that image which runs the</span>
<span class="go">    executable that produces the output you are currently reading.</span>
<span class="go"> 4. The Docker daemon streamed that output to the Docker client, which sent it</span>
<span class="go">    to your terminal.</span>

<span class="go">To try something more ambitious, you can run an Ubuntu container with:</span>
<span class="gp"> $ </span>docker run -it ubuntu bash

<span class="go">Share images, automate workflows, and more with a free Docker ID:</span>
<span class="go"> https://cloud.docker.com/</span>

<span class="go">For more examples and ideas, visit:</span>
<span class="go"> https://docs.docker.com/engine/userguide/</span>
</pre></div>
</div>
</section>
<section id="installation-docker-compose">
<h2>Installation docker-compose<a class="headerlink" href="#installation-docker-compose" title="Lien permanent vers cette rubrique"></a></h2>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo curl -L https://github.com/docker/compose/releases/download/1.19.0/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose</span>
<span class="go">sudo chmod +x /usr/local/bin/docker-compose</span>
</pre></div>
</div>
<p>Se connecter au docker VITAMUI avec la commande : sudo docker login <code class="docutils literal notranslate"><span class="pre">docker.vitamui.com</span></code></p>
</section>
<section id="installation-git">
<h2>Installation Git<a class="headerlink" href="#installation-git" title="Lien permanent vers cette rubrique"></a></h2>
<p>Lancer la commande : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">git-core</span></code>
Tester sur un nouveau terminal la commande : <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">--version</span></code>
L’information suivante doit s’afficher :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git version 2.14.1</span>
</pre></div>
</div>
</section>
<section id="configuration-de-git">
<h2>Configuration de Git<a class="headerlink" href="#configuration-de-git" title="Lien permanent vers cette rubrique"></a></h2>
<p>Mettre à jour les informations du commiter en remplaçant l’user name et l’user email par vos propres informations.</p>
<ul class="simple">
<li><p>Lancer la commande : <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span> <span class="pre">--global</span> <span class="pre">user.name</span> <span class="pre">&quot;Makhtar</span> <span class="pre">DIAGNE&quot;</span></code></p></li>
<li><p>Lancer la commande : <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span> <span class="pre">--global</span> <span class="pre">user.email</span> <span class="pre">&quot;makhtar.diagne&#64;vitamui.com&quot;</span></code></p></li>
</ul>
<p>Vérifier la configuration à l’aide de la commande suivante : <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span> <span class="pre">--list</span></code>
Les informations suivantes doivent s’afficher :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">user.name=Makhtar DIAGNE</span>
<span class="go">user.email=makhtar.diagne@vitamui.com</span>
</pre></div>
</div>
<p>Définir l’autorebase à la place du merge avec la commande suivante : <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span> <span class="pre">--global</span> <span class="pre">pull.rebase</span> <span class="pre">true</span></code>
Pour des branches existantes, utiliser la commande pour la branche master par exemple : <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span> <span class="pre">branch.master.rebase</span> <span class="pre">true</span></code></p>
</section>
<section id="bitbucket-generer-une-cle-ssh">
<h2>Bitbucket : Générer une clé SSH<a class="headerlink" href="#bitbucket-generer-une-cle-ssh" title="Lien permanent vers cette rubrique"></a></h2>
<p>Vous devez disposer d’un compte BitBucket de VITAMUI.</p>
<p>Lancer la commande et mettre les informations suivantes: ssh-keygen Répertoire où sera stockée la clé : /home/makhtar/.ssh/id_rsa_vitamui Ne mettez pas de passphrase.</p>
<p>Tester sur un terminal la commande : ls ~/.ssh</p>
<p>L’information suivante doit s’afficher :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">id_rsa_vitamui id_rsa_vitamui.pub</span>
</pre></div>
</div>
<p>Copier le contenu de la clé  <code class="docutils literal notranslate"><span class="pre">~/.ssh/id_rsa_vitamui.pub</span></code> et le rajouter dans le compte BitBucket.</p>
<p>Tester sur un terminal la commande : <code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">-T</span> <span class="pre">git&#64;bitbucket.org</span></code>
L’information suivante doit s’afficher :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">logged in as makhtarvitamui.</span>

<span class="go">You can use git or hg to connect to Bitbucket. Shell access is disabled.</span>
</pre></div>
</div>
<p>cf <a class="reference external" href="https://confluence.atlassian.com/bitbucket/set-up-an-ssh-key-728138079.html#SetupanSSHkey-ssh2">https://confluence.atlassian.com/bitbucket/set-up-an-ssh-key-728138079.html#SetupanSSHkey-ssh2</a></p>
<p>Bitbucket : Récupérer le projet VITAMUI</p>
<p>Lancer la commande: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">git&#64;bitbucket.org:vitamui/vitamui.git</span></code>
Lancer un build complet Maven avec un <code class="docutils literal notranslate"><span class="pre">mvn</span> <span class="pre">clean</span> <span class="pre">install</span></code>.</p>
</section>
<section id="installation-sublimetext-et-ou-visual-studio-code">
<h2>Installation SublimeText et/ou VIsual Studio Code<a class="headerlink" href="#installation-sublimetext-et-ou-visual-studio-code" title="Lien permanent vers cette rubrique"></a></h2>
<p>Lancer la commande : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">sh</span> <span class="pre">sublimeText.sh</span></code>
SublimeText est installé et peut être lancé depuis le menu Applications -&gt; Programming.</p>
<p>Pour Vsual Studio Code, suivre les instructions ici <a class="reference external" href="https://code.visualstudio.com/docs/setup/linux">https://code.visualstudio.com/docs/setup/linux</a></p>
</section>
<section id="installation-nodejs-npm-angularcli">
<h2>Installation NodeJS / Npm / AngularCli<a class="headerlink" href="#installation-nodejs-npm-angularcli" title="Lien permanent vers cette rubrique"></a></h2>
<p>Lancer la commande : <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">sh</span> <span class="pre">front.sh</span></code></p>
<p>Lancer sur le terminal la commande : <code class="docutils literal notranslate"><span class="pre">node</span> <span class="pre">-v</span></code></p>
<p>L’information suivante doit s’afficher :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">v12.5.0</span>
</pre></div>
</div>
<p>Lancer sur le terminal la commande : <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">-v</span></code>
L’information suivante doit s’afficher :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">6.9.0</span>
</pre></div>
</div>
<p>Lancer sur le terminal la commande : <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">-version</span></code>
L’information suivante doit s’afficher :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Angular CLI: 8.0.6</span>
<span class="go">Node: 12.5.0</span>
<span class="go">OS: linux x64</span>
<span class="go">Angular:</span>
<span class="go">...</span>
</pre></div>
</div>
</section>
<section id="mongodb">
<h2>MongoDB<a class="headerlink" href="#mongodb" title="Lien permanent vers cette rubrique"></a></h2>
<p>Lancer un docker Mongo avec la commande suivante qui se trouve dans vitamui/tools/docker/mongo :
restart_dev.sh</p>
<p>Cette commande permet d’accéder à Mongo sur localhost:27018. Le port 27017 est réservé au Mongo de Vitam Installer robot3t <a class="reference external" href="https://robomongo.org/download">https://robomongo.org/download</a></p>
</section>
<section id="vpn">
<h2>VPN<a class="headerlink" href="#vpn" title="Lien permanent vers cette rubrique"></a></h2>
<p>Il faut obtenir de l’équipe Devops un accès VPN afin de pouvoir attaquer les machines VITAM depuis le poste de Dev.
Il faut ensuite mettre les fichiers de configuration du VPN dans un répertoire openvpn.</p>
<p>créer un dossier openvpn :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mkdir ~/.config/openvpn</span>
</pre></div>
</div>
<p>Y copier les fichiers (à demander à l’équipe Devops) :
ca.crt
vitamuivpn.conf
myvpn.tlsauth
yahya.crt
yahya.key</p>
<p>Lancer la commande de connexion VPN :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo openvpn --config vitamuivpn.conf</span>
</pre></div>
</div>
<p>Tester avec un ping sur turtle :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ping 10.0.0.116</span>
</pre></div>
</div>
</section>
<section id="fichier-hosts">
<h2>Fichier hosts<a class="headerlink" href="#fichier-hosts" title="Lien permanent vers cette rubrique"></a></h2>
<p>Pour accéder aux UI sur la machine de Dev, il faut compléter le fichier hosts avec les éléments suivants :</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>127.0.0.1       dev.vitamui.com
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Programme Vitam.</p>
  </div>

  Compilé avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thème</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>